(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9425],{1899:function(e,n,t){Promise.resolve().then(t.bind(t,4496))},4496:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return v}});var i=t(7437),r=t(2265),l=t(4021),d=t(3538),s=t(6300),a=t(2146),c=t(4224),u=t(9130),o=t(995),h=t(9690);function v(){let[e,n]=(0,r.useState)([]),[t,v]=(0,r.useState)(1),{data:g,isLoading:E}=(0,a.Y)(),{mutateAsync:m,isLoading:x}=(0,u.O)(),f=(e,n)=>{m({id:e,data:{statusId:n}})};return(0,r.useEffect)(()=>{(null==g?void 0:g.data)&&n(null==g?void 0:g.data)},[null==g?void 0:g.data]),(0,i.jsxs)("div",{className:"content-wrapper",children:[(0,i.jsx)(o.Z,{isLoading:x||E}),(0,i.jsx)("div",{className:"col-2 mb-3",children:(0,i.jsxs)("div",{className:"",children:[(0,i.jsx)("label",{htmlFor:"",className:"form-label",children:"Lọc đơn h\xe0ng"}),(0,i.jsxs)("select",{onChange:e=>{let{value:t}=e.target;t?n([...null==g?void 0:g.data].filter(e=>{var n;return(null==e?void 0:null===(n=e.status)||void 0===n?void 0:n.name)===t})):n(null==g?void 0:g.data)},className:"form-select  form-select-sm p-2 border-0",children:[(0,i.jsx)("option",{value:"",selected:!0,children:"Tất cả đơn h\xe0ng"}),(0,i.jsx)("option",{value:l.DF.ACCEPTED,children:"Đơn h\xe0ng đ\xe3 duyệt"}),(0,i.jsx)("option",{value:l.DF.PENDING,children:"Đơn h\xe0ng chờ ph\xea duyệt"}),(0,i.jsx)("option",{value:l.DF.CANCELED,children:"Đơn h\xe0ng đ\xe3 hủy"}),(0,i.jsx)("option",{value:l.DF.REJECT,children:"Đơn h\xe0ng đ\xf3ng ph\xea duyệt"})]})]})}),e.length>0?(0,i.jsx)("div",{className:"col-12 grid-margin",children:(0,i.jsx)("div",{className:"card",children:(0,i.jsxs)("div",{className:"card-body",children:[(0,i.jsx)("h4",{className:"card-title",children:"Danh s\xe1ch đặt h\xe0ng"}),(0,i.jsxs)("div",{className:"table-responsive",children:[(0,i.jsxs)("table",{className:"table",children:[(0,i.jsx)("thead",{children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{children:" T\xean h\xe0ng "}),(0,i.jsx)("th",{children:" Ng\xe0y đặt "}),(0,i.jsx)("th",{children:" Người đặt"}),(0,i.jsx)("th",{children:" Số lượng"}),(0,i.jsx)("th",{children:" Trạng th\xe1i đặt h\xe0ng"}),(0,i.jsx)("th",{children:" Gi\xe1"}),(0,i.jsx)("th",{children:" Tổng số tiền "})]})}),(0,i.jsx)("tbody",{children:e.map(e=>{var n,t,r,a,u,o,h,v,g,E,m,x,p;return(0,i.jsxs)("tr",{className:"cursor-pointer",children:[(0,i.jsx)("td",{children:null==e?void 0:null===(n=e.product)||void 0===n?void 0:n.name}),(0,i.jsxs)("td",{children:[" ",(0,d.Bi)(null==e?void 0:e.createdAt)]}),(0,i.jsx)("td",{children:null==e?void 0:null===(t=e.account)||void 0===t?void 0:t.fullName}),(0,i.jsxs)("td",{children:[" ",null==e?void 0:e.quantity]}),(0,i.jsx)("td",{children:(0,i.jsx)(c.ZP,{trigger:"click",placement:"right-start",theme:"light",interactive:!0,content:(null==e?void 0:null===(r=e.status)||void 0===r?void 0:r.name)!==l.DF.CANCELED?(0,i.jsxs)("div",{className:"d-flex flex-column",children:[(null==e?void 0:null===(a=e.status)||void 0===a?void 0:a.name)===l.DF.PENDING?(0,i.jsx)("div",{onClick:()=>f(null==e?void 0:e.id,7),className:"badge badge-gradient-success text-center cursor-pointer",children:"Ph\xea duyệt"}):(0,i.jsx)("div",{onClick:()=>f(null==e?void 0:e.id,1),className:"badge badge-gradient-info text-center cursor-pointer",children:"Thu hồi ph\xea duyệt"}),(null==e?void 0:null===(u=e.status)||void 0===u?void 0:u.name)!==l.DF.REJECT&&(0,i.jsx)("div",{onClick:()=>f(null==e?void 0:e.id,2),className:"badge badge-gradient-danger text-center cursor-pointer mt-2",children:"Từ chối"})]}):(0,i.jsx)("div",{onClick:()=>f(null==e?void 0:e.id,1),className:"badge badge-gradient-danger text-center cursor-pointer",children:"K\xedch hoạt đơn h\xe0ng"}),zIndex:2,allowHTML:!0,arrow:!1,children:(0,i.jsx)("label",{className:"cursor-pointer badge badge-gradient-".concat((null==e?void 0:null===(o=e.status)||void 0===o?void 0:o.name)===l.DF.PENDING?"success":(null==e?void 0:null===(h=e.status)||void 0===h?void 0:h.name)===l.DF.CANCELED?"danger":(null==e?void 0:null===(v=e.status)||void 0===v?void 0:v.name)===l.DF.REJECT?"primary":"warning"),children:(null==e?void 0:null===(g=e.status)||void 0===g?void 0:g.name)===l.DF.PENDING?l.GP.PENDING:(null==e?void 0:null===(E=e.status)||void 0===E?void 0:E.name)===l.DF.CANCELED?l.GP.CANCELED:(null==e?void 0:null===(m=e.status)||void 0===m?void 0:m.name)===l.DF.REJECT?l.GP.REJECT:l.GP.ACCEPTED})})}),(0,i.jsx)("td",{children:(0,s.x)(null==e?void 0:null===(x=e.product)||void 0===x?void 0:x.price)}),(0,i.jsx)("td",{children:(0,s.x)((null==e?void 0:null===(p=e.product)||void 0===p?void 0:p.price)*(null==e?void 0:e.quantity))})]})})})]}),(0,i.jsx)("div",{className:"d-flex justify-content-end mt-4",children:(null==g?void 0:g.data)&&(0,i.jsx)(h.Z,{active:t,handleJump:e=>{v(e)},length:e.length,step:8})})]})]})})}):(0,i.jsx)("h3",{className:"text-center",children:"Hiện chưa c\xf3 đơn h\xe0ng m\xe0 bạn muốn t\xecm."})]})}},9690:function(e,n,t){"use strict";t.d(n,{Z:function(){return l}});var i=t(7437);t(2265);var r=t(8411);function l(e){let{length:n,active:t,handleJump:l,step:d=8}=e,s=[];for(let e=1;e<=n/d+1;e++)s.push((0,i.jsx)(r.Z.Item,{defaultValue:t,onClick:()=>l(e),activeLabel:"",active:e===t,children:e},e));return(0,i.jsx)(r.Z,{size:"sm",children:s})}},995:function(e,n,t){"use strict";var i=t(7437),r=t(8366),l=t.n(r);n.Z=function(e){let{isLoading:n}=e;return n&&(0,i.jsx)("div",{style:{background:"#000",opacity:".5",position:"fixed",width:"100%",height:"100%",top:0,left:0,zIndex:1e6,display:"flex",justifyContent:"center",alignItems:"center"},children:(0,i.jsx)(l(),{style:{zIndex:1e3},color:"white",loading:n,size:50})})}},4021:function(e,n,t){"use strict";t.d(n,{Zj:function(){return i.Z},GP:function(){return r},DF:function(){return l}});var i=t(1365);let r={PENDING:"Chờ ph\xea duyệt",ACCEPTED:"Đ\xe3 ph\xea duyệt",CANCELED:"Đ\xe3 hủy",REJECT:"Đ\xe3 đ\xf3ng ph\xea duyệt"},l={PENDING:"ORDER_PENDING",ACCEPTED:"ORDER_ACCEPTED",CANCELED:"ORDER_CANCELED",REJECT:"ORDER_REJECT"}},1365:function(e,n,t){"use strict";t.d(n,{Z:function(){return i},A:function(){return r}});let i={HOME:"/",CART:"/cart",SHOP:"/shop",SHOP_DETAIL:"/shop-detail",POST_DETAIL:"/post-detail",LOGIN:"/login",ORDER:"/order",REGISTER:"/register",DASHBOARD:"/dashboard",DASHBOARD_PRODUCT:"/dashboard/product",DASHBOARD_ORDER:"/dashboard/order",DASHBOARD_CATEGORIES:"/dashboard/categories",DASHBOARD_POST:"/dashboard/post"},r={HOME:"Trang chủ",CART:"Giỏ h\xe0ng",SHOP:"Mua sắm"}},6300:function(e,n,t){"use strict";t.d(n,{x:function(){return r}});var i=t(4859);let r=e=>i.format(e,{code:"VND"})},9130:function(e,n,t){"use strict";t.d(n,{O:function(){return a}});var i=t(9077),r=t(6778),l=t(145),d=t(2146);let s=async e=>{let{id:n,data:t}=e;return await r.p7.put("/order/".concat(n),t,{headers:{Authorization:"Bearer ".concat((0,r.$c)(r.B$.ACCESS_TOKEN))}})},a=()=>{let e=(0,i.useQueryClient)();return(0,i.useMutation)(s,{onSuccess(n){let{data:t}=n,i=(0,l.xE)(),r=(0,d.y)();e.setQueriesData(i,e=>{var n,i;let r=null==e?void 0:null===(i=e.data)||void 0===i?void 0:null===(n=i.order)||void 0===n?void 0:n.filter(e=>(null==e?void 0:e.id)!=(null==t?void 0:t.id));return e.data.order=r,e}),console.log(t),e.setQueriesData(r,e=>{var n;let i=null==e?void 0:null===(n=e.data)||void 0===n?void 0:n.map(e=>(null==e?void 0:e.id)==(null==t?void 0:t.id)?t:e);return e.data=i,e})}})}},145:function(e,n,t){"use strict";t.d(n,{TC:function(){return E},U6:function(){return f},be:function(){return c},xE:function(){return d},L_:function(){return m},tn:function(){return C},Yi:function(){return p},cO:function(){return v},iu:function(){return u},rj:function(){return s}});var i=t(9077),r=t(6778);let l=async()=>await r.p7.get("/auth/check-is-login",{headers:{Authorization:"Bearer ".concat((0,r.$c)(r.B$.ACCESS_TOKEN))}}),d=()=>["is-user-logined"],s=()=>(0,i.useQuery)({queryKey:d(),queryFn:l,refetchOnWindowFocus:!1}),a=async()=>await r.p7.get("/product"),c=()=>["get-products"],u=()=>(0,i.useQuery)({queryKey:c(),queryFn:a,refetchOnWindowFocus:!1,cacheTime:432e5,staleTime:432e5}),o=async e=>{let{id:n}=e;return await r.p7.get("/product/".concat(n))},h=e=>["get-product",e],v=e=>{let{id:n}=e;return(0,i.useQuery)({queryFn:()=>o({id:n}),queryKey:h(n),refetchOnWindowFocus:!1,cacheTime:432e5,staleTime:432e5})},g=async()=>await r.p7.get("/categories"),E=()=>["get-categories"],m=()=>(0,i.useQuery)({queryKey:E(),queryFn:g,refetchOnWindowFocus:!1,cacheTime:432e5,staleTime:432e5}),x=async()=>await r.p7.get("/posts"),f=()=>["get-posts"],p=()=>(0,i.useQuery)({queryKey:f(),queryFn:x,refetchOnWindowFocus:!1,cacheTime:432e5,staleTime:432e5}),y=async e=>{let{id:n}=e;return await r.p7.get("/posts/".concat(n))},D=e=>["get-post",e],C=e=>{let{id:n}=e;return(0,i.useQuery)({queryFn:()=>y({id:n}),queryKey:D(n),refetchOnWindowFocus:!1,cacheTime:432e5,staleTime:432e5})}},2146:function(e,n,t){"use strict";t.d(n,{Y:function(){return s},y:function(){return d}});var i=t(9077),r=t(6778);let l=async()=>await r.p7.get("/order"),d=()=>["get-orders"],s=()=>(0,i.useQuery)({queryKey:d(),queryFn:l,refetchOnWindowFocus:!1,cacheTime:432e5,staleTime:432e5})}},function(e){e.O(0,[1201,4859,4224,7227,3538,2971,4938,1744],function(){return e(e.s=1899)}),_N_E=e.O()}]);