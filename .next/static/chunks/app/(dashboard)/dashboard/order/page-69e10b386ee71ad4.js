(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[425],{1899:function(e,n,t){Promise.resolve().then(t.bind(t,4496))},4496:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return d}});var r=t(7437),i=t(2265),l=t(4021),u=t(3797),c=t(6300),a=t(2146),o=t(9317),s=t(9130);function d(){let[e,n]=(0,i.useState)([]),{data:t}=(0,a.Y)(),{mutateAsync:d}=(0,s.O)(),h=(e,n)=>{d({id:e,data:{statusId:n}})};return(0,i.useEffect)(()=>{(null==t?void 0:t.data)&&n(null==t?void 0:t.data)},[null==t?void 0:t.data]),(0,r.jsxs)("div",{className:"content-wrapper",children:[(0,r.jsx)("div",{className:"col-2 mb-3",children:(0,r.jsxs)("div",{className:"",children:[(0,r.jsx)("label",{htmlFor:"",className:"form-label",children:"Lọc đơn h\xe0ng"}),(0,r.jsxs)("select",{onChange:e=>{let{value:r}=e.target;r?n([...null==t?void 0:t.data].filter(e=>{var n;return(null==e?void 0:null===(n=e.status)||void 0===n?void 0:n.name)===r})):n(null==t?void 0:t.data)},className:"form-select  form-select-sm p-2 border-0",children:[(0,r.jsx)("option",{value:"",selected:!0,children:"Tất cả đơn h\xe0ng"}),(0,r.jsx)("option",{value:l.DF.ACCEPTED,children:"Đơn h\xe0ng đ\xe3 duyệt"}),(0,r.jsx)("option",{value:l.DF.PENDING,children:"Đơn h\xe0ng chờ ph\xea duyệt"}),(0,r.jsx)("option",{value:l.DF.CANCELED,children:"Đơn h\xe0ng đ\xe3 hủy"}),(0,r.jsx)("option",{value:l.DF.REJECT,children:"Đơn h\xe0ng đ\xf3ng ph\xea duyệt"})]})]})}),e.length>0?(0,r.jsx)("div",{className:"col-12 grid-margin",children:(0,r.jsx)("div",{className:"card",children:(0,r.jsxs)("div",{className:"card-body",children:[(0,r.jsx)("h4",{className:"card-title",children:"Danh s\xe1ch đặt h\xe0ng"}),(0,r.jsx)("div",{className:"table-responsive",children:(0,r.jsxs)("table",{className:"table",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{children:" T\xean h\xe0ng "}),(0,r.jsx)("th",{children:" Ng\xe0y đặt "}),(0,r.jsx)("th",{children:" Người đặt"}),(0,r.jsx)("th",{children:" Số lượng"}),(0,r.jsx)("th",{children:" Trạng th\xe1i đặt h\xe0ng"}),(0,r.jsx)("th",{children:" Gi\xe1"}),(0,r.jsx)("th",{children:" Tổng số tiền "})]})}),(0,r.jsx)("tbody",{children:e.map(e=>{var n,t,i,a,s,d,v,E,g,f,C,m,D,x,N,p,y,j;return(0,r.jsxs)("tr",{className:"cursor-pointer",children:[(0,r.jsx)("td",{children:null==e?void 0:null===(t=e.cart)||void 0===t?void 0:null===(n=t.product)||void 0===n?void 0:n.name}),(0,r.jsxs)("td",{children:[" ",(0,u.Bi)(null==e?void 0:e.createdAt)]}),(0,r.jsx)("td",{children:null==e?void 0:null===(i=e.account)||void 0===i?void 0:i.fullName}),(0,r.jsxs)("td",{children:[" ",null==e?void 0:null===(a=e.cart)||void 0===a?void 0:a.quantity]}),(0,r.jsx)("td",{children:(0,r.jsx)(o.ZP,{trigger:"click",placement:"right-start",theme:"light",interactive:!0,content:(null==e?void 0:null===(s=e.status)||void 0===s?void 0:s.name)!==l.DF.CANCELED?(0,r.jsxs)("div",{className:"d-flex flex-column",children:[(null==e?void 0:null===(d=e.status)||void 0===d?void 0:d.name)===l.DF.PENDING?(0,r.jsx)("div",{onClick:()=>h(null==e?void 0:e.id,7),className:"badge badge-gradient-success text-center cursor-pointer",children:"Ph\xea duyệt"}):(0,r.jsx)("div",{onClick:()=>h(null==e?void 0:e.id,1),className:"badge badge-gradient-info text-center cursor-pointer",children:"Thu hồi ph\xea duyệt"}),(null==e?void 0:null===(v=e.status)||void 0===v?void 0:v.name)!==l.DF.REJECT&&(0,r.jsx)("div",{onClick:()=>h(null==e?void 0:e.id,2),className:"badge badge-gradient-danger text-center cursor-pointer mt-2",children:"Từ chối"})]}):(0,r.jsx)("div",{onClick:()=>h(null==e?void 0:e.id,1),className:"badge badge-gradient-danger text-center cursor-pointer",children:"K\xedch hoạt đơn h\xe0ng"}),zIndex:2,allowHTML:!0,arrow:!1,children:(0,r.jsx)("label",{className:"cursor-pointer badge badge-gradient-".concat((null==e?void 0:null===(E=e.status)||void 0===E?void 0:E.name)===l.DF.PENDING?"success":(null==e?void 0:null===(g=e.status)||void 0===g?void 0:g.name)===l.DF.CANCELED?"danger":(null==e?void 0:null===(f=e.status)||void 0===f?void 0:f.name)===l.DF.REJECT?"primary":"warning"),children:(null==e?void 0:null===(C=e.status)||void 0===C?void 0:C.name)===l.DF.PENDING?l.GP.PENDING:(null==e?void 0:null===(m=e.status)||void 0===m?void 0:m.name)===l.DF.CANCELED?l.GP.CANCELED:(null==e?void 0:null===(D=e.status)||void 0===D?void 0:D.name)===l.DF.REJECT?l.GP.REJECT:l.GP.ACCEPTED})})}),(0,r.jsx)("td",{children:(0,c.x)(null==e?void 0:null===(N=e.cart)||void 0===N?void 0:null===(x=N.product)||void 0===x?void 0:x.price)}),(0,r.jsx)("td",{children:(0,c.x)((null==e?void 0:null===(y=e.cart)||void 0===y?void 0:null===(p=y.product)||void 0===p?void 0:p.price)*(null==e?void 0:null===(j=e.cart)||void 0===j?void 0:j.quantity))})]})})})]})})]})})}):(0,r.jsx)("h3",{className:"text-center",children:"Hiện chưa c\xf3 đơn h\xe0ng m\xe0 bạn muốn t\xecm."})]})}},4021:function(e,n,t){"use strict";t.d(n,{Zj:function(){return r.Z},GP:function(){return i},DF:function(){return l}});var r=t(1365);let i={PENDING:"Chờ ph\xea duyệt",ACCEPTED:"Đ\xe3 ph\xea duyệt",CANCELED:"Đ\xe3 hủy",REJECT:"Đ\xe3 đ\xf3ng ph\xea duyệt"},l={PENDING:"ORDER_PENDING",ACCEPTED:"ORDER_ACCEPTED",CANCELED:"ORDER_CANCELED",REJECT:"ORDER_REJECT"}},1365:function(e,n,t){"use strict";t.d(n,{Z:function(){return r},A:function(){return i}});let r={HOME:"/",CART:"/cart",SHOP:"/shop",LOGIN:"/login",ORDER:"/order",REGISTER:"/register",DASHBOARD:"/dashboard",DASHBOARD_PRODUCT:"/dashboard/product",DASHBOARD_ORDER:"/dashboard/order"},i={HOME:"Trang chủ",CART:"Giỏ h\xe0ng",SHOP:"Mua sắm"}},1362:function(e,n,t){"use strict";t.d(n,{$c:function(){return u},B$:function(){return i},EU:function(){return l},UK:function(){return c}});var r=t(7713);let i={ACCESS_TOKEN:"access_token"},l=(e,n,t)=>(0,r.setCookie)(e,n,{expires:new Date(new Date().getTime()+6048e5)}),u=e=>(0,r.getCookie)(e),c=e=>(0,r.deleteCookie)(e)},6300:function(e,n,t){"use strict";t.d(n,{x:function(){return i}});var r=t(4859);let i=e=>r.format(e,{code:"VND"})},3797:function(e,n,t){"use strict";t.d(n,{B$:function(){return r.B$},Bi:function(){return a},$c:function(){return r.$c},Cg:function(){return c}});var r=t(1362),i=t(2265),l=t(9077);(0,i.cache)(()=>new l.QueryClient),t(8526);var u=t(7182);let c=(e,n)=>{var t;return(null==e?void 0:null===(t=e.response)||void 0===t?void 0:t.status)===401?(0,u.Dd)(n,{status:"error"}):(0,u.Dd)("Cửa h\xe0ng đang bận, vui l\xf2ng trở lại sau \xedt ph\xfat nữa",{status:"error"})},a=e=>{let n=new Date(e);return null==n?void 0:n.toLocaleDateString("en-GB")}},7182:function(e,n,t){"use strict";t.d(n,{B$:function(){return a.B$},p7:function(){return c},UK:function(){return a.UK},$c:function(){return a.$c},EU:function(){return a.EU},Dd:function(){return i}});var r=t(171);let i=(e,n)=>(0,r.toast)(e,{progressStyle:{background:(null==n?void 0:n.status)==="success"?"var(--bs-primary)":(null==n?void 0:n.status)==="error"?"var(--bs-danger)":(null==n?void 0:n.status)==="warning"?"var(--bs-warning)":"var(--bs-info)"},autoClose:2e3,bodyStyle:{fontSize:16,fontWeight:500}});var l=t(2173),u=t(3797);console.log(!0);let c=l.Z.create({baseURL:"https://maytinhthunguyen.com/api"});l.Z.defaults.withCredentials=!0,c.defaults.headers.common.Authorization="Bearer ".concat((0,u.$c)(u.B$.ACCESS_TOKEN)),l.Z.interceptors.request.use(function(e){return e.headers.Authorization="Bearer ".concat((0,u.$c)(u.B$.ACCESS_TOKEN)),e.headers["Content-Type"]="application/json",e},function(e){return console.log(e),Promise.reject(e)});var a=t(1362)},9130:function(e,n,t){"use strict";t.d(n,{O:function(){return a}});var r=t(9077),i=t(7182),l=t(3647),u=t(2146);let c=async e=>{let{id:n,data:t}=e;return await i.p7.put("/order/".concat(n),t,{headers:{Authorization:"Bearer ".concat((0,i.$c)(i.B$.ACCESS_TOKEN))}})},a=()=>{let e=(0,r.useQueryClient)();return(0,r.useMutation)(c,{onSuccess(n){let{data:t}=n,r=(0,l.xE)(),i=(0,u.y)();e.refetchQueries({queryKey:r}),e.refetchQueries({queryKey:i})}})}},3647:function(e,n,t){"use strict";t.d(n,{be:function(){return o},xE:function(){return u},iu:function(){return s},rj:function(){return c}});var r=t(9077),i=t(7182);let l=async()=>await i.p7.get("/auth/check-is-login",{headers:{Authorization:"Bearer ".concat((0,i.$c)(i.B$.ACCESS_TOKEN))}}),u=()=>["is-user-logined"],c=()=>(0,r.useQuery)({queryKey:u(),queryFn:l,staleTime:0,cacheTime:0,refetchIntervalInBackground:!0,refetchOnReconnect:!0}),a=async()=>await i.p7.get("/product"),o=()=>["get-products"],s=()=>(0,r.useQuery)({queryKey:o(),queryFn:a,staleTime:5e3,cacheTime:5e3})},2146:function(e,n,t){"use strict";t.d(n,{Y:function(){return c},y:function(){return u}});var r=t(9077),i=t(7182);let l=async()=>await i.p7.get("/order"),u=()=>["get-orders"],c=()=>(0,r.useQuery)({queryKey:u(),queryFn:l,staleTime:5e3,cacheTime:5e3})}},function(e){e.O(0,[366,180,471,859,317,526,971,938,744],function(){return e(e.s=1899)}),_N_E=e.O()}]);