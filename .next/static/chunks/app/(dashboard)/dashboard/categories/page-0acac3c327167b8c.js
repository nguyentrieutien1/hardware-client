(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5312],{5242:function(e,t,n){Promise.resolve().then(n.bind(n,6126))},2813:function(e,t,n){"use strict";n.d(t,{l:function(){return i}});var a=n(7437),s=n(6716),r=n(9609);function i(e){let{modalIsOpen:t,closeModal:n,title:i,content:c,onConfirm:u,size:l}=e;return(0,a.jsx)(a.Fragment,{children:l?(0,a.jsxs)(r.Z,{size:l,backdrop:"static",show:t,onHide:()=>n(),children:[(0,a.jsx)(r.Z.Header,{closeButton:!1,children:(0,a.jsx)(r.Z.Title,{children:i})}),(0,a.jsx)(r.Z.Body,{children:c}),(0,a.jsxs)(r.Z.Footer,{children:[(0,a.jsx)(s.Z,{className:"p-2",variant:"secondary",onClick:()=>n(),children:"Đ\xf3ng"}),(0,a.jsx)(s.Z,{className:"p-2",variant:"success",onClick:()=>u(),children:"X\xe1c nhận"})]})]}):(0,a.jsxs)(r.Z,{backdrop:"static",show:t,onHide:()=>n(),children:[(0,a.jsx)(r.Z.Header,{closeButton:!1,children:(0,a.jsx)(r.Z.Title,{children:i})}),(0,a.jsx)(r.Z.Body,{children:c}),(0,a.jsxs)(r.Z.Footer,{children:[(0,a.jsx)(s.Z,{className:"p-2",size:"sm",variant:"secondary",onClick:()=>n(),children:"Đ\xf3ng"}),(0,a.jsx)(s.Z,{className:"p-2",size:"sm",variant:"success",onClick:()=>u(),children:"X\xe1c nhận"})]})]})})}},6126:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return h}});var a=n(7437),s=n(2265),r=n(2813),i=n(145),c=n(6778),u=n(553),l=n(3538),o=n(995),d=n(9690);function h(){let[e,t]=(0,s.useState)(!1),[n,h]=(0,s.useState)(!1),[m,p]=(0,s.useState)(!1),[v,y]=(0,s.useState)([]),[x,f]=(0,s.useState)(),[j,g]=(0,s.useState)({name:""}),[C,N]=(0,s.useState)(1),{data:S,isLoading:b}=(0,i.L_)(),{mutateAsync:w,isLoading:T}=(0,u.nS)(),{mutateAsync:E,isLoading:B}=(0,u.h5)(),{mutateAsync:A,isLoading:Q}=(0,u.P7)(),O=null==S?void 0:S.data,Z=()=>{g({name:""})},$=()=>{try{for(let e in j)if(Object.prototype.hasOwnProperty.call(j,e)&&!j[e]){(0,c.Dd)("T\xean danh mục kh\xf4ng được trống.");return}m?A({data:j,id:x}).then(()=>{f(null),t(!1),Z(),p(!1),(0,c.Dd)("Cập nhật danh mục th\xe0nh c\xf4ng",{status:"success"})}):w(j).then(()=>{t(!1),Z(),(0,c.Dd)("Tạo danh mục th\xe0nh c\xf4ng",{status:"success"})})}catch(e){(0,c.Dd)("Thao t\xe1c với danh mục thất bại, quay lại sau 5 ph\xfat nữa",{status:"error"})}},F=()=>{try{E({id:x}).then(()=>{h(!1),f(null),(0,c.Dd)("X\xf3a danh mục th\xe0nh c\xf4ng",{status:"success"})})}catch(e){(0,c.Dd)("X\xf3a danh mục thất bại, quay lại sau 5 ph\xfat nữa",{status:"error"})}};return(0,s.useEffect)(()=>{O&&y([...O])},[O,null==O?void 0:O.length]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o.Z,{isLoading:T||b||B||Q}),e&&(0,a.jsx)(r.l,{title:m?"Cập nhật danh mục":"Th\xeam danh mục",onConfirm:()=>$(),closeModal:()=>{t(!1),Z(),p(!1)},modalIsOpen:e,content:(0,a.jsx)("div",{className:"col-12",children:(0,a.jsx)("div",{className:"card",children:(0,a.jsx)("div",{className:"card-body",children:(0,a.jsx)("form",{className:"forms-sample",children:(0,a.jsx)("div",{className:"row",children:(0,a.jsx)("div",{className:"col-lg-12 col-sm-12",children:(0,a.jsxs)("div",{className:"form-group",children:[(0,a.jsx)("label",{htmlFor:"exampleInputName1",children:"T\xean danh mục"}),(0,a.jsx)("input",{onChange:e=>{let{name:t,value:n}=e.target;g({[t]:n})},type:"text",className:"form-control",id:"exampleInputName1",placeholder:"T\xean danh mục",name:"name",value:null==j?void 0:j.name})]})})})})})})})}),n&&(0,a.jsx)(r.l,{title:"X\xf3a danh mục",content:(0,a.jsx)("p",{children:"Bạn c\xf3 muốn x\xf3a danh mục kh\xf4ng ?"}),closeModal:()=>h(!1),modalIsOpen:n,onConfirm:()=>F()}),(0,a.jsx)(o.Z,{isLoading:!1}),(0,a.jsx)("div",{className:"row content-wrapper",children:(0,a.jsxs)("div",{className:"col-12 ",children:[(0,a.jsx)("div",{className:"row mb-2 justify-content-between d-flex ",children:(0,a.jsx)("div",{className:"col-2 ",children:(0,a.jsx)("div",{className:"d-grid gap-2",children:(0,a.jsx)("button",{onClick:()=>t(!0),type:"button",className:"btn btn-success p-2",children:"+ Th\xeam danh mục"})})})}),(0,a.jsx)("div",{className:"card",children:(0,a.jsxs)("div",{className:"card-body",children:[(0,a.jsx)("h4",{className:"card-title",children:"Danh s\xe1ch danh mục sản phẩm"}),(0,a.jsxs)("div",{className:"table-responsive",children:[(0,a.jsxs)("table",{className:"table",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{children:" ID "}),(0,a.jsx)("th",{children:" T\xean "}),(0,a.jsx)("th",{children:" Ng\xe0y tạo"}),(0,a.jsx)("th",{children:" Ng\xe0y cập nhật "}),(0,a.jsx)("th",{children:"X\xf3a/Cập nhật"})]})}),(0,a.jsx)("tbody",{children:null==v?void 0:v.map(e=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{children:null==e?void 0:e.id}),(0,a.jsx)("td",{children:null==e?void 0:e.name}),(0,a.jsx)("td",{className:"w-25 cursor-pointer",children:(0,l.Bi)(null==e?void 0:e.createdAt)}),(0,a.jsxs)("td",{children:[(0,l.Bi)(null==e?void 0:e.updateAt)," "]}),(0,a.jsxs)("td",{children:[(0,a.jsx)("button",{onClick:()=>{h(!0),f(null==e?void 0:e.id)},type:"button",className:"btn btn-danger btn-sm",children:"X\xf3a"}),(0,a.jsx)("button",{onClick:()=>{p(!0),t(!0),g({name:null==e?void 0:e.name}),f(null==e?void 0:e.id)},type:"button",className:"btn btn-success btn-sm m-lg-1",children:"Cập nhật"})]})]}))})]}),(0,a.jsx)("div",{className:"d-flex justify-content-end mt-4",children:O&&(0,a.jsx)(d.Z,{active:C,handleJump:e=>{N(e)},length:v.length,step:8})})]})]})})]})})]})}},9690:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});var a=n(7437);n(2265);var s=n(8411);function r(e){let{length:t,active:n,handleJump:r,step:i=8}=e,c=[];for(let e=1;e<=t/i+1;e++)c.push((0,a.jsx)(s.Z.Item,{defaultValue:n,onClick:()=>r(e),activeLabel:"",active:e===n,children:e},e));return(0,a.jsx)(s.Z,{size:"sm",children:c})}},995:function(e,t,n){"use strict";var a=n(7437),s=n(8366),r=n.n(s);t.Z=function(e){let{isLoading:t}=e;return t&&(0,a.jsx)("div",{style:{background:"#000",opacity:".5",position:"fixed",width:"100%",height:"100%",top:0,left:0,zIndex:1e6,display:"flex",justifyContent:"center",alignItems:"center"},children:(0,a.jsx)(r(),{style:{zIndex:1e3},color:"white",loading:t,size:50})})}},553:function(e,t,n){"use strict";n.d(t,{Zz:function(){return i},FZ:function(){return u},nS:function(){return C},u3:function(){return E},qX:function(){return v},vF:function(){return m},h5:function(){return S},xq:function(){return j},P7:function(){return w},wE:function(){return x},Y$:function(){return d}});var a=n(9077),s=n(6778);let r=async e=>await s.p7.post("/auth/login",e),i=()=>(0,a.useMutation)(r),c=async e=>await s.p7.post("/auth/register",e),u=()=>(0,a.useMutation)(c);var l=n(145);let o=async e=>{let{id:t,data:n}=e;return await s.p7.put("/cart/".concat(t),n,{headers:{Authorization:"Bearer ".concat((0,s.$c)(s.B$.ACCESS_TOKEN))}})},d=()=>{let e=(0,a.useQueryClient)();return(0,a.useMutation)(o,{onSuccess(t){let{data:n}=t,a=(0,l.xE)();e.setQueriesData(a,e=>{var t,a;let s=null==e?void 0:null===(a=e.data)||void 0===a?void 0:null===(t=a.cart)||void 0===t?void 0:t.map(e=>(null==e?void 0:e.id)===(null==n?void 0:n.id)?n:e);return e.data.cart=s,e})}})},h=async e=>{let{id:t}=e;return await s.p7.delete("/cart/".concat(t),{headers:{Authorization:"Bearer ".concat((0,s.$c)(s.B$.ACCESS_TOKEN))}})},m=()=>{let e=(0,a.useQueryClient)();return(0,a.useMutation)(h,{onSuccess(t){let{data:n}=t,a=(0,l.xE)();e.setQueriesData(a,e=>{var t,a;let s=null==e?void 0:null===(a=e.data)||void 0===a?void 0:null===(t=a.cart)||void 0===t?void 0:t.filter(e=>(null==e?void 0:e.id)!=(null==n?void 0:n.id));return e.data.cart=s,e})}})},p=async e=>await s.p7.post("/product",e,{headers:{Authorization:"Bearer ".concat((0,s.$c)(s.B$.ACCESS_TOKEN))}}),v=()=>{let e=(0,a.useQueryClient)();return(0,a.useMutation)(p,{onSuccess(t){let{data:n}=t,a=(0,l.be)();e.setQueriesData(a,e=>(e.data.unshift(n),{...e}))}})},y=async e=>await s.p7.put("/product/".concat(e.id),e,{headers:{Authorization:"Bearer ".concat((0,s.$c)(s.B$.ACCESS_TOKEN))}}),x=()=>{let e=(0,a.useQueryClient)();return(0,a.useMutation)(y,{onSuccess(t){let{data:n}=t,a=(0,l.be)();e.setQueriesData(a,e=>{let t=e.data.map(e=>(null==e?void 0:e.id)==(null==n?void 0:n.id)?n:e);return e.data=t,{...e}})}})},f=async e=>await s.p7.delete("/product/".concat(e.id),{headers:{Authorization:"Bearer ".concat((0,s.$c)(s.B$.ACCESS_TOKEN))}}),j=()=>{let e=(0,a.useQueryClient)();return(0,a.useMutation)(f,{onSuccess(t){let{data:n}=t,a=(0,l.be)();e.setQueriesData(a,e=>{var t;let a=null===(t=e.data)||void 0===t?void 0:t.filter(e=>(null==e?void 0:e.id)!=(null==n?void 0:n.id));return e.data=a,{...e}})}})},g=async e=>await s.p7.post("/categories",e,{headers:{Authorization:"Bearer ".concat((0,s.$c)(s.B$.ACCESS_TOKEN))}}),C=()=>{let e=(0,a.useQueryClient)();return(0,a.useMutation)(g,{onSuccess(t){let{data:n}=t,a=(0,l.TC)();e.setQueriesData(a,e=>{var t;return null==e||null===(t=e.data)||void 0===t||t.unshift(n),e})}})},N=async e=>{let{id:t}=e;return await s.p7.delete("/categories/".concat(t),{headers:{Authorization:"Bearer ".concat((0,s.$c)(s.B$.ACCESS_TOKEN))}})},S=()=>{let e=(0,a.useQueryClient)();return(0,a.useMutation)(N,{onSuccess(t){let{data:n}=t,a=(0,l.TC)();e.setQueriesData(a,e=>{var t,a;let s=null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.findIndex(e=>e.id==(null==n?void 0:n.id));return null==e||null===(a=e.data)||void 0===a||a.splice(s,1),e})}})},b=async e=>{let{id:t,data:n}=e;return await s.p7.put("/categories/".concat(t),n,{headers:{Authorization:"Bearer ".concat((0,s.$c)(s.B$.ACCESS_TOKEN))}})},w=()=>{let e=(0,a.useQueryClient)();return(0,a.useMutation)(b,{onSuccess(t){let{data:n}=t,a=(0,l.TC)();e.setQueriesData(a,e=>{let t=null==e?void 0:e.data.map(e=>e.id==(null==n?void 0:n.id)?n:e);return e.data=[...t],e})}})},T=async e=>await s.p7.post("/posts",e,{headers:{Authorization:"Bearer ".concat((0,s.$c)(s.B$.ACCESS_TOKEN))}}),E=()=>{let e=(0,a.useQueryClient)();return(0,a.useMutation)(T,{onSuccess(t){let{data:n}=t,a=(0,l.U6)();e.setQueriesData(a,e=>(e.data.unshift(n),{...e}))}})}},145:function(e,t,n){"use strict";n.d(t,{TC:function(){return v},U6:function(){return f},be:function(){return l},xE:function(){return i},L_:function(){return y},tn:function(){return N},Yi:function(){return j},cO:function(){return m},iu:function(){return o},rj:function(){return c}});var a=n(9077),s=n(6778);let r=async()=>await s.p7.get("/auth/check-is-login",{headers:{Authorization:"Bearer ".concat((0,s.$c)(s.B$.ACCESS_TOKEN))}}),i=()=>["is-user-logined"],c=()=>(0,a.useQuery)({queryKey:i(),queryFn:r,refetchOnWindowFocus:!1}),u=async()=>await s.p7.get("/product"),l=()=>["get-products"],o=()=>(0,a.useQuery)({queryKey:l(),queryFn:u,refetchOnWindowFocus:!1,cacheTime:432e5,staleTime:432e5}),d=async e=>{let{id:t}=e;return await s.p7.get("/product/".concat(t))},h=e=>["get-product",e],m=e=>{let{id:t}=e;return(0,a.useQuery)({queryFn:()=>d({id:t}),queryKey:h(t),refetchOnWindowFocus:!1,cacheTime:432e5,staleTime:432e5})},p=async()=>await s.p7.get("/categories"),v=()=>["get-categories"],y=()=>(0,a.useQuery)({queryKey:v(),queryFn:p,refetchOnWindowFocus:!1,cacheTime:432e5,staleTime:432e5}),x=async()=>await s.p7.get("/posts"),f=()=>["get-posts"],j=()=>(0,a.useQuery)({queryKey:f(),queryFn:x,refetchOnWindowFocus:!1,cacheTime:432e5,staleTime:432e5}),g=async e=>{let{id:t}=e;return await s.p7.get("/posts/".concat(t))},C=e=>["get-post",e],N=e=>{let{id:t}=e;return(0,a.useQuery)({queryFn:()=>g({id:t}),queryKey:C(t),refetchOnWindowFocus:!1,cacheTime:432e5,staleTime:432e5})}}},function(e){e.O(0,[1201,7640,5078,1149,3538,2971,4938,1744],function(){return e(e.s=5242)}),_N_E=e.O()}]);