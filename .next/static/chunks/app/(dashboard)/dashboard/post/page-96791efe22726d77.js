(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8454],{6334:function(e,t,n){Promise.resolve().then(n.bind(n,2372))},2813:function(e,t,n){"use strict";n.d(t,{l:function(){return l}});var s=n(7437),a=n(6716),i=n(9609);function l(e){let{modalIsOpen:t,closeModal:n,title:l,content:r,onConfirm:c,size:u}=e;return(0,s.jsx)(s.Fragment,{children:u?(0,s.jsxs)(i.Z,{size:u,backdrop:"static",show:t,onHide:()=>n(),children:[(0,s.jsx)(i.Z.Header,{closeButton:!1,children:(0,s.jsx)(i.Z.Title,{children:l})}),(0,s.jsx)(i.Z.Body,{children:r}),(0,s.jsxs)(i.Z.Footer,{children:[(0,s.jsx)(a.Z,{className:"p-2",variant:"secondary",onClick:()=>n(),children:"Đ\xf3ng"}),(0,s.jsx)(a.Z,{className:"p-2",variant:"success",onClick:()=>c(),children:"X\xe1c nhận"})]})]}):(0,s.jsxs)(i.Z,{backdrop:"static",show:t,onHide:()=>n(),children:[(0,s.jsx)(i.Z.Header,{closeButton:!1,children:(0,s.jsx)(i.Z.Title,{children:l})}),(0,s.jsx)(i.Z.Body,{children:r}),(0,s.jsxs)(i.Z.Footer,{children:[(0,s.jsx)(a.Z,{className:"p-2",size:"sm",variant:"secondary",onClick:()=>n(),children:"Đ\xf3ng"}),(0,s.jsx)(a.Z,{className:"p-2",size:"sm",variant:"success",onClick:()=>c(),children:"X\xe1c nhận"})]})]})})}},2372:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return g}});var s=n(7437),a=n(2265),i=n(2813),l=n(145),r=n(6778),c=n(5182),u=n(5343),o=n.n(u),d=n(553),h=n(3538),m=n(4224),v=n(995);n(4281);var p=n(9077);let x=async e=>{let{id:t}=e;return await r.p7.delete("/posts/".concat(t),{headers:{Authorization:"Bearer ".concat((0,r.$c)(r.B$.ACCESS_TOKEN))}})},j=()=>{let e=(0,p.useQueryClient)();return(0,p.useMutation)(x,{onSuccess(t){let{data:n}=t,s=(0,l.U6)();e.setQueriesData(s,e=>{var t;let s=null===(t=e.data)||void 0===t?void 0:t.filter(e=>(null==e?void 0:e.id)!=(null==n?void 0:n.id));return e.data=s,{...e}})}})},b=async e=>{let{id:t,data:n}=e;return await r.p7.put("/posts/".concat(t),n,{headers:{Authorization:"Bearer ".concat((0,r.$c)(r.B$.ACCESS_TOKEN))}})},f=()=>{let e=(0,p.useQueryClient)();return(0,p.useMutation)(b,{onSuccess(t){let{data:n}=t,s=(0,l.U6)();e.setQueriesData(s,e=>{let t=e.data.map(e=>(null==e?void 0:e.id)==(null==n?void 0:n.id)?n:e);return e.data=t,{...e}})}})};var y=n(9690);function g(){let[e,t]=(0,a.useState)(!1),[n,u]=(0,a.useState)(!1),[p,x]=(0,a.useState)(""),b=(0,a.useRef)(null),[g,N]=(0,a.useState)(!1),[C,S]=(0,a.useState)({title:"",content:""}),[w,T]=(0,a.useState)([]),[E,k]=(0,a.useState)(!1),[B,_]=(0,a.useState)([]),[A,Q]=(0,a.useState)(),[O,$]=(0,a.useState)(null),[F,Z]=(0,a.useState)(1),{data:D,isLoading:z}=(0,l.Yi)(),K=null==D?void 0:D.data,{mutateAsync:M,isLoading:q}=(0,d.u3)(),{mutateAsync:I,isLoading:L}=f(),{mutateAsync:X,isLoading:H}=j(),{data:W}=(0,l.rj)(),{Bold:U,Italic:P,Underline:Y,AlignLeft:R,AlignRight:J,AlignCenter:V,Indent:G,Outdent:ee,OrderedList:et,UnorderedList:en,Undo:es,Redo:ea,Link:ei,Unlink:el,InsertImage:er}=c.EditorTools,ec=()=>{S({title:"",content:""})};(0,a.useEffect)(()=>{let e=document.querySelector(".k-editor-content");e&&(e.nextElementSibling.style.backgroundImage="none")});let eu=()=>{for(let e in C)if(Object.prototype.hasOwnProperty.call(C,e)&&!C[e]){(0,r.Dd)("C\xe1c trường phải đảm bảo kh\xf4ng được trống !");return}if(E)I({id:A,data:{...C,images:w.map(e=>({url:e.data_url}))}}).then(()=>{t(!1),k(!1),ec(),(0,r.Dd)("Cập nhật b\xe0i viết th\xe0nh c\xf4ng !",{status:"success"}),T([])});else{var e;M({...C,accountId:null==W?void 0:null===(e=W.data)||void 0===e?void 0:e.id,images:w}).then(e=>{t(!1),ec(),(0,r.Dd)("Tạo b\xe0i viết th\xe0nh c\xf4ng !",{status:"success"}),T([])}).catch(e=>{(0,h.Cg)(e,"Tạo b\xe0i viết")})}},eo=()=>{try{X({id:A}).then(()=>{ec(),N(!1),Q(null),(0,r.Dd)("X\xf3a b\xe0i viết th\xe0nh c\xf4ng !",{status:"success"})})}catch(e){}};(0,a.useEffect)(()=>{K&&_([...K])},[null==K?void 0:K.length,K]);let ed=()=>{if(b.current){let e=b.current.textContent;navigator.clipboard.writeText(e).then(()=>{(0,r.Dd)("Sao ch\xe9p th\xe0nh c\xf4ng",{status:"success"})}).catch(e=>{console.error("Failed to copy text to clipboard:",e)})}};return(0,s.jsxs)("div",{className:"content-wrapper",children:[n&&(0,s.jsx)(i.l,{closeModal:()=>u(!1),content:(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{ref:b,children:p}),(0,s.jsx)("a",{onClick:()=>ed(),className:"btn btn-success btn-md mt-4",href:"#",role:"button",children:"Sao ch\xe9p nội dung"})]}),onConfirm:()=>{u(!1),$(null)},modalIsOpen:n,title:"Đ\xe2y l\xe0 đường dẫn ảnh"}),e?(0,s.jsx)("div",{className:"card",children:(0,s.jsxs)("div",{className:"card-body",children:[(0,s.jsx)("form",{className:"forms-sample",children:(0,s.jsxs)("div",{className:"row",children:[(0,s.jsxs)("div",{className:"form-group col-lg-4 col-sm-6",children:[(0,s.jsx)("label",{htmlFor:"exampleInputName1",children:"Ti\xeau đề"}),(0,s.jsx)("input",{onChange:e=>{S(t=>({...t,title:e.target.value}))},type:"text",className:"form-control",id:"exampleInputName1",placeholder:"Ti\xeau đề",name:"title",value:C.title})]}),(0,s.jsx)("div",{className:"col-4",children:(0,s.jsxs)("div",{className:"",children:[(0,s.jsx)("label",{htmlFor:"upload",className:"form-label d-block cursor-pointer",children:"Nhấn v\xe0o đ\xe2y để lấy đường dẫn ảnh"}),(0,s.jsx)("input",{onChange:e=>{$(e.target.files[0])},type:"file","aria-describedby":"helpId",placeholder:"",id:"upload",className:"d-block my-2 d-none"}),O&&(0,s.jsx)("a",{onClick:()=>{if(O){let e=new FormData;e.append("upload",O),r.p7.post("/upload",e).then(e=>e.data).then(e=>{x(e),u(!0)}).catch(()=>{(0,r.Dd)("Lỗi file, vui l\xf2ng chọn file ảnh kh\xe1c !",{status:"error"})})}},className:"btn btn-success btn-md",href:"#",role:"button",children:"Lấy đường dẫn"})]})}),(0,s.jsxs)("div",{className:"col-lg-4 col-sm-12",children:[(0,s.jsx)("label",{className:"mb-2",htmlFor:"",children:"H\xecnh ảnh"}),(0,s.jsx)(o(),{multiple:!0,value:w,onChange:e=>{T(e)},maxNumber:69,dataURLKey:"data_url",children:e=>{let{imageList:t,onImageUpload:n,onImageRemoveAll:a,onImageUpdate:i,onImageRemove:l,isDragging:r,dragProps:c}=e;return(0,s.jsxs)("div",{className:"upload__image-wrapper",children:[(0,s.jsx)("button",{className:"btn btn-success btn-sm",type:"button",style:r?{color:"red"}:void 0,onClick:e=>{e.preventDefault(),n()},...c,children:"Nhấn chọn hoặc k\xe9o thả tại đ\xe2y"}),"\xa0",w.length>0&&(0,s.jsx)("button",{className:"btn btn-danger btn-sm",onClick:e=>{e.preventDefault(),a()},children:"X\xf3a tất cả c\xe1 ảnh"}),(0,s.jsx)("div",{className:"my-2 d-flex align-items-center row",children:t.map((e,t)=>(0,s.jsxs)("div",{className:" image-item d-flex flex-column align-items-center justify-content-between col-3 flex-md-wrap",children:[(0,s.jsx)("img",{src:e.data_url,width:"100",className:"rounded",height:"100",style:{objectFit:"cover"}}),(0,s.jsxs)("div",{className:"image-item__btn-wrapper my-2 d-flex align-content-center",children:[(0,s.jsx)("button",{className:"btn btn-sm btn-success mx-1",onClick:e=>{e.preventDefault(),i(t)},children:"Đổi"}),(0,s.jsx)("button",{className:"btn btn-sm btn-warning",onClick:e=>{e.preventDefault(),l(t)},children:"X\xf3a"})]})]},t))})]})}})]}),(0,s.jsx)("div",{className:"col-lg-12 col-sm-12",children:(0,s.jsxs)("div",{className:"",children:[(0,s.jsx)("label",{htmlFor:"exampleTextarea1",children:"M\xf4 tả b\xe0i viết"}),(0,s.jsx)(c.ML,{tools:[[U,P,Y],[es,ea],[er]],defaultContent:C.content,onChange:e=>{S(t=>({...t,content:e.html}))},value:C.content,contentStyle:{height:430,width:"100%"}})]})})]})}),(0,s.jsxs)("div",{className:"d-flex justify-content-end",children:[(0,s.jsx)("a",{onClick:()=>{k(!1),t(!1),ec(),T([])},className:"btn btn-danger btn-md mt-2 align-items",href:"#",role:"button",children:"Đ\xf3ng"}),(0,s.jsx)("a",{onClick:()=>eu(),className:"btn btn-success btn-md mt-2 align-items mx-2",href:"#",role:"button",children:E?"Cập nhật b\xe0i viết":"Tạo b\xe0i viết"})]})]})}):(0,s.jsx)("div",{className:"col-12",children:(0,s.jsx)("div",{className:"row",children:(0,s.jsxs)("div",{className:"col-12 ",children:[(0,s.jsx)("div",{className:"row mb-2 justify-content-between d-flex ",children:(0,s.jsx)("div",{className:"col-2 ",children:(0,s.jsx)("div",{className:"d-grid gap-2",children:(0,s.jsx)("button",{onClick:()=>t(!0),type:"button",className:"btn btn-success p-2",children:"+ Th\xeam b\xe0i viết"})})})}),(0,s.jsx)("div",{className:"card",children:(0,s.jsxs)("div",{className:"card-body",children:[(0,s.jsx)("h4",{className:"card-title",children:"Danh s\xe1ch b\xe0i viết"}),(0,s.jsxs)("div",{className:"table-responsive",children:[(0,s.jsxs)("table",{className:"table",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{children:" Ảnh "}),(0,s.jsx)("th",{children:" Người tạo "}),(0,s.jsx)("th",{children:" Ti\xeau đề "}),(0,s.jsx)("th",{children:" Nội dung "}),(0,s.jsx)("th",{children:" Ng\xe0y tạo "}),(0,s.jsx)("th",{children:"X\xf3a/Cập nhật"})]})}),(0,s.jsx)("tbody",{children:null==B?void 0:B.map(e=>{var n,a,i;return(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:(0,s.jsx)("img",{src:(null==e?void 0:null===(n=e.images)||void 0===n?void 0:n.length)>0&&(null==e?void 0:null===(a=e.images[0])||void 0===a?void 0:a.url),className:"me-1 rounded",alt:""})}),(0,s.jsx)("td",{children:null==e?void 0:null===(i=e.account)||void 0===i?void 0:i.fullName}),(0,s.jsxs)("td",{children:[null==e?void 0:e.title.slice(0,10),"..."]}),(0,s.jsx)("td",{className:"cursor-pointer",children:(0,s.jsx)(m.ZP,{placement:"right",className:"bg-light",trigger:"click",maxWidth:500,allowHTML:!0,arrow:!1,content:(0,s.jsx)("div",{dangerouslySetInnerHTML:{__html:(0,r.Zd)(null==e?void 0:e.content)}}),children:(0,s.jsx)("div",{children:(0,s.jsx)("button",{type:"button",className:"btn btn-success btn-md",children:"Nhấp v\xe0o đ\xe2y để xem chi tiết"})})})}),(0,s.jsx)("td",{children:(0,h.Bi)(null==e?void 0:e.createdAt)}),(0,s.jsxs)("td",{children:[(0,s.jsx)("button",{onClick:()=>{N(!0),Q(null==e?void 0:e.id)},type:"button",className:"btn btn-danger btn-sm",children:"X\xf3a"}),(0,s.jsx)("button",{onClick:()=>{k(!0),t(!0),S({content:null==e?void 0:e.content,title:null==e?void 0:e.title}),Q(null==e?void 0:e.id),T(null==e?void 0:e.images.map(e=>({data_url:e.url})))},type:"button",className:"btn btn-success btn-sm m-lg-1",children:"Cập nhật"})]})]})})})]}),(0,s.jsx)("div",{className:"d-flex justify-content-end mt-4",children:K&&(0,s.jsx)(y.Z,{active:F,handleJump:e=>{Z(e)},length:B.length,step:8})})]})]})})]})})}),g&&(0,s.jsx)(i.l,{title:"X\xf3a b\xe0i viết",content:(0,s.jsx)("p",{children:"Bạn c\xf3 muốn x\xf3a b\xe0i viết n\xe0y kh\xf4ng ?"}),closeModal:()=>N(!1),modalIsOpen:g,onConfirm:()=>eo()}),(0,s.jsx)(v.Z,{isLoading:H||q||L||z})]})}},9690:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var s=n(7437);n(2265);var a=n(8411);function i(e){let{length:t,active:n,handleJump:i,step:l=8}=e,r=[];for(let e=1;e<=t/l+1;e++)r.push((0,s.jsx)(a.Z.Item,{defaultValue:n,onClick:()=>i(e),activeLabel:"",active:e===n,children:e},e));return(0,s.jsx)(a.Z,{size:"sm",children:r})}},995:function(e,t,n){"use strict";var s=n(7437),a=n(8366),i=n.n(a);t.Z=function(e){let{isLoading:t}=e;return t&&(0,s.jsx)("div",{style:{background:"#000",opacity:".5",position:"fixed",width:"100%",height:"100%",top:0,left:0,zIndex:1e6,display:"flex",justifyContent:"center",alignItems:"center"},children:(0,s.jsx)(i(),{style:{zIndex:1e3},color:"white",loading:t,size:50})})}},553:function(e,t,n){"use strict";n.d(t,{Zz:function(){return l},FZ:function(){return c},nS:function(){return g},u3:function(){return E},qX:function(){return p},vF:function(){return m},h5:function(){return C},xq:function(){return f},P7:function(){return w},wE:function(){return j},Y$:function(){return d}});var s=n(9077),a=n(6778);let i=async e=>await a.p7.post("/auth/login",e),l=()=>(0,s.useMutation)(i),r=async e=>await a.p7.post("/auth/register",e),c=()=>(0,s.useMutation)(r);var u=n(145);let o=async e=>{let{id:t,data:n}=e;return await a.p7.put("/cart/".concat(t),n,{headers:{Authorization:"Bearer ".concat((0,a.$c)(a.B$.ACCESS_TOKEN))}})},d=()=>{let e=(0,s.useQueryClient)();return(0,s.useMutation)(o,{onSuccess(t){let{data:n}=t,s=(0,u.xE)();e.setQueriesData(s,e=>{var t,s;let a=null==e?void 0:null===(s=e.data)||void 0===s?void 0:null===(t=s.cart)||void 0===t?void 0:t.map(e=>(null==e?void 0:e.id)===(null==n?void 0:n.id)?n:e);return e.data.cart=a,e})}})},h=async e=>{let{id:t}=e;return await a.p7.delete("/cart/".concat(t),{headers:{Authorization:"Bearer ".concat((0,a.$c)(a.B$.ACCESS_TOKEN))}})},m=()=>{let e=(0,s.useQueryClient)();return(0,s.useMutation)(h,{onSuccess(t){let{data:n}=t,s=(0,u.xE)();e.setQueriesData(s,e=>{var t,s;let a=null==e?void 0:null===(s=e.data)||void 0===s?void 0:null===(t=s.cart)||void 0===t?void 0:t.filter(e=>(null==e?void 0:e.id)!=(null==n?void 0:n.id));return e.data.cart=a,e})}})},v=async e=>await a.p7.post("/product",e,{headers:{Authorization:"Bearer ".concat((0,a.$c)(a.B$.ACCESS_TOKEN))}}),p=()=>{let e=(0,s.useQueryClient)();return(0,s.useMutation)(v,{onSuccess(t){let{data:n}=t,s=(0,u.be)();e.setQueriesData(s,e=>(e.data.unshift(n),{...e}))}})},x=async e=>await a.p7.put("/product/".concat(e.id),e,{headers:{Authorization:"Bearer ".concat((0,a.$c)(a.B$.ACCESS_TOKEN))}}),j=()=>{let e=(0,s.useQueryClient)();return(0,s.useMutation)(x,{onSuccess(t){let{data:n}=t,s=(0,u.be)();e.setQueriesData(s,e=>{let t=e.data.map(e=>(null==e?void 0:e.id)==(null==n?void 0:n.id)?n:e);return e.data=t,{...e}})}})},b=async e=>await a.p7.delete("/product/".concat(e.id),{headers:{Authorization:"Bearer ".concat((0,a.$c)(a.B$.ACCESS_TOKEN))}}),f=()=>{let e=(0,s.useQueryClient)();return(0,s.useMutation)(b,{onSuccess(t){let{data:n}=t,s=(0,u.be)();e.setQueriesData(s,e=>{var t;let s=null===(t=e.data)||void 0===t?void 0:t.filter(e=>(null==e?void 0:e.id)!=(null==n?void 0:n.id));return e.data=s,{...e}})}})},y=async e=>await a.p7.post("/categories",e,{headers:{Authorization:"Bearer ".concat((0,a.$c)(a.B$.ACCESS_TOKEN))}}),g=()=>{let e=(0,s.useQueryClient)();return(0,s.useMutation)(y,{onSuccess(t){let{data:n}=t,s=(0,u.TC)();e.setQueriesData(s,e=>{var t;return null==e||null===(t=e.data)||void 0===t||t.unshift(n),e})}})},N=async e=>{let{id:t}=e;return await a.p7.delete("/categories/".concat(t),{headers:{Authorization:"Bearer ".concat((0,a.$c)(a.B$.ACCESS_TOKEN))}})},C=()=>{let e=(0,s.useQueryClient)();return(0,s.useMutation)(N,{onSuccess(t){let{data:n}=t,s=(0,u.TC)();e.setQueriesData(s,e=>{var t,s;let a=null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.findIndex(e=>e.id==(null==n?void 0:n.id));return null==e||null===(s=e.data)||void 0===s||s.splice(a,1),e})}})},S=async e=>{let{id:t,data:n}=e;return await a.p7.put("/categories/".concat(t),n,{headers:{Authorization:"Bearer ".concat((0,a.$c)(a.B$.ACCESS_TOKEN))}})},w=()=>{let e=(0,s.useQueryClient)();return(0,s.useMutation)(S,{onSuccess(t){let{data:n}=t,s=(0,u.TC)();e.setQueriesData(s,e=>{let t=null==e?void 0:e.data.map(e=>e.id==(null==n?void 0:n.id)?n:e);return e.data=[...t],e})}})},T=async e=>await a.p7.post("/posts",e,{headers:{Authorization:"Bearer ".concat((0,a.$c)(a.B$.ACCESS_TOKEN))}}),E=()=>{let e=(0,s.useQueryClient)();return(0,s.useMutation)(T,{onSuccess(t){let{data:n}=t,s=(0,u.U6)();e.setQueriesData(s,e=>(e.data.unshift(n),{...e}))}})}},145:function(e,t,n){"use strict";n.d(t,{TC:function(){return p},U6:function(){return b},be:function(){return u},xE:function(){return l},L_:function(){return x},tn:function(){return N},Yi:function(){return f},cO:function(){return m},iu:function(){return o},rj:function(){return r}});var s=n(9077),a=n(6778);let i=async()=>await a.p7.get("/auth/check-is-login",{headers:{Authorization:"Bearer ".concat((0,a.$c)(a.B$.ACCESS_TOKEN))}}),l=()=>["is-user-logined"],r=()=>(0,s.useQuery)({queryKey:l(),queryFn:i,refetchOnWindowFocus:!1}),c=async()=>await a.p7.get("/product"),u=()=>["get-products"],o=()=>(0,s.useQuery)({queryKey:u(),queryFn:c,refetchOnWindowFocus:!1,cacheTime:432e5,staleTime:432e5}),d=async e=>{let{id:t}=e;return await a.p7.get("/product/".concat(t))},h=e=>["get-product",e],m=e=>{let{id:t}=e;return(0,s.useQuery)({queryFn:()=>d({id:t}),queryKey:h(t),refetchOnWindowFocus:!1,cacheTime:432e5,staleTime:432e5})},v=async()=>await a.p7.get("/categories"),p=()=>["get-categories"],x=()=>(0,s.useQuery)({queryKey:p(),queryFn:v,refetchOnWindowFocus:!1,cacheTime:432e5,staleTime:432e5}),j=async()=>await a.p7.get("/posts"),b=()=>["get-posts"],f=()=>(0,s.useQuery)({queryKey:b(),queryFn:j,refetchOnWindowFocus:!1,cacheTime:432e5,staleTime:432e5}),y=async e=>{let{id:t}=e;return await a.p7.get("/posts/".concat(t))},g=e=>["get-post",e],N=e=>{let{id:t}=e;return(0,s.useQuery)({queryFn:()=>y({id:t}),queryKey:g(t),refetchOnWindowFocus:!1,cacheTime:432e5,staleTime:432e5})}}},function(e){e.O(0,[3572,2146,4631,471,9620,7321,1201,7640,4224,5078,5343,3722,3538,2971,4938,1744],function(){return e(e.s=6334)}),_N_E=e.O()}]);