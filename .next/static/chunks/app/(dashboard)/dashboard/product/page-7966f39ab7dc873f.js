(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5311],{3403:function(e,t,n){Promise.resolve().then(n.bind(n,6732))},2813:function(e,t,n){"use strict";n.d(t,{l:function(){return a}});var s=n(7437),i=n(6716),l=n(9609);function a(e){let{modalIsOpen:t,closeModal:n,title:a,content:r,onConfirm:c,size:o}=e;return(0,s.jsx)(s.Fragment,{children:o?(0,s.jsxs)(l.Z,{size:o,backdrop:"static",show:t,onHide:()=>n(),children:[(0,s.jsx)(l.Z.Header,{closeButton:!1,children:(0,s.jsx)(l.Z.Title,{children:a})}),(0,s.jsx)(l.Z.Body,{children:r}),(0,s.jsxs)(l.Z.Footer,{children:[(0,s.jsx)(i.Z,{className:"p-2",variant:"secondary",onClick:()=>n(),children:"Đ\xf3ng"}),(0,s.jsx)(i.Z,{className:"p-2",variant:"success",onClick:()=>c(),children:"X\xe1c nhận"})]})]}):(0,s.jsxs)(l.Z,{backdrop:"static",show:t,onHide:()=>n(),children:[(0,s.jsx)(l.Z.Header,{closeButton:!1,children:(0,s.jsx)(l.Z.Title,{children:a})}),(0,s.jsx)(l.Z.Body,{children:r}),(0,s.jsxs)(l.Z.Footer,{children:[(0,s.jsx)(i.Z,{className:"p-2",size:"sm",variant:"secondary",onClick:()=>n(),children:"Đ\xf3ng"}),(0,s.jsx)(i.Z,{className:"p-2",size:"sm",variant:"success",onClick:()=>c(),children:"X\xe1c nhận"})]})]})})}},6732:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return x}});var s=n(7437),i=n(2265),l=n(2813),a=n(145),r=n(5343),c=n.n(r),o=n(6778),u=n(553),d=n(6300),h=n(3538),m=n(4224),p=n(995),v=n(9690);function x(){var e;let[t,n]=(0,i.useState)(!1),[r,x]=(0,i.useState)(!1),[f,j]=(0,i.useState)(1),[g,y]=(0,i.useState)([]),[b,N]=(0,i.useState)(!1),[C,w]=(0,i.useState)([]),[S,T]=(0,i.useState)({name:"",stock:1,price:null,description:"",id:null,categoriesId:null}),{data:k,isLoading:E}=(0,a.iu)(),F=null==k?void 0:k.data,{mutateAsync:B,isLoading:Q}=(0,u.qX)(),{mutateAsync:A,isLoading:D}=(0,u.wE)(),{mutateAsync:O,isLoading:Z}=(0,u.xq)(),{data:I}=(0,a.L_)(),_=()=>{T({name:"",stock:1,price:null,description:"",id:null})},z=e=>{let{name:t,value:n}=e.target;if(("price"===t||"stock"===t)&&n.length>9){(0,o.Dd)("Vui l\xf2ng nhập đ\xfang số ".concat("price"===t?"tiền":"lượng"));return}T(e=>({...e,[t]:"price"===t||"stock"===t||"categoriesId"===t?+n:n}))},$=async()=>{var e,t,s;for(let e in S)if(Object.prototype.hasOwnProperty.call(S,e)&&!S[e]&&"id"!==e){(0,o.Dd)("C\xe1c trường phải đảm bảo kh\xf4ng được trống.");return}if(b){let e=[];for(let n=0;n<g.length;n++)if(null===(t=g[n])||void 0===t?void 0:t.file){let t=new FormData;t.append("file",null===(s=g[n])||void 0===s?void 0:s.file);let i=await o.p7.post("/upload",t);e.push(i.data[0])}else e.push(g[n]);A({...S,images:e}).then(()=>{n(!1),N(!1),_(),(0,o.Dd)("Cập nhật sản phẩm th\xe0nh c\xf4ng !",{status:"success"}),y([])})}else{delete S.id;let t=new FormData;null==g||g.forEach((e,n)=>{t.append("file",e.file)});let s=await o.p7.post("/upload",t);B({...S,images:null===(e=s.data)||void 0===e?void 0:e.map(e=>({name:e.originalname,url:e.url,size:e.size,type:e.type}))}).then(e=>{n(!1),_(),(0,o.Dd)("Tạo sản phẩm th\xe0nh c\xf4ng !",{status:"success"}),y([])}).catch(e=>{(0,h.Cg)(e,"Tạo sản phẩm")})}},K=()=>{try{O({id:S.id}).then(()=>{_(),x(!1),(0,o.Dd)("X\xf3a sản phẩm th\xe0nh c\xf4ng !",{status:"success"})})}catch(e){}};return(0,i.useEffect)(()=>{F&&w([...F])},[null==F?void 0:F.length,F]),(0,s.jsxs)(s.Fragment,{children:[t&&(0,s.jsx)(l.l,{size:"lg",title:b?"Cập nhật sản phẩm":"Th\xeam sản phẩm",onConfirm:()=>$(),closeModal:()=>{n(!1),_(),N(!1),y([])},modalIsOpen:t,content:(0,s.jsx)("div",{className:"col-12",children:(0,s.jsx)("div",{className:"card",children:(0,s.jsx)("div",{className:"card-body",children:(0,s.jsx)("form",{className:"forms-sample",children:(0,s.jsxs)("div",{className:"row",children:[(0,s.jsxs)("div",{className:"col-lg-6 col-sm-12",children:[(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{htmlFor:"exampleInputName1",children:"T\xean sản phẩm"}),(0,s.jsx)("input",{onChange:z,type:"text",className:"form-control",id:"exampleInputName1",placeholder:"T\xean sản phẩm",name:"name",value:null==S?void 0:S.name})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{htmlFor:"exampleInputEmail3",children:"Số lượng sản phẩm"}),(0,s.jsx)("input",{onChange:z,type:"number",name:"stock",className:"form-control",id:"exampleInputEmail3",placeholder:"Số lượng sản phẩm",value:null==S?void 0:S.stock})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{htmlFor:"exampleInputPassword4",children:"Gi\xe1"}),(0,s.jsx)("input",{onChange:z,type:"number",name:"price",className:"form-control",id:"exampleInputPassword4",placeholder:"Gi\xe1",value:null==S?void 0:S.price})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{htmlFor:"exampleInputPassword5",children:"Danh mục"}),(0,s.jsx)("div",{className:"mb-3",children:(0,s.jsxs)("select",{className:"form-select form-group form-select-sm p-2",name:"categoriesId",onChange:z,id:"exampleInputPassword5",children:[(0,s.jsx)("option",{children:"chọn danh mục"}),null===(e=I.data)||void 0===e?void 0:e.map(e=>(0,s.jsx)("option",{selected:(null==S?void 0:S.categoriesId)==(null==e?void 0:e.id),value:null==e?void 0:e.id,children:null==e?void 0:e.name}))]})})]})]}),(0,s.jsxs)("div",{className:"col-lg-6 col-sm-12",children:[(0,s.jsx)("label",{className:"mb-2",htmlFor:"",children:"H\xecnh ảnh"}),(0,s.jsx)(c(),{multiple:!0,value:g,onChange:e=>{console.log(e),y(e)},maxNumber:69,dataURLKey:"url",children:e=>{let{imageList:t,onImageUpload:n,onImageRemoveAll:i,onImageUpdate:l,onImageRemove:a,isDragging:r,dragProps:c}=e;return(0,s.jsxs)("div",{className:"upload__image-wrapper",children:[(0,s.jsx)("button",{className:"btn btn-success btn-sm",type:"button",style:r?{color:"red"}:void 0,onClick:e=>{e.preventDefault(),n()},...c,children:"Nhấn chọn hoặc k\xe9o thả tại đ\xe2y"}),"\xa0",(0,s.jsx)("button",{className:"btn btn-danger btn-sm",onClick:e=>{e.preventDefault(),i()},children:"X\xf3a tất cả c\xe1 ảnh"}),(0,s.jsx)("div",{className:"my-2 d-flex align-items-center row",children:t.map((e,t)=>(0,s.jsxs)("div",{className:" image-item d-flex flex-column align-items-center justify-content-between col-3 flex-md-wrap",children:[(0,s.jsx)("img",{src:e.url,width:"100",className:"rounded",height:"100",style:{objectFit:"contain"}}),(0,s.jsxs)("div",{className:"image-item__btn-wrapper my-2 d-flex align-content-center",children:[(0,s.jsx)("button",{className:"btn btn-sm btn-success mx-1",onClick:e=>{e.preventDefault(),l(t)},children:"Đổi"}),(0,s.jsx)("button",{className:"btn btn-sm btn-warning",onClick:e=>{e.preventDefault(),a(t)},children:"X\xf3a"})]})]},t))})]})}}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{htmlFor:"exampleTextarea1",children:"M\xf4 tả sản phẩm"}),(0,s.jsx)("textarea",{onChange:z,className:"form-control",id:"exampleTextarea1",name:"description",rows:6,defaultValue:"",placeholder:"M\xf4 tả sản phẩm",value:null==S?void 0:S.description})]})]})]})})})})})}),r&&(0,s.jsx)(l.l,{title:"X\xf3a sản phẩm",content:(0,s.jsx)("p",{children:"Bạn c\xf3 muốn x\xf3a sản phẩm n\xe0y kh\xf4ng ?"}),closeModal:()=>x(!1),modalIsOpen:r,onConfirm:()=>K()}),(0,s.jsx)(p.Z,{isLoading:Z||Q||D||E}),(0,s.jsx)("div",{className:"row content-wrapper",children:(0,s.jsxs)("div",{className:"col-12 ",children:[(0,s.jsxs)("div",{className:"row mb-2 justify-content-between d-flex ",children:[(0,s.jsx)("div",{className:"col-2 ",children:(0,s.jsx)("div",{className:"d-grid gap-2",children:(0,s.jsx)("button",{onClick:()=>n(!0),type:"button",className:"btn btn-success p-2",children:"+ Th\xeam sản phẩm"})})}),(0,s.jsx)("div",{className:"col-5",children:(0,s.jsx)("input",{type:"text",className:"form-control",onChange:e=>{let{value:t}=e.target;w([...[...F].filter(e=>{var n,s;return null==e?void 0:null===(s=e.name)||void 0===s?void 0:null===(n=s.toLowerCase())||void 0===n?void 0:n.includes(null==t?void 0:t.toLowerCase())})])},"aria-describedby":"helpId",placeholder:"T\xecm kiếm sản phẩm theo t\xean"})})]}),(0,s.jsx)("div",{className:"card",children:(0,s.jsxs)("div",{className:"card-body",children:[(0,s.jsx)("h4",{className:"card-title",children:"Danh s\xe1ch sản phẩm"}),(0,s.jsx)("div",{className:"table-responsive",children:(0,s.jsxs)("table",{className:"table",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{children:" Ảnh "}),(0,s.jsx)("th",{children:" T\xean "}),(0,s.jsx)("th",{children:" M\xf4 tả "}),(0,s.jsx)("th",{children:" Số lượng trong kho "}),(0,s.jsx)("th",{children:" Gi\xe1 "}),(0,s.jsx)("th",{children:"X\xf3a/Cập nhật"})]})}),(0,s.jsx)("tbody",{children:null==C?void 0:C.slice(8*f-8,8*f).map(e=>{var t,i,l,a;return(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:(0,s.jsx)("img",{src:(null==e?void 0:null===(t=e.images)||void 0===t?void 0:t.length)>0&&(null==e?void 0:null===(i=e.images[0])||void 0===i?void 0:i.url),className:"me-1 rounded",style:{objectFit:"contain"},alt:"image"})}),(0,s.jsxs)("td",{children:[null==e?void 0:null===(l=e.name)||void 0===l?void 0:l.slice(0,20),"..."]}),(0,s.jsx)("td",{className:"w-25 cursor-pointer",children:(0,s.jsx)(m.ZP,{allowHTML:!0,content:(0,s.jsx)("div",{children:null==e?void 0:e.description}),arrow:!0,placement:"right",children:(0,s.jsxs)("div",{style:{width:"200px",whiteSpace:"break-spaces"},children:[null==e?void 0:null===(a=e.description)||void 0===a?void 0:a.slice(0,20),"..."]})})}),(0,s.jsxs)("td",{children:[null==e?void 0:e.stock," "]}),(0,s.jsx)("td",{children:(0,d.x)(null==e?void 0:e.price)}),(0,s.jsxs)("td",{children:[(0,s.jsx)("button",{onClick:()=>{x(!0),T({id:null==e?void 0:e.id,description:"",name:"",price:null,stock:null})},type:"button",className:"btn btn-danger btn-sm",children:"X\xf3a"}),(0,s.jsx)("button",{onClick:()=>{N(!0),n(!0),T({description:null==e?void 0:e.description,name:null==e?void 0:e.name,price:null==e?void 0:e.price,stock:null==e?void 0:e.stock,id:null==e?void 0:e.id,categoriesId:null==e?void 0:e.categoriesId}),console.log(null==e?void 0:e.images),y(null==e?void 0:e.images)},type:"button",className:"btn btn-success btn-sm m-lg-1",children:"Cập nhật"})]})]})})})]})}),(0,s.jsx)("div",{className:"d-flex justify-content-end mt-4",children:F&&(0,s.jsx)(v.Z,{active:f,handleJump:e=>{j(e)},length:C.length,step:8})})]})})]})})]})}},9690:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var s=n(7437);n(2265);var i=n(8411);function l(e){let{length:t,active:n,handleJump:l,step:a=8}=e,r=[];for(let e=1;e<=t/a+1;e++)r.push((0,s.jsx)(i.Z.Item,{defaultValue:n,onClick:()=>l(e),activeLabel:"",active:e===n,children:e},e));return(0,s.jsx)(i.Z,{size:"sm",children:r})}},995:function(e,t,n){"use strict";var s=n(7437),i=n(8366),l=n.n(i);t.Z=function(e){let{isLoading:t}=e;return t&&(0,s.jsx)("div",{style:{background:"#000",opacity:".5",position:"fixed",width:"100%",height:"100%",top:0,left:0,zIndex:1e6,display:"flex",justifyContent:"center",alignItems:"center"},children:(0,s.jsx)(l(),{style:{zIndex:1e3},color:"white",loading:t,size:50})})}},6300:function(e,t,n){"use strict";n.d(t,{x:function(){return i}});var s=n(4859);let i=e=>s.format(e,{code:"VND"})},553:function(e,t,n){"use strict";n.d(t,{Zz:function(){return a},FZ:function(){return c},nS:function(){return b},u3:function(){return k},qX:function(){return v},vF:function(){return m},h5:function(){return C},xq:function(){return g},P7:function(){return S},wE:function(){return f},Y$:function(){return d}});var s=n(9077),i=n(6778);let l=async e=>await i.p7.post("/auth/login",e),a=()=>(0,s.useMutation)(l),r=async e=>await i.p7.post("/auth/register",e),c=()=>(0,s.useMutation)(r);var o=n(145);let u=async e=>{let{id:t,data:n}=e;return await i.p7.put("/cart/".concat(t),n,{headers:{Authorization:"Bearer ".concat((0,i.$c)(i.B$.ACCESS_TOKEN))}})},d=()=>{let e=(0,s.useQueryClient)();return(0,s.useMutation)(u,{onSuccess(t){let{data:n}=t,s=(0,o.xE)();e.setQueriesData(s,e=>{var t,s;let i=null==e?void 0:null===(s=e.data)||void 0===s?void 0:null===(t=s.cart)||void 0===t?void 0:t.map(e=>(null==e?void 0:e.id)===(null==n?void 0:n.id)?n:e);return e.data.cart=i,e})}})},h=async e=>{let{id:t}=e;return await i.p7.delete("/cart/".concat(t),{headers:{Authorization:"Bearer ".concat((0,i.$c)(i.B$.ACCESS_TOKEN))}})},m=()=>{let e=(0,s.useQueryClient)();return(0,s.useMutation)(h,{onSuccess(t){let{data:n}=t,s=(0,o.xE)();e.setQueriesData(s,e=>{var t,s;let i=null==e?void 0:null===(s=e.data)||void 0===s?void 0:null===(t=s.cart)||void 0===t?void 0:t.filter(e=>(null==e?void 0:e.id)!=(null==n?void 0:n.id));return e.data.cart=i,e})}})},p=async e=>await i.p7.post("/product",e,{headers:{Authorization:"Bearer ".concat((0,i.$c)(i.B$.ACCESS_TOKEN))}}),v=()=>{let e=(0,s.useQueryClient)();return(0,s.useMutation)(p,{onSuccess(t){let{data:n}=t,s=(0,o.be)();e.setQueriesData(s,e=>(e.data.unshift(n),{...e}))}})},x=async e=>await i.p7.put("/product/".concat(e.id),e,{headers:{Authorization:"Bearer ".concat((0,i.$c)(i.B$.ACCESS_TOKEN))}}),f=()=>{let e=(0,s.useQueryClient)();return(0,s.useMutation)(x,{onSuccess(t){let{data:n}=t,s=(0,o.be)();e.setQueriesData(s,e=>{let t=e.data.map(e=>(null==e?void 0:e.id)==(null==n?void 0:n.id)?n:e);return e.data=t,{...e}})}})},j=async e=>await i.p7.delete("/product/".concat(e.id),{headers:{Authorization:"Bearer ".concat((0,i.$c)(i.B$.ACCESS_TOKEN))}}),g=()=>{let e=(0,s.useQueryClient)();return(0,s.useMutation)(j,{onSuccess(t){let{data:n}=t,s=(0,o.be)();e.setQueriesData(s,e=>{var t;let s=null===(t=e.data)||void 0===t?void 0:t.filter(e=>(null==e?void 0:e.id)!=(null==n?void 0:n.id));return e.data=s,{...e}})}})},y=async e=>await i.p7.post("/categories",e,{headers:{Authorization:"Bearer ".concat((0,i.$c)(i.B$.ACCESS_TOKEN))}}),b=()=>{let e=(0,s.useQueryClient)();return(0,s.useMutation)(y,{onSuccess(t){let{data:n}=t,s=(0,o.TC)();e.setQueriesData(s,e=>{var t;return null==e||null===(t=e.data)||void 0===t||t.unshift(n),e})}})},N=async e=>{let{id:t}=e;return await i.p7.delete("/categories/".concat(t),{headers:{Authorization:"Bearer ".concat((0,i.$c)(i.B$.ACCESS_TOKEN))}})},C=()=>{let e=(0,s.useQueryClient)();return(0,s.useMutation)(N,{onSuccess(t){let{data:n}=t,s=(0,o.TC)();e.setQueriesData(s,e=>{var t,s;let i=null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.findIndex(e=>e.id==(null==n?void 0:n.id));return null==e||null===(s=e.data)||void 0===s||s.splice(i,1),e})}})},w=async e=>{let{id:t,data:n}=e;return await i.p7.put("/categories/".concat(t),n,{headers:{Authorization:"Bearer ".concat((0,i.$c)(i.B$.ACCESS_TOKEN))}})},S=()=>{let e=(0,s.useQueryClient)();return(0,s.useMutation)(w,{onSuccess(t){let{data:n}=t,s=(0,o.TC)();e.setQueriesData(s,e=>{let t=null==e?void 0:e.data.map(e=>e.id==(null==n?void 0:n.id)?n:e);return e.data=[...t],e})}})},T=async e=>await i.p7.post("/posts",e,{headers:{Authorization:"Bearer ".concat((0,i.$c)(i.B$.ACCESS_TOKEN))}}),k=()=>{let e=(0,s.useQueryClient)();return(0,s.useMutation)(T,{onSuccess(t){let{data:n}=t,s=(0,o.U6)();e.setQueriesData(s,e=>(e.data.unshift(n),{...e}))}})}},145:function(e,t,n){"use strict";n.d(t,{TC:function(){return v},U6:function(){return j},be:function(){return o},xE:function(){return a},L_:function(){return x},tn:function(){return N},Yi:function(){return g},cO:function(){return m},iu:function(){return u},rj:function(){return r}});var s=n(9077),i=n(6778);let l=async()=>await i.p7.get("/auth/check-is-login",{headers:{Authorization:"Bearer ".concat((0,i.$c)(i.B$.ACCESS_TOKEN))}}),a=()=>["is-user-logined"],r=()=>(0,s.useQuery)({queryKey:a(),queryFn:l,refetchOnWindowFocus:!1}),c=async()=>await i.p7.get("/product"),o=()=>["get-products"],u=()=>(0,s.useQuery)({queryKey:o(),queryFn:c,refetchOnWindowFocus:!1,cacheTime:432e5,staleTime:432e5}),d=async e=>{let{id:t}=e;return await i.p7.get("/product/".concat(t))},h=e=>["get-product",e],m=e=>{let{id:t}=e;return(0,s.useQuery)({queryFn:()=>d({id:t}),queryKey:h(t),refetchOnWindowFocus:!1,cacheTime:432e5,staleTime:432e5})},p=async()=>await i.p7.get("/categories"),v=()=>["get-categories"],x=()=>(0,s.useQuery)({queryKey:v(),queryFn:p,refetchOnWindowFocus:!1,cacheTime:432e5,staleTime:432e5}),f=async()=>await i.p7.get("/posts"),j=()=>["get-posts"],g=()=>(0,s.useQuery)({queryKey:j(),queryFn:f,refetchOnWindowFocus:!1,cacheTime:432e5,staleTime:432e5}),y=async e=>{let{id:t}=e;return await i.p7.get("/posts/".concat(t))},b=e=>["get-post",e],N=e=>{let{id:t}=e;return(0,s.useQuery)({queryFn:()=>y({id:t}),queryKey:b(t),refetchOnWindowFocus:!1,cacheTime:432e5,staleTime:432e5})}}},function(e){e.O(0,[1201,4859,7640,4224,5078,5343,3863,3538,2971,4938,1744],function(){return e(e.s=3403)}),_N_E=e.O()}]);