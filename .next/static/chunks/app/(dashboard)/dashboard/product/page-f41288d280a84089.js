(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[311],{3403:function(e,n,t){Promise.resolve().then(t.bind(t,6732))},2813:function(e,n,t){"use strict";t.d(n,{l:function(){return a}});var r=t(7437),s=t(6716),c=t(3289);function a(e){let{modalIsOpen:n,closeModal:t,title:a,content:i,onConfirm:l,size:o}=e;return(0,r.jsx)(r.Fragment,{children:o?(0,r.jsxs)(c.Z,{size:o,backdrop:"static",show:n,onHide:()=>t(),children:[(0,r.jsx)(c.Z.Header,{closeButton:!0,children:(0,r.jsx)(c.Z.Title,{children:a})}),(0,r.jsx)(c.Z.Body,{children:i}),(0,r.jsxs)(c.Z.Footer,{children:[(0,r.jsx)(s.Z,{variant:"secondary",onClick:()=>t(),children:"Đ\xf3ng"}),(0,r.jsx)(s.Z,{variant:"primary",onClick:()=>l(),children:"X\xe1c nhận"})]})]}):(0,r.jsxs)(c.Z,{backdrop:"static",show:n,onHide:()=>t(),children:[(0,r.jsx)(c.Z.Header,{closeButton:!0,children:(0,r.jsx)(c.Z.Title,{children:a})}),(0,r.jsx)(c.Z.Body,{children:i}),(0,r.jsxs)(c.Z.Footer,{children:[(0,r.jsx)(s.Z,{size:"sm",variant:"secondary",onClick:()=>t(),children:"Đ\xf3ng"}),(0,r.jsx)(s.Z,{size:"sm",variant:"primary",onClick:()=>l(),children:"X\xe1c nhận"})]})]})})}},6732:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return p}});var r=t(7437),s=t(2265),c=t(2813),a=t(3647),i=t(5343),l=t.n(i),o=t(7182),u=t(5364),d=t(6300),h=t(3797),m=t(9317);function p(){let[e,n]=(0,s.useState)(!1),[t,i]=(0,s.useState)(!1),[p,x]=(0,s.useState)([]),[v,f]=(0,s.useState)(!1),[j,g]=(0,s.useState)([]),[y,b]=(0,s.useState)({name:"",stock:0,price:null,description:"",id:null}),{data:C}=(0,a.iu)(),N=null==C?void 0:C.data,{mutateAsync:w}=(0,u.qX)(),{mutateAsync:k}=(0,u.wE)(),{mutateAsync:S}=(0,u.xq)(),E=()=>{b({name:"",stock:0,price:null,description:"",id:null})},B=e=>{let{name:n,value:t}=e.target;if(("price"===n||"stock"===n)&&t.length>9){(0,o.Dd)("Vui l\xf2ng nhập đ\xfang số ".concat("price"===n?"tiền":"lượng"));return}b(e=>({...e,[n]:"price"===n||"stock"===n?+t:t}))},$=()=>{for(let e in y)if(Object.prototype.hasOwnProperty.call(y,e)&&!y[e]&&"id"!==e){(0,o.Dd)("C\xe1c trường phải đảm bảo kh\xf4ng được trống.");return}v?k({...y,images:p.map(e=>({url:e.data_url}))}).then(()=>{n(!1),f(!1),E(),(0,o.Dd)("Cập nhật sản phẩm th\xe0nh c\xf4ng !",{status:"success"})}):(delete y.id,w({...y,images:p.map(e=>({url:e.data_url}))}).then(e=>{n(!1),E(),(0,o.Dd)("Tạo sản phẩm th\xe0nh c\xf4ng !",{status:"success"})}).catch(e=>{console.log(e),(0,h.Cg)(e,"Tạo sản phẩm")}))},T=()=>{try{S({id:y.id}).then(()=>{E(),i(!1),(0,o.Dd)("X\xf3a sản phẩm th\xe0nh c\xf4ng !",{status:"success"})})}catch(e){}};return(0,s.useEffect)(()=>{N&&g([...N])},[C]),(0,r.jsxs)(r.Fragment,{children:[e&&(0,r.jsx)(c.l,{size:"lg",title:v?"Cập nhật sản phẩm":"Th\xeam sản phẩm",onConfirm:()=>$(),closeModal:()=>{n(!1),E(),f(!1),x([])},modalIsOpen:e,content:(0,r.jsx)("div",{className:"col-12",children:(0,r.jsx)("div",{className:"card",children:(0,r.jsx)("div",{className:"card-body",children:(0,r.jsx)("form",{className:"forms-sample",children:(0,r.jsxs)("div",{className:"row",children:[(0,r.jsxs)("div",{className:"col-lg-6 col-sm-12",children:[(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{htmlFor:"exampleInputName1",children:"T\xean sản phẩm"}),(0,r.jsx)("input",{onChange:B,type:"text",className:"form-control",id:"exampleInputName1",placeholder:"T\xean sản phẩm",name:"name",value:null==y?void 0:y.name})]}),(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{htmlFor:"exampleInputEmail3",children:"Số lượng sản phẩm"}),(0,r.jsx)("input",{onChange:B,type:"number",name:"stock",className:"form-control",id:"exampleInputEmail3",placeholder:"Số lượng sản phẩm",value:null==y?void 0:y.stock})]}),(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{htmlFor:"exampleInputPassword4",children:"Gi\xe1"}),(0,r.jsx)("input",{onChange:B,type:"number",name:"price",className:"form-control",id:"exampleInputPassword4",placeholder:"Gi\xe1",value:null==y?void 0:y.price})]})]}),(0,r.jsxs)("div",{className:"col-lg-6 col-sm-12",children:[(0,r.jsx)(l(),{multiple:!0,value:p,onChange:(e,n)=>{x(e)},maxNumber:69,dataURLKey:"data_url",children:e=>{let{imageList:n,onImageUpload:t,onImageRemoveAll:s,onImageUpdate:c,onImageRemove:a,isDragging:i,dragProps:l}=e;return(0,r.jsxs)("div",{className:"upload__image-wrapper",children:[(0,r.jsx)("button",{className:"btn btn-primary btn-sm",type:"button",style:i?{color:"red"}:void 0,onClick:e=>{e.preventDefault(),t()},...l,children:"Nhấn chọn hoặc k\xe9o thả tại đ\xe2y"}),"\xa0",(0,r.jsx)("button",{className:"btn btn-danger btn-sm",onClick:e=>{e.preventDefault(),s()},children:"X\xf3a tất cả c\xe1 ảnh"}),(0,r.jsx)("div",{className:"my-2 d-flex align-items-center row",children:n.map((e,n)=>(0,r.jsxs)("div",{className:" image-item d-flex flex-column align-items-center justify-content-between col-3 flex-md-wrap",children:[(0,r.jsx)("img",{src:e.data_url,width:"100",className:"rounded",height:"100",style:{objectFit:"cover"}}),(0,r.jsxs)("div",{className:"image-item__btn-wrapper my-2 d-flex align-content-center",children:[(0,r.jsx)("button",{className:"btn btn-sm btn-success mx-1",onClick:e=>{e.preventDefault(),c(n)},children:"Đổi"}),(0,r.jsx)("button",{className:"btn btn-sm btn-warning",onClick:e=>{e.preventDefault(),a(n)},children:"X\xf3a"})]})]},n))})]})}}),(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{htmlFor:"exampleTextarea1",children:"M\xf4 tả sản phẩm"}),(0,r.jsx)("textarea",{onChange:B,className:"form-control",id:"exampleTextarea1",name:"description",rows:6,defaultValue:"",placeholder:"M\xf4 tả sản phẩm",value:null==y?void 0:y.description})]})]})]})})})})})}),t&&(0,r.jsx)(c.l,{title:"X\xf3a sản phẩm",content:(0,r.jsx)("p",{children:"Bạn c\xf3 muốn x\xf3a sản phẩm n\xe0y kh\xf4ng ?"}),closeModal:()=>i(!1),modalIsOpen:t,onConfirm:()=>T()}),(0,r.jsx)("div",{className:"row content-wrapper",children:(0,r.jsxs)("div",{className:"col-12 ",children:[(0,r.jsxs)("div",{className:"row mb-2 justify-content-between d-flex ",children:[(0,r.jsx)("div",{className:"col-2 ",children:(0,r.jsx)("div",{className:"d-grid gap-2",children:(0,r.jsx)("button",{onClick:()=>n(!0),type:"button",className:"btn btn-primary",children:"+ Th\xeam sản phẩm"})})}),(0,r.jsx)("div",{className:"col-5",children:(0,r.jsx)("input",{type:"text",className:"form-control",onChange:e=>{let{value:n}=e.target;g([...[...N].filter(e=>e.name.includes(n))])},"aria-describedby":"helpId",placeholder:"T\xecm kiếm sản phẩm theo t\xean"})})]}),(0,r.jsx)("div",{className:"card",children:(0,r.jsxs)("div",{className:"card-body",children:[(0,r.jsx)("h4",{className:"card-title",children:"Danh s\xe1ch sản phẩm"}),(0,r.jsx)("div",{className:"table-responsive",children:(0,r.jsxs)("table",{className:"table",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{children:" Ảnh "}),(0,r.jsx)("th",{children:" T\xean "}),(0,r.jsx)("th",{children:" M\xf4 tả "}),(0,r.jsx)("th",{children:" Số lượng trong kho "}),(0,r.jsx)("th",{children:" Gi\xe1 "}),(0,r.jsx)("th",{children:"X\xf3a/Cập nhật"})]})}),(0,r.jsx)("tbody",{children:null==j?void 0:j.map(e=>{var t,s,c;return console.log(e),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:(0,r.jsx)("img",{src:(null==e?void 0:null===(t=e.images)||void 0===t?void 0:t.length)>0&&(null==e?void 0:null===(s=e.images[0])||void 0===s?void 0:s.url),className:"me-1 rounded",alt:"image"})}),(0,r.jsx)("td",{children:null==e?void 0:e.name}),(0,r.jsx)("td",{className:"w-25 cursor-pointer",children:(0,r.jsx)(m.ZP,{allowHTML:!0,content:(0,r.jsx)("div",{children:null==e?void 0:e.description}),arrow:!0,placement:"right",children:(0,r.jsxs)("div",{style:{width:"200px",whiteSpace:"break-spaces"},children:[null==e?void 0:null===(c=e.description)||void 0===c?void 0:c.slice(0,20),"..."]})})}),(0,r.jsxs)("td",{children:[null==e?void 0:e.stock," "]}),(0,r.jsx)("td",{children:(0,d.x)(null==e?void 0:e.price)}),(0,r.jsxs)("td",{children:[(0,r.jsx)("button",{onClick:()=>{i(!0),b({id:null==e?void 0:e.id,description:"",name:"",price:null,stock:null})},type:"button",className:"btn btn-danger btn-sm",children:"X\xf3a"}),(0,r.jsx)("button",{onClick:()=>{f(!0),n(!0),b({description:null==e?void 0:e.description,name:null==e?void 0:e.name,price:null==e?void 0:e.price,stock:null==e?void 0:e.stock,id:null==e?void 0:e.id}),x(null==e?void 0:e.images.map(e=>({data_url:e.url})))},type:"button",className:"btn btn-primary btn-sm m-lg-1",children:"Cập nhật"})]})]})})})]})})]})})]})})]})}},1362:function(e,n,t){"use strict";t.d(n,{$c:function(){return a},B$:function(){return s},EU:function(){return c},UK:function(){return i}});var r=t(7713);let s={ACCESS_TOKEN:"access_token"},c=(e,n,t)=>(0,r.setCookie)(e,n,{expires:new Date(new Date().getTime()+6048e5)}),a=e=>(0,r.getCookie)(e),i=e=>(0,r.deleteCookie)(e)},6300:function(e,n,t){"use strict";t.d(n,{x:function(){return s}});var r=t(4859);let s=e=>r.format(e,{code:"VND"})},3797:function(e,n,t){"use strict";t.d(n,{B$:function(){return r.B$},Bi:function(){return l},$c:function(){return r.$c},Cg:function(){return i}});var r=t(1362),s=t(2265),c=t(9077);(0,s.cache)(()=>new c.QueryClient),t(8526);var a=t(7182);let i=(e,n)=>{var t;return(null==e?void 0:null===(t=e.response)||void 0===t?void 0:t.status)===401?(0,a.Dd)(n,{status:"error"}):(0,a.Dd)("Cửa h\xe0ng đang bận, vui l\xf2ng trở lại sau \xedt ph\xfat nữa",{status:"error"})},l=e=>{let n=new Date(e);return null==n?void 0:n.toLocaleDateString("en-GB")}},7182:function(e,n,t){"use strict";t.d(n,{B$:function(){return l.B$},p7:function(){return i},UK:function(){return l.UK},$c:function(){return l.$c},EU:function(){return l.EU},Dd:function(){return s}});var r=t(171);let s=(e,n)=>(0,r.toast)(e,{progressStyle:{background:(null==n?void 0:n.status)==="success"?"var(--bs-primary)":(null==n?void 0:n.status)==="error"?"var(--bs-danger)":(null==n?void 0:n.status)==="warning"?"var(--bs-warning)":"var(--bs-info)"},autoClose:2e3,bodyStyle:{fontSize:16,fontWeight:500}});var c=t(2173),a=t(3797);console.log(!0);let i=c.Z.create({baseURL:"https://maytinhthunguyen.com/api"});c.Z.defaults.withCredentials=!0,i.defaults.headers.common.Authorization="Bearer ".concat((0,a.$c)(a.B$.ACCESS_TOKEN)),c.Z.interceptors.request.use(function(e){return e.headers.Authorization="Bearer ".concat((0,a.$c)(a.B$.ACCESS_TOKEN)),e.headers["Content-Type"]="application/json",e},function(e){return console.log(e),Promise.reject(e)});var l=t(1362)},5364:function(e,n,t){"use strict";t.d(n,{$B:function(){return d},Zz:function(){return a},FZ:function(){return l},qX:function(){return f},vF:function(){return x},xq:function(){return b},wE:function(){return g},Y$:function(){return m}});var r=t(9077),s=t(7182);let c=async e=>await s.p7.post("/auth/login",e),a=()=>(0,r.useMutation)(c),i=async e=>await s.p7.post("/auth/register",e),l=()=>(0,r.useMutation)(i);var o=t(3647);let u=async e=>await s.p7.post("/cart",e,{headers:{Authorization:"Bearer ".concat((0,s.$c)(s.B$.ACCESS_TOKEN))}}),d=()=>{let e=(0,r.useQueryClient)();return(0,r.useMutation)(u,{onSuccess(n,t,r){let s=(0,o.xE)();e.fetchQuery({queryKey:s})}})},h=async e=>{let{id:n,data:t}=e;return await s.p7.put("/cart/".concat(n),t,{headers:{Authorization:"Bearer ".concat((0,s.$c)(s.B$.ACCESS_TOKEN))}})},m=()=>{let e=(0,r.useQueryClient)();return(0,r.useMutation)(h,{onSuccess(n){let{data:t}=n,r=(0,o.xE)();e.fetchQuery({queryKey:r})}})},p=async e=>{let{id:n}=e;return await s.p7.delete("/cart/".concat(n),{headers:{Authorization:"Bearer ".concat((0,s.$c)(s.B$.ACCESS_TOKEN))}})},x=()=>{let e=(0,r.useQueryClient)();return(0,r.useMutation)(p,{onSuccess(n){let{data:t}=n,r=(0,o.xE)();e.fetchQuery({queryKey:r})}})},v=async e=>await s.p7.post("/product",e,{headers:{Authorization:"Bearer ".concat((0,s.$c)(s.B$.ACCESS_TOKEN))}}),f=()=>{let e=(0,r.useQueryClient)();return(0,r.useMutation)(v,{onSuccess(n){let{data:t}=n,r=(0,o.be)();e.refetchQueries({queryKey:r})}})},j=async e=>await s.p7.put("/product/".concat(e.id),e,{headers:{Authorization:"Bearer ".concat((0,s.$c)(s.B$.ACCESS_TOKEN))}}),g=()=>{let e=(0,r.useQueryClient)();return(0,r.useMutation)(j,{onSuccess(n){let{data:t}=n,r=(0,o.be)();e.refetchQueries({queryKey:r})}})},y=async e=>await s.p7.delete("/product/".concat(e.id),{headers:{Authorization:"Bearer ".concat((0,s.$c)(s.B$.ACCESS_TOKEN))}}),b=()=>{let e=(0,r.useQueryClient)();return(0,r.useMutation)(y,{onSuccess(n){let{data:t}=n,r=(0,o.be)();e.refetchQueries({queryKey:r})}})}},3647:function(e,n,t){"use strict";t.d(n,{be:function(){return o},xE:function(){return a},iu:function(){return u},rj:function(){return i}});var r=t(9077),s=t(7182);let c=async()=>await s.p7.get("/auth/check-is-login",{headers:{Authorization:"Bearer ".concat((0,s.$c)(s.B$.ACCESS_TOKEN))}}),a=()=>["is-user-logined"],i=()=>(0,r.useQuery)({queryKey:a(),queryFn:c,staleTime:0,cacheTime:0,refetchIntervalInBackground:!0,refetchOnReconnect:!0}),l=async()=>await s.p7.get("/product"),o=()=>["get-products"],u=()=>(0,r.useQuery)({queryKey:o(),queryFn:l,staleTime:5e3,cacheTime:5e3})}},function(e){e.O(0,[366,180,471,859,317,42,343,526,971,938,744],function(){return e(e.s=3403)}),_N_E=e.O()}]);