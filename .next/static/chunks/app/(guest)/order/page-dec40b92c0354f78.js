(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1179],{2753:function(e,n,t){Promise.resolve().then(t.bind(t,5012))},2813:function(e,n,t){"use strict";t.d(n,{l:function(){return c}});var r=t(7437),s=t(6716),i=t(9609);function c(e){let{modalIsOpen:n,closeModal:t,title:c,content:a,onConfirm:l,size:u}=e;return(0,r.jsx)(r.Fragment,{children:u?(0,r.jsxs)(i.Z,{size:u,backdrop:"static",show:n,onHide:()=>t(),children:[(0,r.jsx)(i.Z.Header,{closeButton:!1,children:(0,r.jsx)(i.Z.Title,{children:c})}),(0,r.jsx)(i.Z.Body,{children:a}),(0,r.jsxs)(i.Z.Footer,{children:[(0,r.jsx)(s.Z,{className:"p-2",variant:"secondary",onClick:()=>t(),children:"Đ\xf3ng"}),(0,r.jsx)(s.Z,{className:"p-2",variant:"success",onClick:()=>l(),children:"X\xe1c nhận"})]})]}):(0,r.jsxs)(i.Z,{backdrop:"static",show:n,onHide:()=>t(),children:[(0,r.jsx)(i.Z.Header,{closeButton:!1,children:(0,r.jsx)(i.Z.Title,{children:c})}),(0,r.jsx)(i.Z.Body,{children:a}),(0,r.jsxs)(i.Z.Footer,{children:[(0,r.jsx)(s.Z,{className:"p-2",size:"sm",variant:"secondary",onClick:()=>t(),children:"Đ\xf3ng"}),(0,r.jsx)(s.Z,{className:"p-2",size:"sm",variant:"success",onClick:()=>l(),children:"X\xe1c nhận"})]})]})})}},5012:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return y}});var r,s=t(7437),i=t(2265);t(1636);var c=t(6716),a=t(145),l=t(3538),u=t(4021),o=t(9130),d=t(2813),h=t(6778),v=t(6300),x=t(4033);function E(){return(0,s.jsx)(s.Fragment,{})}t(3274);var y=(r=function(){var e;let[n,t]=(0,i.useState)(),[r,x]=(0,i.useState)(!1),{data:y,isLoading:f}=(0,a.rj)(),j=null==y?void 0:null===(e=y.data)||void 0===e?void 0:e.order,{mutateAsync:m}=(0,o.O)(),g=e=>{m({id:e,data:{statusId:6}}).then(()=>{(0,h.Dd)("Hủy đơn h\xe0ng th\xe0nh c\xf4ng",{status:"success"}),x(!1)}).catch(e=>{(0,l.Cg)(e,"Hủy đơn h\xe0ng")})};return f?(0,s.jsx)(E,{}):(0,s.jsxs)(s.Fragment,{children:[r&&(0,s.jsx)(d.l,{modalIsOpen:r,closeModal:()=>x(!1),onConfirm:()=>g(n),title:"X\xf3a đơn đặt h\xe0ng",content:(0,s.jsx)("p",{children:"Bạn c\xf3 muốn x\xf3a đơn đặt h\xe0ng n\xe0y kh\xf4ng ?"})}),(0,s.jsx)("section",{className:"ftco-section",children:(null==j?void 0:j.length)>0?(0,s.jsx)("div",{className:"container",children:(0,s.jsx)("div",{className:"row",children:(0,s.jsx)("div",{className:"col-md-12",children:(0,s.jsx)("div",{className:"table-wrap",children:(0,s.jsxs)("table",{className:"table table-responsive-xl",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{children:"Số thứ tự"}),(0,s.jsx)("th",{children:"T\xean sản phẩm"}),(0,s.jsx)("th",{children:"Số lượng"}),(0,s.jsx)("th",{children:"Gi\xe1"}),(0,s.jsx)("th",{children:"Ng\xe0y đặt h\xe0ng"}),(0,s.jsx)("th",{children:"Trạng th\xe1i đặt h\xe0ng"}),(0,s.jsx)("th",{children:"Hủy đặt h\xe0ng"})]})}),(0,s.jsx)("tbody",{children:j.map((e,n)=>{var r,i,a,o,d,h,E,y,f;return(0,s.jsxs)("tr",{className:"alert",role:"alert",children:[(0,s.jsx)("td",{children:n+1}),(0,s.jsxs)("td",{className:"d-flex align-items-center",children:[(0,s.jsx)("div",{className:"img",style:{backgroundImage:"url(images/person_1.jpg)"}}),(0,s.jsx)("div",{className:"pl-3  mx-3",children:(0,s.jsx)("span",{children:null==e?void 0:null===(r=e.account)||void 0===r?void 0:r.fullName})})]}),(0,s.jsx)("td",{children:null==e?void 0:null===(i=e.cart)||void 0===i?void 0:i.quantity}),(0,s.jsx)("td",{children:(0,v.x)(null==e?void 0:null===(o=e.cart)||void 0===o?void 0:null===(a=o.product)||void 0===a?void 0:a.price)}),(0,s.jsx)("td",{children:(0,l.Bi)(null==e?void 0:e.createdAt)}),(0,s.jsx)("td",{className:"status text-left",children:(0,s.jsx)("span",{className:"".concat((null==e?void 0:null===(d=e.status)||void 0===d?void 0:d.name)===u.DF.PENDING?"bg-warning":(null==e?void 0:null===(h=e.status)||void 0===h?void 0:h.name)===u.DF.ACCEPTED?"bg-success":"bg-danger"," text-white  px-3 py-1"),children:(null==e?void 0:null===(E=e.status)||void 0===E?void 0:E.name)===u.DF.PENDING?u.GP.PENDING:(null==e?void 0:null===(y=e.status)||void 0===y?void 0:y.name)===u.DF.ACCEPTED?u.GP.ACCEPTED:u.GP.REJECT})}),(0,s.jsx)("td",{children:(0,s.jsx)(c.Z,{onClick:()=>{x(!0),t(null==e?void 0:e.id)},disabled:(null==e?void 0:null===(f=e.status)||void 0===f?void 0:f.name)===u.DF.REJECT,className:"btn-sm  px-4 py-2 float-start",children:"Hủy"})})]},n)})})]})})})})}):(0,s.jsx)("h3",{className:"text-center",children:"Kh\xf4ng c\xf3 đơn h\xe0ng n\xe0o được đặt ở đ\xe2y"})})]})},e=>{let n=(0,x.useRouter)(),{data:t,isLoading:c}=(0,a.rj)();return(0,i.useEffect)(()=>{(0,h.$c)(h.B$.ACCESS_TOKEN)&&(c||(null==t?void 0:t.data))||n.replace(u.Zj.LOGIN)},[c,null==t?void 0:t.data]),(null==t?void 0:t.data)?(0,s.jsx)(r,{...e}):(0,s.jsx)(s.Fragment,{})})},4021:function(e,n,t){"use strict";t.d(n,{Zj:function(){return r.Z},GP:function(){return s},DF:function(){return i}});var r=t(1365);let s={PENDING:"Chờ ph\xea duyệt",ACCEPTED:"Đ\xe3 ph\xea duyệt",CANCELED:"Đ\xe3 hủy",REJECT:"Đ\xe3 đ\xf3ng ph\xea duyệt"},i={PENDING:"ORDER_PENDING",ACCEPTED:"ORDER_ACCEPTED",CANCELED:"ORDER_CANCELED",REJECT:"ORDER_REJECT"}},1365:function(e,n,t){"use strict";t.d(n,{Z:function(){return r},A:function(){return s}});let r={HOME:"/",CART:"/cart",SHOP:"/shop",SHOP_DETAIL:"/shop-detail",POST_DETAIL:"/post-detail",LOGIN:"/login",ORDER:"/order",REGISTER:"/register",DASHBOARD:"/dashboard",DASHBOARD_PRODUCT:"/dashboard/product",DASHBOARD_ORDER:"/dashboard/order",DASHBOARD_CATEGORIES:"/dashboard/categories",DASHBOARD_POST:"/dashboard/post"},s={HOME:"Trang chủ",CART:"Giỏ h\xe0ng",SHOP:"Mua sắm"}},6300:function(e,n,t){"use strict";t.d(n,{x:function(){return s}});var r=t(4859);let s=e=>r.format(e,{code:"VND"})},9130:function(e,n,t){"use strict";t.d(n,{O:function(){return l}});var r=t(9077),s=t(6778),i=t(145),c=t(2146);let a=async e=>{let{id:n,data:t}=e;return await s.p7.put("/order/".concat(n),t,{headers:{Authorization:"Bearer ".concat((0,s.$c)(s.B$.ACCESS_TOKEN))}})},l=()=>{let e=(0,r.useQueryClient)();return(0,r.useMutation)(a,{onSuccess(n){let{data:t}=n,r=(0,i.xE)(),s=(0,c.y)();e.setQueriesData(r,e=>{var n,r;let s=null==e?void 0:null===(r=e.data)||void 0===r?void 0:null===(n=r.order)||void 0===n?void 0:n.filter(e=>(null==e?void 0:e.id)!=(null==t?void 0:t.id));return e.data.order=s,e}),console.log(t),e.setQueriesData(s,e=>{var n;let r=null==e?void 0:null===(n=e.data)||void 0===n?void 0:n.map(e=>(null==e?void 0:e.id)==(null==t?void 0:t.id)?t:e);return e.data=r,e})}})}},145:function(e,n,t){"use strict";t.d(n,{TC:function(){return E},U6:function(){return j},be:function(){return u},xE:function(){return c},L_:function(){return y},tn:function(){return C},Yi:function(){return m},cO:function(){return v},iu:function(){return o},rj:function(){return a}});var r=t(9077),s=t(6778);let i=async()=>await s.p7.get("/auth/check-is-login",{headers:{Authorization:"Bearer ".concat((0,s.$c)(s.B$.ACCESS_TOKEN))}}),c=()=>["is-user-logined"],a=()=>(0,r.useQuery)({queryKey:c(),queryFn:i,refetchOnWindowFocus:!1}),l=async()=>await s.p7.get("/product"),u=()=>["get-products"],o=()=>(0,r.useQuery)({queryKey:u(),queryFn:l,refetchOnWindowFocus:!1,cacheTime:432e5,staleTime:432e5}),d=async e=>{let{id:n}=e;return await s.p7.get("/product/".concat(n))},h=e=>["get-product",e],v=e=>{let{id:n}=e;return(0,r.useQuery)({queryFn:()=>d({id:n}),queryKey:h(n),refetchOnWindowFocus:!1,cacheTime:432e5,staleTime:432e5})},x=async()=>await s.p7.get("/categories"),E=()=>["get-categories"],y=()=>(0,r.useQuery)({queryKey:E(),queryFn:x,refetchOnWindowFocus:!1,cacheTime:432e5,staleTime:432e5}),f=async()=>await s.p7.get("/posts"),j=()=>["get-posts"],m=()=>(0,r.useQuery)({queryKey:j(),queryFn:f,refetchOnWindowFocus:!1,cacheTime:432e5,staleTime:432e5}),g=async e=>{let{id:n}=e;return await s.p7.get("/posts/".concat(n))},p=e=>["get-post",e],C=e=>{let{id:n}=e;return(0,r.useQuery)({queryFn:()=>g({id:n}),queryKey:p(n),refetchOnWindowFocus:!1,cacheTime:432e5,staleTime:432e5})}},2146:function(e,n,t){"use strict";t.d(n,{Y:function(){return a},y:function(){return c}});var r=t(9077),s=t(6778);let i=async()=>await s.p7.get("/order"),c=()=>["get-orders"],a=()=>(0,r.useQuery)({queryKey:c(),queryFn:i,refetchOnWindowFocus:!1,cacheTime:432e5,staleTime:432e5})},3274:function(){},1636:function(){},4033:function(e,n,t){e.exports=t(5313)}},function(e){e.O(0,[1201,4859,7640,5078,3538,2971,4938,1744],function(){return e(e.s=2753)}),_N_E=e.O()}]);