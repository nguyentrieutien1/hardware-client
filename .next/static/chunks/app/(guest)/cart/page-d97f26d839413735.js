(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[662],{1021:function(e,t,n){Promise.resolve().then(n.bind(n,937))},7452:function(e,t,n){"use strict";var r=n(7437),c=n(4033),i=n(2265),a=n(7182),s=n(4021),o=n(3647);t.Z=e=>t=>{let n=(0,c.useRouter)(),{data:l,isLoading:u}=(0,o.rj)();return(0,i.useEffect)(()=>{(0,a.$c)(a.B$.ACCESS_TOKEN)&&(u||(null==l?void 0:l.data))||n.replace(s.Zj.LOGIN)},[u,null==l?void 0:l.data]),(null==l?void 0:l.data)?(0,r.jsx)(e,{...t}):(0,r.jsx)(r.Fragment,{})}},937:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return b}});var r=n(7437),c=n(2265);n(1636);var i=n(2813),a=n(5364),s=n(3647),o=n(8366),l=n.n(o),u=function(e){let{isLoading:t}=e;return t&&(0,r.jsx)("div",{className:"",style:{background:"#000",opacity:".5",position:"fixed",width:"100%",height:"100%",top:0,left:0,zIndex:100,display:"flex",justifyContent:"center",alignItems:"center"},children:(0,r.jsx)(l(),{style:{zIndex:1e3},color:"white",loading:t,size:50})})},d=n(6716),h=n(9077),p=n(7182);let m=async e=>await p.p7.post("/order",e,{headers:{Authorization:"Bearer ".concat((0,p.$c)(p.B$.ACCESS_TOKEN))}}),f=()=>{let e=(0,h.useQueryClient)();return(0,h.useMutation)(m,{onSuccess(t,n,r){let c=(0,s.xE)();e.refetchQueries({queryKey:c})}})};var v=n(3797),x=n(6300),y=n(7452),j=n(4110),g=(0,y.Z)(function(){var e;let[t,n]=(0,c.useState)(!1),[o,l]=(0,c.useState)(!1),{data:h,isLoading:m}=(0,s.rj)(),y=null==h?void 0:null===(e=h.data)||void 0===e?void 0:e.cart,{mutate:g,isLoading:b}=(0,a.Y$)(),{mutateAsync:N,isLoading:C}=(0,a.vF)(),{mutateAsync:E,isLoading:O}=f(),[S,w]=(0,c.useState)(void 0),_=(e,t)=>{let{quantity:r}=t;C||b||O||(0==r?(n(!0),w(e)):g({id:e,data:{quantity:r}}))},A=()=>{C||b||N({id:S}).then(()=>{n(!1)}).catch(e=>{(0,v.Cg)(e,"X\xf3a sản phẩm trong giỏ h\xe0ng thất bại")})},B=()=>{E(y.map(e=>{var t;return{cartId:e.id,accountId:null==h?void 0:null===(t=h.data)||void 0===t?void 0:t.id}})).then(()=>{(0,p.Dd)("Đặt h\xe0ng th\xe0nh c\xf4ng !",{status:"success"}),l(!1)}).catch(e=>{(0,v.Cg)(e,"Đặt h\xe0ng thất bại, quay trở lại sau 5 ph\xfat nữa ")})};return m?(0,r.jsx)(j.Z,{}):(0,r.jsxs)("div",{children:[(0,r.jsx)(u,{isLoading:C||b||O}),t&&(0,r.jsx)(i.l,{modalIsOpen:t,closeModal:()=>n(!1),onConfirm:()=>A(),title:"X\xf3a sản phẩm",content:(0,r.jsx)("p",{children:"Bạn c\xf3 chắc chắn muốn x\xf3a sản phẩm n\xe0y kh\xf4ng ?"})}),o&&(0,r.jsx)(i.l,{modalIsOpen:o,closeModal:()=>l(!1),onConfirm:()=>B(),title:"Đặt h\xe0ng",content:(0,r.jsx)("p",{children:"Bạn c\xf3 chắc chắn muốn đặt h\xe0ng kh\xf4ng  ?"})}),(0,r.jsx)("div",{className:"hero",children:(0,r.jsx)("div",{className:"container",children:(0,r.jsxs)("div",{className:"row justify-content-between",children:[(0,r.jsx)("div",{className:"col-lg-7",children:(0,r.jsx)("div",{className:"",children:(0,r.jsx)("h1",{children:"Đ\xe2y l\xe0 giỏ h\xe0ng của bạn."})})}),(0,r.jsx)("div",{className:"col-lg-5",children:(0,r.jsx)("div",{className:"hero-img-wrap",children:(0,r.jsx)("img",{src:"images/Hardware.png",className:"img-fluid"})})})]})})}),(0,r.jsx)("div",{className:"ftco-section before-footer-section",children:(0,r.jsxs)("div",{className:"container",children:[(0,r.jsx)("div",{className:"row mb-5",children:(null==y?void 0:y.length)>0?(0,r.jsx)("div",{className:"col-md-12",children:(0,r.jsx)("div",{className:"site-blocks-table",children:(0,r.jsxs)("table",{className:"table",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"product-thumbnail",children:"Ảnh"}),(0,r.jsx)("th",{className:"product-name",children:"T\xean"}),(0,r.jsx)("th",{className:"product-price",children:"Gi\xe1"}),(0,r.jsx)("th",{className:"product-quantity",children:"Số tiền"}),(0,r.jsx)("th",{className:"product-total",children:"Tổng"}),(0,r.jsx)("th",{className:"product-remove",children:"X\xf3a"})]})}),(0,r.jsx)("tbody",{children:y.map(e=>{let{id:t,quantity:c,product:i}=e,{price:a,name:s}=i;return(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{className:"product-thumbnail",children:(0,r.jsx)("img",{src:"images/product-1.png",alt:"Image",className:"img-fluid"})}),(0,r.jsx)("td",{className:"product-name",children:(0,r.jsx)("h2",{className:"h5 text-black",children:s})}),(0,r.jsx)("td",{children:(0,x.x)(a)}),(0,r.jsx)("td",{children:(0,r.jsxs)("div",{className:" mb-3 d-flex align-items-center justify-content-center",children:[(0,r.jsx)("div",{className:"input-group-prepend",children:(0,r.jsx)("button",{className:"btn btn-outline-black border-0 bg-transparent text-black ",type:"button",onClick:()=>_(t,{quantity:c-1}),children:"−"})}),(0,r.jsx)("div",{className:"w-25",children:(0,r.jsx)("input",{type:"text",className:"form-control text-center ",value:c})}),(0,r.jsx)("div",{className:"input-group-append",children:(0,r.jsx)("button",{className:"btn btn-outline-black increase border-0 bg-transparent text-black",type:"button",onClick:()=>_(t,{quantity:c+1}),children:"+"})})]})}),(0,r.jsx)("td",{children:(0,x.x)(c*a)}),(0,r.jsx)("td",{children:(0,r.jsx)(d.Z,{variant:"primary",onClick:()=>{w(t),n(!0)},children:"X\xf3a"})})]})})})]})})}):(0,r.jsx)("h3",{className:"text-center",children:"Hiện tại giỏ h\xe0ng của bạn đang trống !"})}),(null==y?void 0:y.length)>0&&(0,r.jsxs)("div",{className:"row",children:[(0,r.jsx)("div",{className:"col-md-6"}),(0,r.jsx)("div",{className:"col-md-6 pl-5",children:(0,r.jsx)("div",{className:"row justify-content-end",children:(0,r.jsxs)("div",{className:"col-md-7",children:[(0,r.jsx)("div",{className:"row",children:(0,r.jsx)("div",{className:"col-md-12 text-right border-bottom mb-5",children:(0,r.jsx)("h3",{className:"text-black h4 text-uppercase",children:"Tổng tiền"})})}),(0,r.jsxs)("div",{className:"row mb-5",children:[(0,r.jsx)("div",{className:"col-md-6",children:(0,r.jsx)("span",{className:"text-black",children:"Tổng"})}),(0,r.jsx)("div",{className:"col-md-6 text-right",children:(0,r.jsx)("strong",{className:"text-black",children:(0,x.x)((null==y?void 0:y.length)>0&&(null==y?void 0:y.reduce((e,t)=>{var n;return e+(null==t?void 0:null===(n=t.product)||void 0===n?void 0:n.price)*(null==t?void 0:t.quantity)},0)))})})]}),(0,r.jsx)("div",{className:"row",children:(0,r.jsx)("div",{className:"col-md-12",children:(0,r.jsx)(d.Z,{className:"py-3 float-end   ",onClick:()=>l(!0),children:"Đặt h\xe0ng"})})})]})})})]})]})})]})});function b(){return(0,r.jsx)(g,{})}},4110:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var r=n(7437);function c(){return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("div",{className:"pageloader gray-bg",children:(0,r.jsxs)("div",{className:"loader",children:[(0,r.jsx)("span",{className:"z-3 opacity-100",children:"M\xe1y T\xednh Thu Nguyễn"}),(0,r.jsx)("div",{className:"sp-hydrogen"})]})})})}n(2265),n(3274)},2813:function(e,t,n){"use strict";n.d(t,{l:function(){return a}});var r=n(7437),c=n(6716),i=n(3289);function a(e){let{modalIsOpen:t,closeModal:n,title:a,content:s,onConfirm:o,size:l}=e;return(0,r.jsx)(r.Fragment,{children:l?(0,r.jsxs)(i.Z,{size:l,backdrop:"static",show:t,onHide:()=>n(),children:[(0,r.jsx)(i.Z.Header,{closeButton:!0,children:(0,r.jsx)(i.Z.Title,{children:a})}),(0,r.jsx)(i.Z.Body,{children:s}),(0,r.jsxs)(i.Z.Footer,{children:[(0,r.jsx)(c.Z,{variant:"secondary",onClick:()=>n(),children:"Đ\xf3ng"}),(0,r.jsx)(c.Z,{variant:"primary",onClick:()=>o(),children:"X\xe1c nhận"})]})]}):(0,r.jsxs)(i.Z,{backdrop:"static",show:t,onHide:()=>n(),children:[(0,r.jsx)(i.Z.Header,{closeButton:!0,children:(0,r.jsx)(i.Z.Title,{children:a})}),(0,r.jsx)(i.Z.Body,{children:s}),(0,r.jsxs)(i.Z.Footer,{children:[(0,r.jsx)(c.Z,{size:"sm",variant:"secondary",onClick:()=>n(),children:"Đ\xf3ng"}),(0,r.jsx)(c.Z,{size:"sm",variant:"primary",onClick:()=>o(),children:"X\xe1c nhận"})]})]})})}},4021:function(e,t,n){"use strict";n.d(t,{Zj:function(){return r.Z},GP:function(){return c},DF:function(){return i}});var r=n(1365);let c={PENDING:"Chờ ph\xea duyệt",ACCEPTED:"Đ\xe3 ph\xea duyệt",CANCELED:"Đ\xe3 hủy",REJECT:"Đ\xe3 đ\xf3ng ph\xea duyệt"},i={PENDING:"ORDER_PENDING",ACCEPTED:"ORDER_ACCEPTED",CANCELED:"ORDER_CANCELED",REJECT:"ORDER_REJECT"}},1365:function(e,t,n){"use strict";n.d(t,{Z:function(){return r},A:function(){return c}});let r={HOME:"/",CART:"/cart",SHOP:"/shop",LOGIN:"/login",ORDER:"/order",REGISTER:"/register",DASHBOARD:"/dashboard",DASHBOARD_PRODUCT:"/dashboard/product",DASHBOARD_ORDER:"/dashboard/order"},c={HOME:"Trang chủ",CART:"Giỏ h\xe0ng",SHOP:"Mua sắm"}},1362:function(e,t,n){"use strict";n.d(t,{$c:function(){return a},B$:function(){return c},EU:function(){return i},UK:function(){return s}});var r=n(7713);let c={ACCESS_TOKEN:"access_token"},i=(e,t,n)=>(0,r.setCookie)(e,t,{expires:new Date(new Date().getTime()+6048e5)}),a=e=>(0,r.getCookie)(e),s=e=>(0,r.deleteCookie)(e)},6300:function(e,t,n){"use strict";n.d(t,{x:function(){return c}});var r=n(4859);let c=e=>r.format(e,{code:"VND"})},3797:function(e,t,n){"use strict";n.d(t,{B$:function(){return r.B$},Bi:function(){return o},$c:function(){return r.$c},Cg:function(){return s}});var r=n(1362),c=n(2265),i=n(9077);(0,c.cache)(()=>new i.QueryClient),n(8526);var a=n(7182);let s=(e,t)=>{var n;return(null==e?void 0:null===(n=e.response)||void 0===n?void 0:n.status)===401?(0,a.Dd)(t,{status:"error"}):(0,a.Dd)("Cửa h\xe0ng đang bận, vui l\xf2ng trở lại sau \xedt ph\xfat nữa",{status:"error"})},o=e=>{let t=new Date(e);return null==t?void 0:t.toLocaleDateString("en-GB")}},7182:function(e,t,n){"use strict";n.d(t,{B$:function(){return o.B$},p7:function(){return s},UK:function(){return o.UK},$c:function(){return o.$c},EU:function(){return o.EU},Dd:function(){return c}});var r=n(171);let c=(e,t)=>(0,r.toast)(e,{progressStyle:{background:(null==t?void 0:t.status)==="success"?"var(--bs-primary)":(null==t?void 0:t.status)==="error"?"var(--bs-danger)":(null==t?void 0:t.status)==="warning"?"var(--bs-warning)":"var(--bs-info)"},autoClose:2e3,bodyStyle:{fontSize:16,fontWeight:500}});var i=n(2173),a=n(3797);console.log(!0);let s=i.Z.create({baseURL:"https://maytinhthunguyen.com/api"});i.Z.defaults.withCredentials=!0,s.defaults.headers.common.Authorization="Bearer ".concat((0,a.$c)(a.B$.ACCESS_TOKEN)),i.Z.interceptors.request.use(function(e){return e.headers.Authorization="Bearer ".concat((0,a.$c)(a.B$.ACCESS_TOKEN)),e.headers["Content-Type"]="application/json",e},function(e){return console.log(e),Promise.reject(e)});var o=n(1362)},5364:function(e,t,n){"use strict";n.d(t,{$B:function(){return d},Zz:function(){return a},FZ:function(){return o},qX:function(){return x},vF:function(){return f},xq:function(){return b},wE:function(){return j},Y$:function(){return p}});var r=n(9077),c=n(7182);let i=async e=>await c.p7.post("/auth/login",e),a=()=>(0,r.useMutation)(i),s=async e=>await c.p7.post("/auth/register",e),o=()=>(0,r.useMutation)(s);var l=n(3647);let u=async e=>await c.p7.post("/cart",e,{headers:{Authorization:"Bearer ".concat((0,c.$c)(c.B$.ACCESS_TOKEN))}}),d=()=>{let e=(0,r.useQueryClient)();return(0,r.useMutation)(u,{onSuccess(t,n,r){let c=(0,l.xE)();e.fetchQuery({queryKey:c})}})},h=async e=>{let{id:t,data:n}=e;return await c.p7.put("/cart/".concat(t),n,{headers:{Authorization:"Bearer ".concat((0,c.$c)(c.B$.ACCESS_TOKEN))}})},p=()=>{let e=(0,r.useQueryClient)();return(0,r.useMutation)(h,{onSuccess(t){let{data:n}=t,r=(0,l.xE)();e.fetchQuery({queryKey:r})}})},m=async e=>{let{id:t}=e;return await c.p7.delete("/cart/".concat(t),{headers:{Authorization:"Bearer ".concat((0,c.$c)(c.B$.ACCESS_TOKEN))}})},f=()=>{let e=(0,r.useQueryClient)();return(0,r.useMutation)(m,{onSuccess(t){let{data:n}=t,r=(0,l.xE)();e.fetchQuery({queryKey:r})}})},v=async e=>await c.p7.post("/product",e,{headers:{Authorization:"Bearer ".concat((0,c.$c)(c.B$.ACCESS_TOKEN))}}),x=()=>{let e=(0,r.useQueryClient)();return(0,r.useMutation)(v,{onSuccess(t){let{data:n}=t,r=(0,l.be)();e.refetchQueries({queryKey:r})}})},y=async e=>await c.p7.put("/product/".concat(e.id),e,{headers:{Authorization:"Bearer ".concat((0,c.$c)(c.B$.ACCESS_TOKEN))}}),j=()=>{let e=(0,r.useQueryClient)();return(0,r.useMutation)(y,{onSuccess(t){let{data:n}=t,r=(0,l.be)();e.refetchQueries({queryKey:r})}})},g=async e=>await c.p7.delete("/product/".concat(e.id),{headers:{Authorization:"Bearer ".concat((0,c.$c)(c.B$.ACCESS_TOKEN))}}),b=()=>{let e=(0,r.useQueryClient)();return(0,r.useMutation)(g,{onSuccess(t){let{data:n}=t,r=(0,l.be)();e.refetchQueries({queryKey:r})}})}},3647:function(e,t,n){"use strict";n.d(t,{be:function(){return l},xE:function(){return a},iu:function(){return u},rj:function(){return s}});var r=n(9077),c=n(7182);let i=async()=>await c.p7.get("/auth/check-is-login",{headers:{Authorization:"Bearer ".concat((0,c.$c)(c.B$.ACCESS_TOKEN))}}),a=()=>["is-user-logined"],s=()=>(0,r.useQuery)({queryKey:a(),queryFn:i,staleTime:0,cacheTime:0,refetchIntervalInBackground:!0,refetchOnReconnect:!0}),o=async()=>await c.p7.get("/product"),l=()=>["get-products"],u=()=>(0,r.useQuery)({queryKey:l(),queryFn:o,staleTime:5e3,cacheTime:5e3})},3274:function(){},1636:function(){},4033:function(e,t,n){e.exports=n(5313)},8366:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var c in t=arguments[n])Object.prototype.hasOwnProperty.call(t,c)&&(e[c]=t[c]);return e}).apply(this,arguments)},c=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var c=Object.getOwnPropertyDescriptor(t,n);(!c||("get"in c?!t.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,c)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&c(t,e,n);return i(t,e),t},s=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var c=0,r=Object.getOwnPropertySymbols(e);c<r.length;c++)0>t.indexOf(r[c])&&Object.prototype.propertyIsEnumerable.call(e,r[c])&&(n[r[c]]=e[r[c]]);return n};Object.defineProperty(t,"__esModule",{value:!0});var o=a(n(2265)),l=n(581),u=(0,n(9981).createAnimation)("PulseLoader","0% {transform: scale(1); opacity: 1} 45% {transform: scale(0.1); opacity: 0.7} 80% {transform: scale(1); opacity: 1}","pulse");t.default=function(e){var t=e.loading,n=e.color,c=void 0===n?"#000000":n,i=e.speedMultiplier,a=void 0===i?1:i,d=e.cssOverride,h=e.size,p=void 0===h?15:h,m=e.margin,f=void 0===m?2:m,v=s(e,["loading","color","speedMultiplier","cssOverride","size","margin"]),x=r({display:"inherit"},void 0===d?{}:d),y=function(e){return{backgroundColor:c,width:(0,l.cssValue)(p),height:(0,l.cssValue)(p),margin:(0,l.cssValue)(f),borderRadius:"100%",display:"inline-block",animation:"".concat(u," ").concat(.75/a,"s ").concat(.12*e/a,"s infinite cubic-bezier(0.2, 0.68, 0.18, 1.08)"),animationFillMode:"both"}};return void 0===t||t?o.createElement("span",r({style:x},v),o.createElement("span",{style:y(1)}),o.createElement("span",{style:y(2)}),o.createElement("span",{style:y(3)})):null}},9981:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createAnimation=void 0,t.createAnimation=function(e,t,n){var r="react-spinners-".concat(e,"-").concat(n);if("undefined"==typeof window||!window.document)return r;var c=document.createElement("style");document.head.appendChild(c);var i=c.sheet,a="\n    @keyframes ".concat(r," {\n      ").concat(t,"\n    }\n  ");return i&&i.insertRule(a,0),r}},581:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.cssValue=t.parseLengthAndUnit=void 0;var n={cm:!0,mm:!0,in:!0,px:!0,pt:!0,pc:!0,em:!0,ex:!0,ch:!0,rem:!0,vw:!0,vh:!0,vmin:!0,vmax:!0,"%":!0};function r(e){if("number"==typeof e)return{value:e,unit:"px"};var t,r=(e.match(/^[0-9.]*/)||"").toString();t=r.includes(".")?parseFloat(r):parseInt(r,10);var c=(e.match(/[^0-9]*$/)||"").toString();return n[c]?{value:t,unit:c}:(console.warn("React Spinners: ".concat(e," is not a valid css value. Defaulting to ").concat(t,"px.")),{value:t,unit:"px"})}t.parseLengthAndUnit=r,t.cssValue=function(e){var t=r(e);return"".concat(t.value).concat(t.unit)}}},function(e){e.O(0,[366,180,859,42,526,971,938,744],function(){return e(e.s=1021)}),_N_E=e.O()}]);