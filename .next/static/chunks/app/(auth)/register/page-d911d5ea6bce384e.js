(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[566],{5565:function(e,r,t){Promise.resolve().then(t.bind(t,7819))},7819:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return h}});var n=t(7437),s=t(1396),a=t.n(s),c=t(2265);t(8200);var o=t(1365),i=t(7182);let l={REGISTER_ACCOUNT_SUCCESSFUL:"Đăng k\xed t\xe0i khoản th\xe0nh c\xf4ng, mời bạn đăng nhập !"};var u=t(4033),d=t(5364);function h(){let e=(0,u.useRouter)(),[r,t]=(0,c.useState)({fullName:"",email:"",address:"",sex:"female",phone:"",birthday:"",password:"",confirmPassword:""}),s=e=>{let{value:r,name:n}=e.target;t(e=>({...e,[n]:r}))},{mutateAsync:h}=(0,d.FZ)(),m=e=>{switch(e){case"fullName":return"họ v\xe0 t\xean";case"email":return"email";case"address":return"địa chỉ";case"phone":return"số điện thoại";case"birthday":return"ng\xe0y sinh";case"password":return"mật khẩu";case"confirmPassword":return"nhập lại mật khẩu"}};return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("section",{className:"ftco-section",children:(0,n.jsxs)("div",{className:"container",children:[(0,n.jsx)("div",{className:"row justify-content-center",children:(0,n.jsx)("div",{className:"col-md-6 text-center mb-5",children:(0,n.jsx)("h2",{className:"heading-section",children:"Đăng k\xed"})})}),(0,n.jsx)("div",{className:"row justify-content-center",children:(0,n.jsx)("div",{className:"col-md-12 col-lg-10",children:(0,n.jsxs)("div",{className:"wrap d-md-flex",children:[(0,n.jsx)("div",{className:"text-wrap p-4 p-lg-5 text-center d-flex align-items-center order-md-last",children:(0,n.jsxs)("div",{className:"text w-100",children:[(0,n.jsx)("h2",{children:"Ch\xe0o mừng bạn đăng k\xed"}),(0,n.jsx)(a(),{href:o.Z.LOGIN,className:"login-wrap btn btn-primary border-white p-3 mt-4",prefetch:!0,children:"Đăng nhập"})]})}),(0,n.jsxs)("div",{className:"login-wrap p-4 p-lg-5",children:[(0,n.jsx)("div",{className:"d-flex",children:(0,n.jsx)("div",{className:"w-100",children:(0,n.jsx)("h3",{className:"mb-4",children:"Đăng k\xed"})})}),(0,n.jsxs)("form",{action:"#",className:"signin-form",onSubmit:t=>{try{for(let e in t.preventDefault(),r)if(Object.prototype.hasOwnProperty.call(r,e)&&!r[e]){(0,i.Dd)("Trường ".concat(m(e)," kh\xf4ng được trống !"),{status:"warning"});return}h(r).then(r=>{201===r.status&&((0,i.Dd)(l.REGISTER_ACCOUNT_SUCCESSFUL,{status:"success"}),e.push(o.Z.LOGIN))}).catch(e=>{let{message:r}=e.response.data;Array.isArray(r)&&r.length>0?(0,i.Dd)(r[0],{status:"error"}):(0,i.Dd)(r,{status:"error"})})}catch(e){}},children:[(0,n.jsxs)("div",{className:"row",children:[(0,n.jsxs)("div",{className:"form-group mb-3 col-6",children:[(0,n.jsx)("label",{className:"label",htmlFor:"fullName",children:"Họ v\xe0 t\xean"}),(0,n.jsx)("input",{onChange:s,id:"fullName",name:"fullName",className:"form-control",placeholder:"Họ v\xe0 t\xean"})]}),(0,n.jsxs)("div",{className:"form-group mb-3 col-6",children:[(0,n.jsx)("label",{className:"label",htmlFor:"email",children:"Email"}),(0,n.jsx)("input",{onChange:s,id:"email",type:"text",className:"form-control",placeholder:"Email",name:"email"})]}),(0,n.jsxs)("div",{className:"form-group mb-3 col-6",children:[(0,n.jsx)("label",{className:"label",htmlFor:"address",children:"Địa chỉ"}),(0,n.jsx)("input",{onChange:s,name:"address",id:"address",className:"form-control",placeholder:"Địa chỉ"})]}),(0,n.jsxs)("div",{className:"form-group mb-3 col-6",children:[(0,n.jsx)("label",{className:"label",htmlFor:"sex",children:"Giới t\xednh"}),(0,n.jsx)("div",{className:"mb-3",children:(0,n.jsxs)("select",{onChange:s,className:"form-select border-1 rounded-pill form-control",id:"sex",name:"sex",value:r.sex,children:[(0,n.jsx)("option",{value:"male",children:"Nam"}),(0,n.jsx)("option",{value:"female",children:"Nữ"})]})})]}),(0,n.jsxs)("div",{className:"form-group mb-3 col-6",children:[(0,n.jsx)("label",{className:"label",htmlFor:"phone",children:"Số điện thoại"}),(0,n.jsx)("input",{onChange:s,type:"number",className:"form-control",placeholder:"Số điện thoại",name:"phone",id:"phone"})]}),(0,n.jsxs)("div",{className:"form-group mb-3 col-6",children:[(0,n.jsx)("label",{className:"label",htmlFor:"birthday",children:"Ng\xe0y sinh"}),(0,n.jsx)("input",{onChange:s,className:"form-control",type:"date",name:"birthday",id:"birthday"})]}),(0,n.jsxs)("div",{className:"form-group mb-3 col-6",children:[(0,n.jsx)("label",{className:"label",htmlFor:"password",children:"Mật khẩu"}),(0,n.jsx)("input",{onChange:s,className:"form-control",placeholder:"mật khẩu",name:"password",id:"password",type:"password"})]}),(0,n.jsxs)("div",{className:"form-group mb-3 col-6",children:[(0,n.jsx)("label",{className:"label",htmlFor:"confirmPassword",children:"Nhập lại mật khẩu"}),(0,n.jsx)("input",{type:"password",onChange:s,className:"form-control",placeholder:"Nhập lại mật khẩu",name:"confirmPassword",id:"confirmPassword"})]})]}),(0,n.jsx)("div",{className:"form-group",children:(0,n.jsx)("button",{type:"submit",className:"form-control btn btn-primary  px-3",children:"Đăng k\xed"})})]})]})]})})})]})})})}},1365:function(e,r,t){"use strict";t.d(r,{Z:function(){return n},A:function(){return s}});let n={HOME:"/",CART:"/cart",SHOP:"/shop",LOGIN:"/login",ORDER:"/order",REGISTER:"/register",DASHBOARD:"/dashboard",DASHBOARD_PRODUCT:"/dashboard/product",DASHBOARD_ORDER:"/dashboard/order"},s={HOME:"Trang chủ",CART:"Giỏ h\xe0ng",SHOP:"Mua sắm"}},1362:function(e,r,t){"use strict";t.d(r,{$c:function(){return c},B$:function(){return s},EU:function(){return a},UK:function(){return o}});var n=t(7713);let s={ACCESS_TOKEN:"access_token"},a=(e,r,t)=>(0,n.setCookie)(e,r,{expires:new Date(new Date().getTime()+6048e5)}),c=e=>(0,n.getCookie)(e),o=e=>(0,n.deleteCookie)(e)},3797:function(e,r,t){"use strict";t.d(r,{B$:function(){return n.B$},Bi:function(){return i},$c:function(){return n.$c},Cg:function(){return o}});var n=t(1362),s=t(2265),a=t(9077);(0,s.cache)(()=>new a.QueryClient),t(8526);var c=t(7182);let o=(e,r)=>{var t;return(null==e?void 0:null===(t=e.response)||void 0===t?void 0:t.status)===401?(0,c.Dd)(r,{status:"error"}):(0,c.Dd)("Cửa h\xe0ng đang bận, vui l\xf2ng trở lại sau \xedt ph\xfat nữa",{status:"error"})},i=e=>{let r=new Date(e);return null==r?void 0:r.toLocaleDateString("en-GB")}},7182:function(e,r,t){"use strict";t.d(r,{B$:function(){return i.B$},p7:function(){return o},UK:function(){return i.UK},$c:function(){return i.$c},EU:function(){return i.EU},Dd:function(){return s}});var n=t(171);let s=(e,r)=>(0,n.toast)(e,{progressStyle:{background:(null==r?void 0:r.status)==="success"?"var(--bs-primary)":(null==r?void 0:r.status)==="error"?"var(--bs-danger)":(null==r?void 0:r.status)==="warning"?"var(--bs-warning)":"var(--bs-info)"},autoClose:2e3,bodyStyle:{fontSize:16,fontWeight:500}});var a=t(2173),c=t(3797);console.log(!0);let o=a.Z.create({baseURL:"https://maytinhthunguyen.com/api"});a.Z.defaults.withCredentials=!0,o.defaults.headers.common.Authorization="Bearer ".concat((0,c.$c)(c.B$.ACCESS_TOKEN)),a.Z.interceptors.request.use(function(e){return e.headers.Authorization="Bearer ".concat((0,c.$c)(c.B$.ACCESS_TOKEN)),e.headers["Content-Type"]="application/json",e},function(e){return console.log(e),Promise.reject(e)});var i=t(1362)},5364:function(e,r,t){"use strict";t.d(r,{$B:function(){return d},Zz:function(){return c},FZ:function(){return i},qX:function(){return g},vF:function(){return f},xq:function(){return v},wE:function(){return y},Y$:function(){return m}});var n=t(9077),s=t(7182);let a=async e=>await s.p7.post("/auth/login",e),c=()=>(0,n.useMutation)(a),o=async e=>await s.p7.post("/auth/register",e),i=()=>(0,n.useMutation)(o);var l=t(3647);let u=async e=>await s.p7.post("/cart",e,{headers:{Authorization:"Bearer ".concat((0,s.$c)(s.B$.ACCESS_TOKEN))}}),d=()=>{let e=(0,n.useQueryClient)();return(0,n.useMutation)(u,{onSuccess(r,t,n){let s=(0,l.xE)();e.fetchQuery({queryKey:s})}})},h=async e=>{let{id:r,data:t}=e;return await s.p7.put("/cart/".concat(r),t,{headers:{Authorization:"Bearer ".concat((0,s.$c)(s.B$.ACCESS_TOKEN))}})},m=()=>{let e=(0,n.useQueryClient)();return(0,n.useMutation)(h,{onSuccess(r){let{data:t}=r,n=(0,l.xE)();e.fetchQuery({queryKey:n})}})},p=async e=>{let{id:r}=e;return await s.p7.delete("/cart/".concat(r),{headers:{Authorization:"Bearer ".concat((0,s.$c)(s.B$.ACCESS_TOKEN))}})},f=()=>{let e=(0,n.useQueryClient)();return(0,n.useMutation)(p,{onSuccess(r){let{data:t}=r,n=(0,l.xE)();e.fetchQuery({queryKey:n})}})},N=async e=>await s.p7.post("/product",e,{headers:{Authorization:"Bearer ".concat((0,s.$c)(s.B$.ACCESS_TOKEN))}}),g=()=>{let e=(0,n.useQueryClient)();return(0,n.useMutation)(N,{onSuccess(r){let{data:t}=r,n=(0,l.be)();e.refetchQueries({queryKey:n})}})},x=async e=>await s.p7.put("/product/".concat(e.id),e,{headers:{Authorization:"Bearer ".concat((0,s.$c)(s.B$.ACCESS_TOKEN))}}),y=()=>{let e=(0,n.useQueryClient)();return(0,n.useMutation)(x,{onSuccess(r){let{data:t}=r,n=(0,l.be)();e.refetchQueries({queryKey:n})}})},b=async e=>await s.p7.delete("/product/".concat(e.id),{headers:{Authorization:"Bearer ".concat((0,s.$c)(s.B$.ACCESS_TOKEN))}}),v=()=>{let e=(0,n.useQueryClient)();return(0,n.useMutation)(b,{onSuccess(r){let{data:t}=r,n=(0,l.be)();e.refetchQueries({queryKey:n})}})}},3647:function(e,r,t){"use strict";t.d(r,{be:function(){return l},xE:function(){return c},iu:function(){return u},rj:function(){return o}});var n=t(9077),s=t(7182);let a=async()=>await s.p7.get("/auth/check-is-login",{headers:{Authorization:"Bearer ".concat((0,s.$c)(s.B$.ACCESS_TOKEN))}}),c=()=>["is-user-logined"],o=()=>(0,n.useQuery)({queryKey:c(),queryFn:a,staleTime:0,cacheTime:0,refetchIntervalInBackground:!0,refetchOnReconnect:!0}),i=async()=>await s.p7.get("/product"),l=()=>["get-products"],u=()=>(0,n.useQuery)({queryKey:l(),queryFn:i,staleTime:5e3,cacheTime:5e3})},8200:function(){},4033:function(e,r,t){e.exports=t(5313)}},function(e){e.O(0,[366,180,396,526,971,938,744],function(){return e(e.s=5565)}),_N_E=e.O()}]);