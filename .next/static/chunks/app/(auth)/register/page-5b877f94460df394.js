(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9566],{5565:function(e,t,n){Promise.resolve().then(n.bind(n,7819))},7819:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return h}});var r=n(7437),a=n(1396),s=n.n(a),i=n(2265),c=n(1365),l=n(6778);let o={REGISTER_ACCOUNT_SUCCESSFUL:"Đăng k\xed t\xe0i khoản th\xe0nh c\xf4ng, mời bạn đăng nhập !"};var u=n(4033),d=n(553);function h(){let e=(0,u.useRouter)(),[t,n]=(0,i.useState)({fullName:"",email:"",address:"",sex:"female",phone:"",birthday:"",password:"",confirmPassword:""}),a=e=>{let{value:t,name:r}=e.target;n(e=>({...e,[r]:t}))},{mutateAsync:h}=(0,d.FZ)(),m=e=>{switch(e){case"fullName":return"họ v\xe0 t\xean";case"email":return"email";case"address":return"địa chỉ";case"phone":return"số điện thoại";case"birthday":return"ng\xe0y sinh";case"password":return"mật khẩu";case"confirmPassword":return"nhập lại mật khẩu"}};return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("section",{className:"ftco-section",children:(0,r.jsxs)("div",{className:"container",children:[(0,r.jsx)("div",{className:"row justify-content-center",children:(0,r.jsx)("div",{className:"col-md-6 text-center mb-5",children:(0,r.jsx)("h2",{className:"heading-section",children:"Đăng k\xed"})})}),(0,r.jsx)("div",{className:"row justify-content-center",children:(0,r.jsx)("div",{className:"col-md-12 col-lg-10",children:(0,r.jsxs)("div",{className:"wrap d-md-flex",children:[(0,r.jsx)("div",{className:"text-wrap p-4 p-lg-5 text-center d-flex align-items-center order-md-last",children:(0,r.jsxs)("div",{className:"text w-100",children:[(0,r.jsx)("h2",{children:"Ch\xe0o mừng bạn đăng k\xed"}),(0,r.jsx)(s(),{href:"#",onClick:()=>window.location.href=c.Z.LOGIN,className:"login-wrap btn btn-primary border-white p-3 mt-4",prefetch:!0,children:"Đăng nhập"})]})}),(0,r.jsxs)("div",{className:"login-wrap p-4 p-lg-6",children:[(0,r.jsx)("div",{className:"d-flex",children:(0,r.jsx)("div",{className:"w-100",children:(0,r.jsx)("h3",{className:"mb-4",children:"Đăng k\xed"})})}),(0,r.jsxs)("form",{action:"#",className:"signin-form",onSubmit:n=>{try{for(let e in n.preventDefault(),t)if(Object.prototype.hasOwnProperty.call(t,e)&&!t[e]){(0,l.Dd)("Trường ".concat(m(e)," kh\xf4ng được trống !"),{status:"warning"});return}h(t).then(t=>{201===t.status&&((0,l.Dd)(o.REGISTER_ACCOUNT_SUCCESSFUL,{status:"success"}),e.push(c.Z.LOGIN))}).catch(e=>{let{message:t}=e.response.data;Array.isArray(t)&&t.length>0?(0,l.Dd)(t[0],{status:"error"}):(0,l.Dd)(t,{status:"error"})})}catch(e){}},children:[(0,r.jsxs)("div",{className:"row",children:[(0,r.jsxs)("div",{className:"form-group mb-3 col-6",children:[(0,r.jsx)("label",{className:"label",htmlFor:"fullName",children:"Họ v\xe0 t\xean"}),(0,r.jsx)("input",{onChange:a,id:"fullName",name:"fullName",className:"form-control",placeholder:"Họ v\xe0 t\xean"})]}),(0,r.jsxs)("div",{className:"form-group mb-3 col-6",children:[(0,r.jsx)("label",{className:"label",htmlFor:"email",children:"Email"}),(0,r.jsx)("input",{onChange:a,id:"email",type:"text",className:"form-control",placeholder:"Email",name:"email"})]}),(0,r.jsxs)("div",{className:"form-group mb-3 col-6",children:[(0,r.jsx)("label",{className:"label",htmlFor:"address",children:"Địa chỉ"}),(0,r.jsx)("input",{onChange:a,name:"address",id:"address",className:"form-control",placeholder:"Địa chỉ"})]}),(0,r.jsxs)("div",{className:"form-group mb-3 col-6",children:[(0,r.jsx)("label",{className:"label",htmlFor:"sex",children:"Giới t\xednh"}),(0,r.jsx)("div",{className:"mb-3",children:(0,r.jsxs)("select",{onChange:a,className:"form-select border-1 form-control",id:"sex",name:"sex",value:t.sex,children:[(0,r.jsx)("option",{value:"male",children:"Nam"}),(0,r.jsx)("option",{value:"female",children:"Nữ"})]})})]}),(0,r.jsxs)("div",{className:"form-group mb-3 col-6",children:[(0,r.jsx)("label",{className:"label",htmlFor:"phone",children:"Số điện thoại"}),(0,r.jsx)("input",{onChange:a,type:"number",className:"form-control",placeholder:"Số điện thoại",name:"phone",id:"phone"})]}),(0,r.jsxs)("div",{className:"form-group mb-3 col-6",children:[(0,r.jsx)("label",{className:"label",htmlFor:"birthday",children:"Ng\xe0y sinh"}),(0,r.jsx)("input",{onChange:a,className:"form-control",type:"date",name:"birthday",id:"birthday"})]}),(0,r.jsxs)("div",{className:"form-group mb-3 col-6",children:[(0,r.jsx)("label",{className:"label",htmlFor:"password",children:"Mật khẩu"}),(0,r.jsx)("input",{onChange:a,className:"form-control",placeholder:"mật khẩu",name:"password",id:"password",type:"password"})]}),(0,r.jsxs)("div",{className:"form-group mb-3 col-6",children:[(0,r.jsx)("label",{className:"label",htmlFor:"confirmPassword",children:"Nhập lại mật khẩu"}),(0,r.jsx)("input",{type:"password",onChange:a,className:"form-control",placeholder:"Nhập lại mật khẩu",name:"confirmPassword",id:"confirmPassword"})]})]}),(0,r.jsx)("div",{className:"form-group",children:(0,r.jsx)("button",{type:"submit",className:"form-control btn btn-primary  px-3",children:"Đăng k\xed"})})]})]})]})})})]})})})}n(4050),n(2462),n(8200)},1365:function(e,t,n){"use strict";n.d(t,{Z:function(){return r},A:function(){return a}});let r={HOME:"/",CART:"/cart",SHOP:"/shop",SHOP_DETAIL:"/shop-detail",POST_DETAIL:"/post-detail",LOGIN:"/login",ORDER:"/order",REGISTER:"/register",DASHBOARD:"/dashboard",DASHBOARD_PRODUCT:"/dashboard/product",DASHBOARD_ORDER:"/dashboard/order",DASHBOARD_CATEGORIES:"/dashboard/categories",DASHBOARD_POST:"/dashboard/post"},a={HOME:"Trang chủ",CART:"Giỏ h\xe0ng",SHOP:"Mua sắm"}},553:function(e,t,n){"use strict";n.d(t,{Zz:function(){return i},FZ:function(){return l},nS:function(){return b},u3:function(){return O},qX:function(){return f},vF:function(){return m},h5:function(){return S},xq:function(){return g},P7:function(){return j},wE:function(){return N},Y$:function(){return d}});var r=n(9077),a=n(6778);let s=async e=>await a.p7.post("/auth/login",e),i=()=>(0,r.useMutation)(s),c=async e=>await a.p7.post("/auth/register",e),l=()=>(0,r.useMutation)(c);var o=n(145);let u=async e=>{let{id:t,data:n}=e;return await a.p7.put("/cart/".concat(t),n,{headers:{Authorization:"Bearer ".concat((0,a.$c)(a.B$.ACCESS_TOKEN))}})},d=()=>{let e=(0,r.useQueryClient)();return(0,r.useMutation)(u,{onSuccess(t){let{data:n}=t,r=(0,o.xE)();e.setQueriesData(r,e=>{var t,r;let a=null==e?void 0:null===(r=e.data)||void 0===r?void 0:null===(t=r.cart)||void 0===t?void 0:t.map(e=>(null==e?void 0:e.id)===(null==n?void 0:n.id)?n:e);return e.data.cart=a,e})}})},h=async e=>{let{id:t}=e;return await a.p7.delete("/cart/".concat(t),{headers:{Authorization:"Bearer ".concat((0,a.$c)(a.B$.ACCESS_TOKEN))}})},m=()=>{let e=(0,r.useQueryClient)();return(0,r.useMutation)(h,{onSuccess(t){let{data:n}=t,r=(0,o.xE)();e.setQueriesData(r,e=>{var t,r;let a=null==e?void 0:null===(r=e.data)||void 0===r?void 0:null===(t=r.cart)||void 0===t?void 0:t.filter(e=>(null==e?void 0:e.id)!=(null==n?void 0:n.id));return e.data.cart=a,e})}})},p=async e=>await a.p7.post("/product",e,{headers:{Authorization:"Bearer ".concat((0,a.$c)(a.B$.ACCESS_TOKEN))}}),f=()=>{let e=(0,r.useQueryClient)();return(0,r.useMutation)(p,{onSuccess(t){let{data:n}=t,r=(0,o.be)();e.setQueriesData(r,e=>(e.data.unshift(n),{...e}))}})},y=async e=>await a.p7.put("/product/".concat(e.id),e,{headers:{Authorization:"Bearer ".concat((0,a.$c)(a.B$.ACCESS_TOKEN))}}),N=()=>{let e=(0,r.useQueryClient)();return(0,r.useMutation)(y,{onSuccess(t){let{data:n}=t,r=(0,o.be)();e.setQueriesData(r,e=>{let t=e.data.map(e=>(null==e?void 0:e.id)==(null==n?void 0:n.id)?n:e);return e.data=t,{...e}})}})},v=async e=>await a.p7.delete("/product/".concat(e.id),{headers:{Authorization:"Bearer ".concat((0,a.$c)(a.B$.ACCESS_TOKEN))}}),g=()=>{let e=(0,r.useQueryClient)();return(0,r.useMutation)(v,{onSuccess(t){let{data:n}=t,r=(0,o.be)();e.setQueriesData(r,e=>{var t;let r=null===(t=e.data)||void 0===t?void 0:t.filter(e=>(null==e?void 0:e.id)!=(null==n?void 0:n.id));return e.data=r,{...e}})}})},x=async e=>await a.p7.post("/categories",e,{headers:{Authorization:"Bearer ".concat((0,a.$c)(a.B$.ACCESS_TOKEN))}}),b=()=>{let e=(0,r.useQueryClient)();return(0,r.useMutation)(x,{onSuccess(t){let{data:n}=t,r=(0,o.TC)();e.setQueriesData(r,e=>{var t;return null==e||null===(t=e.data)||void 0===t||t.unshift(n),e})}})},C=async e=>{let{id:t}=e;return await a.p7.delete("/categories/".concat(t),{headers:{Authorization:"Bearer ".concat((0,a.$c)(a.B$.ACCESS_TOKEN))}})},S=()=>{let e=(0,r.useQueryClient)();return(0,r.useMutation)(C,{onSuccess(t){let{data:n}=t,r=(0,o.TC)();e.setQueriesData(r,e=>{var t,r;let a=null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.findIndex(e=>e.id==(null==n?void 0:n.id));return null==e||null===(r=e.data)||void 0===r||r.splice(a,1),e})}})},w=async e=>{let{id:t,data:n}=e;return await a.p7.put("/categories/".concat(t),n,{headers:{Authorization:"Bearer ".concat((0,a.$c)(a.B$.ACCESS_TOKEN))}})},j=()=>{let e=(0,r.useQueryClient)();return(0,r.useMutation)(w,{onSuccess(t){let{data:n}=t,r=(0,o.TC)();e.setQueriesData(r,e=>{let t=null==e?void 0:e.data.map(e=>e.id==(null==n?void 0:n.id)?n:e);return e.data=[...t],e})}})},E=async e=>await a.p7.post("/posts",e,{headers:{Authorization:"Bearer ".concat((0,a.$c)(a.B$.ACCESS_TOKEN))}}),O=()=>{let e=(0,r.useQueryClient)();return(0,r.useMutation)(E,{onSuccess(t){let{data:n}=t,r=(0,o.U6)();e.setQueriesData(r,e=>(e.data.unshift(n),{...e}))}})}},145:function(e,t,n){"use strict";n.d(t,{TC:function(){return f},U6:function(){return v},be:function(){return o},xE:function(){return i},L_:function(){return y},tn:function(){return C},Yi:function(){return g},cO:function(){return m},iu:function(){return u},rj:function(){return c}});var r=n(9077),a=n(6778);let s=async()=>await a.p7.get("/auth/check-is-login",{headers:{Authorization:"Bearer ".concat((0,a.$c)(a.B$.ACCESS_TOKEN))}}),i=()=>["is-user-logined"],c=()=>(0,r.useQuery)({queryKey:i(),queryFn:s,refetchOnWindowFocus:!1}),l=async()=>await a.p7.get("/product"),o=()=>["get-products"],u=()=>(0,r.useQuery)({queryKey:o(),queryFn:l,refetchOnWindowFocus:!1,cacheTime:432e5,staleTime:432e5}),d=async e=>{let{id:t}=e;return await a.p7.get("/product/".concat(t))},h=e=>["get-product",e],m=e=>{let{id:t}=e;return(0,r.useQuery)({queryFn:()=>d({id:t}),queryKey:h(t),refetchOnWindowFocus:!1,cacheTime:432e5,staleTime:432e5})},p=async()=>await a.p7.get("/categories"),f=()=>["get-categories"],y=()=>(0,r.useQuery)({queryKey:f(),queryFn:p,refetchOnWindowFocus:!1,cacheTime:432e5,staleTime:432e5}),N=async()=>await a.p7.get("/posts"),v=()=>["get-posts"],g=()=>(0,r.useQuery)({queryKey:v(),queryFn:N,refetchOnWindowFocus:!1,cacheTime:432e5,staleTime:432e5}),x=async e=>{let{id:t}=e;return await a.p7.get("/posts/".concat(t))},b=e=>["get-post",e],C=e=>{let{id:t}=e;return(0,r.useQuery)({queryFn:()=>x({id:t}),queryKey:b(t),refetchOnWindowFocus:!1,cacheTime:432e5,staleTime:432e5})}},2462:function(){},4050:function(){},8200:function(){},4033:function(e,t,n){e.exports=n(5313)}},function(e){e.O(0,[1201,1396,3538,3951,5780,2971,4938,1744],function(){return e(e.s=5565)}),_N_E=e.O()}]);