(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[665],{9012:function(e,t,n){Promise.resolve().then(n.bind(n,8664))},8664:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return h}});var r=n(7437),a=n(2265);n(8200);var s=n(1396),c=n.n(s),i=n(1365),u=n(7182),o=n(5364),l=n(4033),d=n(3797);function h(){let[e,t]=(0,a.useState)({email:"",password:""}),[n,s]=(0,a.useState)(!1),{mutateAsync:h}=(0,o.Zz)(),f=(0,l.useRouter)(),m=e=>{let{name:n,value:r}=e.target;t(e=>({...e,[n]:r}))},p=async t=>{try{for(let n in t.preventDefault(),e)if(Object.prototype.hasOwnProperty.call(e,n)&&!e[n]){(0,u.Dd)("".concat(n," kh\xf4ng được trống !"));return}s(!0),h(e).then(e=>{let{status:t,data:n}=e,{access_token:r}=n;if(201===t){var a;(0,u.EU)(u.B$.ACCESS_TOKEN,r),(null==n?void 0:null===(a=n.role)||void 0===a?void 0:a.name)==="SUPER_ADMIN"?f.push(i.Z.DASHBOARD):f.push(i.Z.HOME),s(!1)}}).catch(e=>{s(!1),(0,d.Cg)(e,"Email hoặc mật khẩu kh\xf4ng ch\xednh x\xe1c, vui l\xf2ng nhập lại !")})}catch(e){}};return(0,r.jsx)("section",{className:"ftco-section",children:(0,r.jsxs)("div",{className:"container",children:[(0,r.jsx)("div",{className:"row justify-content-center",children:(0,r.jsx)("div",{className:"col-md-6 text-center mb-5",children:(0,r.jsx)("h2",{className:"heading-section",children:"Đăng nhập"})})}),(0,r.jsx)("div",{className:"row justify-content-center",children:(0,r.jsx)("div",{className:"col-md-12 col-lg-10",children:(0,r.jsxs)("div",{className:"wrap d-md-flex",children:[(0,r.jsx)("div",{className:"text-wrap p-4 p-lg-5 text-center d-flex align-items-center order-md-last",children:(0,r.jsxs)("div",{className:"text w-100",children:[(0,r.jsx)("h2",{children:"Ch\xe0o mừng bạn đăng nhập"}),(0,r.jsx)("p",{children:"Bạn c\xf3 t\xe0i khoản chưa ?"}),(0,r.jsx)(c(),{href:i.Z.REGISTER,className:"login-wrap btn btn-primary border-white mt-4 p-3",prefetch:!0,children:"Đăng k\xed"})]})}),(0,r.jsxs)("div",{className:"login-wrap p-4 p-lg-5",children:[(0,r.jsx)("div",{className:"d-flex",children:(0,r.jsx)("div",{className:"w-100",children:(0,r.jsx)("h3",{className:"mb-4",children:"Đăng nhập"})})}),(0,r.jsxs)("form",{action:"#",className:"signin-form",onSubmit:p,children:[(0,r.jsxs)("div",{className:"form-group mb-3",children:[(0,r.jsx)("label",{className:"label",htmlFor:"name",children:"Email"}),(0,r.jsx)("input",{type:"text",className:"form-control",placeholder:"Email",name:"email",onChange:m})]}),(0,r.jsxs)("div",{className:"form-group mb-3",children:[(0,r.jsx)("label",{className:"label",htmlFor:"password",children:"Mật khẩu"}),(0,r.jsx)("input",{type:"password",className:"form-control border-1",placeholder:"Mật khẩu",name:"password",onChange:m})]}),(0,r.jsx)("div",{className:"form-group",children:(0,r.jsx)("button",{type:"submit",className:"form-control btn btn-primary submit px-3",children:n?(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("div",{className:"spinner-border spinner-border-sm text-primary",role:"status"})}):"Đăng nhập"})}),(0,r.jsx)("div",{className:"form-group d-md-flex",children:(0,r.jsx)("div",{className:"w-50 text-md-right",children:(0,r.jsx)("a",{href:"#",children:"Qu\xean mật khẩu ?"})})})]})]})]})})})]})})}},1365:function(e,t,n){"use strict";n.d(t,{Z:function(){return r},A:function(){return a}});let r={HOME:"/",CART:"/cart",SHOP:"/shop",LOGIN:"/login",ORDER:"/order",REGISTER:"/register",DASHBOARD:"/dashboard",DASHBOARD_PRODUCT:"/dashboard/product",DASHBOARD_ORDER:"/dashboard/order"},a={HOME:"Trang chủ",CART:"Giỏ h\xe0ng",SHOP:"Mua sắm"}},1362:function(e,t,n){"use strict";n.d(t,{$c:function(){return c},B$:function(){return a},EU:function(){return s},UK:function(){return i}});var r=n(7713);let a={ACCESS_TOKEN:"access_token"},s=(e,t,n)=>(0,r.setCookie)(e,t,{expires:new Date(new Date().getTime()+6048e5)}),c=e=>(0,r.getCookie)(e),i=e=>(0,r.deleteCookie)(e)},3797:function(e,t,n){"use strict";n.d(t,{B$:function(){return r.B$},Bi:function(){return u},$c:function(){return r.$c},Cg:function(){return i}});var r=n(1362),a=n(2265),s=n(9077);(0,a.cache)(()=>new s.QueryClient),n(8526);var c=n(7182);let i=(e,t)=>{var n;return(null==e?void 0:null===(n=e.response)||void 0===n?void 0:n.status)===401?(0,c.Dd)(t,{status:"error"}):(0,c.Dd)("Cửa h\xe0ng đang bận, vui l\xf2ng trở lại sau \xedt ph\xfat nữa",{status:"error"})},u=e=>{let t=new Date(e);return null==t?void 0:t.toLocaleDateString("en-GB")}},7182:function(e,t,n){"use strict";n.d(t,{B$:function(){return u.B$},p7:function(){return i},UK:function(){return u.UK},$c:function(){return u.$c},EU:function(){return u.EU},Dd:function(){return a}});var r=n(171);let a=(e,t)=>(0,r.toast)(e,{progressStyle:{background:(null==t?void 0:t.status)==="success"?"var(--bs-primary)":(null==t?void 0:t.status)==="error"?"var(--bs-danger)":(null==t?void 0:t.status)==="warning"?"var(--bs-warning)":"var(--bs-info)"},autoClose:2e3,bodyStyle:{fontSize:16,fontWeight:500}});var s=n(2173),c=n(3797);console.log(!0);let i=s.Z.create({baseURL:"https://maytinhthunguyen.com/api"});s.Z.defaults.withCredentials=!0,i.defaults.headers.common.Authorization="Bearer ".concat((0,c.$c)(c.B$.ACCESS_TOKEN)),s.Z.interceptors.request.use(function(e){return e.headers.Authorization="Bearer ".concat((0,c.$c)(c.B$.ACCESS_TOKEN)),e.headers["Content-Type"]="application/json",e},function(e){return console.log(e),Promise.reject(e)});var u=n(1362)},5364:function(e,t,n){"use strict";n.d(t,{$B:function(){return d},Zz:function(){return c},FZ:function(){return u},qX:function(){return g},vF:function(){return p},xq:function(){return C},wE:function(){return v},Y$:function(){return f}});var r=n(9077),a=n(7182);let s=async e=>await a.p7.post("/auth/login",e),c=()=>(0,r.useMutation)(s),i=async e=>await a.p7.post("/auth/register",e),u=()=>(0,r.useMutation)(i);var o=n(3647);let l=async e=>await a.p7.post("/cart",e,{headers:{Authorization:"Bearer ".concat((0,a.$c)(a.B$.ACCESS_TOKEN))}}),d=()=>{let e=(0,r.useQueryClient)();return(0,r.useMutation)(l,{onSuccess(t,n,r){let a=(0,o.xE)();e.fetchQuery({queryKey:a})}})},h=async e=>{let{id:t,data:n}=e;return await a.p7.put("/cart/".concat(t),n,{headers:{Authorization:"Bearer ".concat((0,a.$c)(a.B$.ACCESS_TOKEN))}})},f=()=>{let e=(0,r.useQueryClient)();return(0,r.useMutation)(h,{onSuccess(t){let{data:n}=t,r=(0,o.xE)();e.fetchQuery({queryKey:r})}})},m=async e=>{let{id:t}=e;return await a.p7.delete("/cart/".concat(t),{headers:{Authorization:"Bearer ".concat((0,a.$c)(a.B$.ACCESS_TOKEN))}})},p=()=>{let e=(0,r.useQueryClient)();return(0,r.useMutation)(m,{onSuccess(t){let{data:n}=t,r=(0,o.xE)();e.fetchQuery({queryKey:r})}})},y=async e=>await a.p7.post("/product",e,{headers:{Authorization:"Bearer ".concat((0,a.$c)(a.B$.ACCESS_TOKEN))}}),g=()=>{let e=(0,r.useQueryClient)();return(0,r.useMutation)(y,{onSuccess(t){let{data:n}=t,r=(0,o.be)();e.refetchQueries({queryKey:r})}})},x=async e=>await a.p7.put("/product/".concat(e.id),e,{headers:{Authorization:"Bearer ".concat((0,a.$c)(a.B$.ACCESS_TOKEN))}}),v=()=>{let e=(0,r.useQueryClient)();return(0,r.useMutation)(x,{onSuccess(t){let{data:n}=t,r=(0,o.be)();e.refetchQueries({queryKey:r})}})},E=async e=>await a.p7.delete("/product/".concat(e.id),{headers:{Authorization:"Bearer ".concat((0,a.$c)(a.B$.ACCESS_TOKEN))}}),C=()=>{let e=(0,r.useQueryClient)();return(0,r.useMutation)(E,{onSuccess(t){let{data:n}=t,r=(0,o.be)();e.refetchQueries({queryKey:r})}})}},3647:function(e,t,n){"use strict";n.d(t,{be:function(){return o},xE:function(){return c},iu:function(){return l},rj:function(){return i}});var r=n(9077),a=n(7182);let s=async()=>await a.p7.get("/auth/check-is-login",{headers:{Authorization:"Bearer ".concat((0,a.$c)(a.B$.ACCESS_TOKEN))}}),c=()=>["is-user-logined"],i=()=>(0,r.useQuery)({queryKey:c(),queryFn:s,staleTime:0,cacheTime:0,refetchIntervalInBackground:!0,refetchOnReconnect:!0}),u=async()=>await a.p7.get("/product"),o=()=>["get-products"],l=()=>(0,r.useQuery)({queryKey:o(),queryFn:u,staleTime:5e3,cacheTime:5e3})},8200:function(){},4033:function(e,t,n){e.exports=n(5313)}},function(e){e.O(0,[366,180,396,526,971,938,744],function(){return e(e.s=9012)}),_N_E=e.O()}]);