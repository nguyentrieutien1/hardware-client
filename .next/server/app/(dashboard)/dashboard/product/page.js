(()=>{var e={};e.id=311,e.ids=[311],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},1877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},5319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},9491:e=>{"use strict";e.exports=require("assert")},2361:e=>{"use strict";e.exports=require("events")},7147:e=>{"use strict";e.exports=require("fs")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},2037:e=>{"use strict";e.exports=require("os")},1017:e=>{"use strict";e.exports=require("path")},2781:e=>{"use strict";e.exports=require("stream")},6224:e=>{"use strict";e.exports=require("tty")},7310:e=>{"use strict";e.exports=require("url")},3837:e=>{"use strict";e.exports=require("util")},9796:e=>{"use strict";e.exports=require("zlib")},3279:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>d,routeModule:()=>h,tree:()=>o});var a=s(482),r=s(9108),n=s(2563),i=s.n(n),c=s(8300),l={};for(let e in c)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>c[e]);s.d(t,l);let o=["",{children:["(dashboard)",{children:["dashboard",{children:["product",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,152)),"G:\\computer-project\\client\\src\\app\\(dashboard)\\dashboard\\product\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,3858)),"G:\\computer-project\\client\\src\\app\\(dashboard)\\dashboard\\layout.tsx"]}]},{"not-found":[()=>Promise.resolve().then(s.t.bind(s,9361,23)),"next/dist/client/components/not-found-error"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,1342)),"G:\\computer-project\\client\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,9361,23)),"next/dist/client/components/not-found-error"]}],d=["G:\\computer-project\\client\\src\\app\\(dashboard)\\dashboard\\product\\page.tsx"],u="/(dashboard)/dashboard/product/page",p={require:s,loadChunk:()=>Promise.resolve()},h=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/(dashboard)/dashboard/product/page",pathname:"/dashboard/product",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},7423:(e,t,s)=>{Promise.resolve().then(s.bind(s,5534))},6313:(e,t,s)=>{"use strict";s.d(t,{l:()=>i});var a=s(2295),r=s(8154),n=s(9614);function i(e){let{modalIsOpen:t,closeModal:s,title:i,content:c,onConfirm:l,size:o}=e;return a.jsx(a.Fragment,{children:o?(0,a.jsxs)(n.Z,{size:o,backdrop:"static",show:t,onHide:()=>s(),children:[a.jsx(n.Z.Header,{closeButton:!1,children:a.jsx(n.Z.Title,{children:i})}),a.jsx(n.Z.Body,{children:c}),(0,a.jsxs)(n.Z.Footer,{children:[a.jsx(r.Z,{className:"p-2",variant:"secondary",onClick:()=>s(),children:"Đ\xf3ng"}),a.jsx(r.Z,{className:"p-2",variant:"success",onClick:()=>l(),children:"X\xe1c nhận"})]})]}):(0,a.jsxs)(n.Z,{backdrop:"static",show:t,onHide:()=>s(),children:[a.jsx(n.Z.Header,{closeButton:!1,children:a.jsx(n.Z.Title,{children:i})}),a.jsx(n.Z.Body,{children:c}),(0,a.jsxs)(n.Z.Footer,{children:[a.jsx(r.Z,{className:"p-2",size:"sm",variant:"secondary",onClick:()=>s(),children:"Đ\xf3ng"}),a.jsx(r.Z,{className:"p-2",size:"sm",variant:"success",onClick:()=>l(),children:"X\xe1c nhận"})]})]})})}},5534:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>j});var a=s(2295),r=s(3729),n=s(6313),i=s(4060),c=s(5711),l=s.n(c),o=s(1280),d=s(5772),u=s(98),p=s(2494),h=s(9927),m=s(9211),x=s(7322);function j(){let[e,t]=(0,r.useState)(!1),[s,c]=(0,r.useState)(!1),[j,g]=(0,r.useState)(1),[b,f]=(0,r.useState)([]),[v,y]=(0,r.useState)(!1),[N,C]=(0,r.useState)([]),[w,S]=(0,r.useState)({name:"",stock:1,price:null,description:"",id:null,categoriesId:null}),{data:$,isLoading:k}=(0,i.iu)(),E=$?.data,{mutateAsync:_,isLoading:q}=(0,d.qX)(),{mutateAsync:T,isLoading:A}=(0,d.wE)(),{mutateAsync:P,isLoading:B}=(0,d.xq)(),{data:D}=(0,i.L_)(),Z=()=>{S({name:"",stock:1,price:null,description:"",id:null})},M=e=>{let{name:t,value:s}=e.target;if(("price"===t||"stock"===t)&&s.length>9){(0,o.Dd)(`Vui l\xf2ng nhập đ\xfang số ${"price"===t?"tiền":"lượng"}`);return}S(e=>({...e,[t]:"price"===t||"stock"===t||"categoriesId"===t?+s:s}))},I=async()=>{for(let e in w)if(Object.prototype.hasOwnProperty.call(w,e)&&!w[e]&&"id"!==e){(0,o.Dd)(`C\xe1c trường phải đảm bảo kh\xf4ng được trống.`);return}if(v){let e=[];for(let t=0;t<b.length;t++)if(b[t]?.file){let s=new FormData;s.append("file",b[t]?.file);let a=await o.p7.post("/upload",s);e.push(a.data[0])}else e.push(b[t]);T({...w,images:e}).then(()=>{t(!1),y(!1),Z(),(0,o.Dd)("Cập nhật sản phẩm th\xe0nh c\xf4ng !",{status:"success"}),f([])})}else{delete w.id;let e=new FormData;b?.forEach((t,s)=>{e.append("file",t.file)});let s=await o.p7.post("/upload",e);_({...w,images:s.data?.map(e=>({name:e.originalname,url:e.url,size:e.size,type:e.type}))}).then(e=>{t(!1),Z(),(0,o.Dd)("Tạo sản phẩm th\xe0nh c\xf4ng !",{status:"success"}),f([])}).catch(e=>{(0,p.Cg)(e,"Tạo sản phẩm")})}},z=()=>{try{P({id:w.id}).then(()=>{Z(),c(!1),(0,o.Dd)("X\xf3a sản phẩm th\xe0nh c\xf4ng !",{status:"success"})})}catch(e){}};return(0,r.useEffect)(()=>{E&&C([...E])},[E?.length,E]),(0,a.jsxs)(a.Fragment,{children:[e&&a.jsx(n.l,{size:"lg",title:v?"Cập nhật sản phẩm":"Th\xeam sản phẩm",onConfirm:()=>I(),closeModal:()=>{t(!1),Z(),y(!1),f([])},modalIsOpen:e,content:a.jsx("div",{className:"col-12",children:a.jsx("div",{className:"card",children:a.jsx("div",{className:"card-body",children:a.jsx("form",{className:"forms-sample",children:(0,a.jsxs)("div",{className:"row",children:[(0,a.jsxs)("div",{className:"col-lg-6 col-sm-12",children:[(0,a.jsxs)("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"exampleInputName1",children:"T\xean sản phẩm"}),a.jsx("input",{onChange:M,type:"text",className:"form-control",id:"exampleInputName1",placeholder:"T\xean sản phẩm",name:"name",value:w?.name})]}),(0,a.jsxs)("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"exampleInputEmail3",children:"Số lượng sản phẩm"}),a.jsx("input",{onChange:M,type:"number",name:"stock",className:"form-control",id:"exampleInputEmail3",placeholder:"Số lượng sản phẩm",value:w?.stock})]}),(0,a.jsxs)("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"exampleInputPassword4",children:"Gi\xe1"}),a.jsx("input",{onChange:M,type:"number",name:"price",className:"form-control",id:"exampleInputPassword4",placeholder:"Gi\xe1",value:w?.price})]}),(0,a.jsxs)("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"exampleInputPassword5",children:"Danh mục"}),a.jsx("div",{className:"mb-3",children:(0,a.jsxs)("select",{className:"form-select form-group form-select-sm p-2",name:"categoriesId",onChange:M,id:"exampleInputPassword5",children:[a.jsx("option",{children:"chọn danh mục"}),D.data?.map(e=>a.jsx("option",{selected:w?.categoriesId==e?.id,value:e?.id,children:e?.name}))]})})]})]}),(0,a.jsxs)("div",{className:"col-lg-6 col-sm-12",children:[a.jsx("label",{className:"mb-2",htmlFor:"",children:"H\xecnh ảnh"}),a.jsx(l(),{multiple:!0,value:b,onChange:e=>{console.log(e),f(e)},maxNumber:69,dataURLKey:"url",children:({imageList:e,onImageUpload:t,onImageRemoveAll:s,onImageUpdate:r,onImageRemove:n,isDragging:i,dragProps:c})=>(0,a.jsxs)("div",{className:"upload__image-wrapper",children:[a.jsx("button",{className:"btn btn-success btn-sm",type:"button",style:i?{color:"red"}:void 0,onClick:e=>{e.preventDefault(),t()},...c,children:"Nhấn chọn hoặc k\xe9o thả tại đ\xe2y"}),"\xa0",a.jsx("button",{className:"btn btn-danger btn-sm",onClick:e=>{e.preventDefault(),s()},children:"X\xf3a tất cả c\xe1 ảnh"}),a.jsx("div",{className:"my-2 d-flex align-items-center row",children:e.map((e,t)=>(0,a.jsxs)("div",{className:" image-item d-flex flex-column align-items-center justify-content-between col-3 flex-md-wrap",children:[a.jsx("img",{src:e.url,width:"100",className:"rounded",height:"100",style:{objectFit:"contain"}}),(0,a.jsxs)("div",{className:"image-item__btn-wrapper my-2 d-flex align-content-center",children:[a.jsx("button",{className:"btn btn-sm btn-success mx-1",onClick:e=>{e.preventDefault(),r(t)},children:"Đổi"}),a.jsx("button",{className:"btn btn-sm btn-warning",onClick:e=>{e.preventDefault(),n(t)},children:"X\xf3a"})]})]},t))})]})}),(0,a.jsxs)("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"exampleTextarea1",children:"M\xf4 tả sản phẩm"}),a.jsx("textarea",{onChange:M,className:"form-control",id:"exampleTextarea1",name:"description",rows:6,defaultValue:"",placeholder:"M\xf4 tả sản phẩm",value:w?.description})]})]})]})})})})})}),s&&a.jsx(n.l,{title:"X\xf3a sản phẩm",content:a.jsx("p",{children:"Bạn c\xf3 muốn x\xf3a sản phẩm n\xe0y kh\xf4ng ?"}),closeModal:()=>c(!1),modalIsOpen:s,onConfirm:()=>z()}),a.jsx(m.Z,{isLoading:B||q||A||k}),a.jsx("div",{className:"row content-wrapper",children:(0,a.jsxs)("div",{className:"col-12 ",children:[(0,a.jsxs)("div",{className:"row mb-2 justify-content-between d-flex ",children:[a.jsx("div",{className:"col-2 ",children:a.jsx("div",{className:"d-grid gap-2",children:a.jsx("button",{onClick:()=>t(!0),type:"button",className:"btn btn-success p-2",children:"+ Th\xeam sản phẩm"})})}),a.jsx("div",{className:"col-5",children:a.jsx("input",{type:"text",className:"form-control",onChange:e=>{let{value:t}=e.target;C([...[...E].filter(e=>e?.name?.toLowerCase()?.includes(t?.toLowerCase()))])},"aria-describedby":"helpId",placeholder:"T\xecm kiếm sản phẩm theo t\xean"})})]}),a.jsx("div",{className:"card",children:(0,a.jsxs)("div",{className:"card-body",children:[a.jsx("h4",{className:"card-title",children:"Danh s\xe1ch sản phẩm"}),a.jsx("div",{className:"table-responsive",children:(0,a.jsxs)("table",{className:"table",children:[a.jsx("thead",{children:(0,a.jsxs)("tr",{children:[a.jsx("th",{children:" Ảnh "}),a.jsx("th",{children:" T\xean "}),a.jsx("th",{children:" M\xf4 tả "}),a.jsx("th",{children:" Số lượng trong kho "}),a.jsx("th",{children:" Gi\xe1 "}),a.jsx("th",{children:"X\xf3a/Cập nhật"})]})}),a.jsx("tbody",{children:N?.slice(8*j-8,8*j).map(e=>a.jsxs("tr",{children:[a.jsx("td",{children:a.jsx("img",{src:e?.images?.length>0&&e?.images[0]?.url,className:"me-1 rounded",style:{objectFit:"contain"},alt:"image"})}),a.jsxs("td",{children:[e?.name?.slice(0,20),"..."]}),a.jsx("td",{className:"w-25 cursor-pointer",children:a.jsx(h.ZP,{allowHTML:!0,content:a.jsx("div",{children:e?.description}),arrow:!0,placement:"right",children:a.jsxs("div",{style:{width:"200px",whiteSpace:"break-spaces"},children:[e?.description?.slice(0,20),"..."]})})}),a.jsxs("td",{children:[e?.stock," "]}),a.jsx("td",{children:u.x(e?.price)}),a.jsxs("td",{children:[a.jsx("button",{onClick:()=>{c(!0),S({id:e?.id,description:"",name:"",price:null,stock:null})},type:"button",className:"btn btn-danger btn-sm",children:"X\xf3a"}),a.jsx("button",{onClick:()=>{y(!0),t(!0),S({description:e?.description,name:e?.name,price:e?.price,stock:e?.stock,id:e?.id,categoriesId:e?.categoriesId}),console.log(e?.images),f(e?.images)},type:"button",className:"btn btn-success btn-sm m-lg-1",children:"Cập nhật"})]})]}))})]})}),a.jsx("div",{className:"d-flex justify-content-end mt-4",children:E&&a.jsx(x.Z,{active:j,handleJump:e=>{g(e)},length:N.length,step:8})})]})})]})})]})}},7322:(e,t,s)=>{"use strict";s.d(t,{Z:()=>n});var a=s(2295);s(3729);var r=s(4465);function n(e){let{length:t,active:s,handleJump:n,step:i=8}=e,c=[];for(let e=1;e<=t/i+1;e++)c.push(a.jsx(r.Z.Item,{defaultValue:s,onClick:()=>n(e),activeLabel:"",active:e===s,children:e},e));return a.jsx(r.Z,{size:"sm",children:c})}},98:(e,t,s)=>{"use strict";s.d(t,{x:()=>r});var a=s(8225);let r=e=>a.format(e,{code:"VND"})},5772:(e,t,s)=>{"use strict";s.d(t,{Zz:()=>i,FZ:()=>l,nS:()=>y,u3:()=>k,qX:()=>x,vF:()=>h,h5:()=>C,xq:()=>f,P7:()=>S,wE:()=>g,Y$:()=>u});var a=s(165),r=s(1280);let n=async e=>await r.p7.post("/auth/login",e),i=()=>(0,a.useMutation)(n),c=async e=>await r.p7.post("/auth/register",e),l=()=>(0,a.useMutation)(c);var o=s(4060);let d=async({id:e,data:t})=>await r.p7.put(`/cart/${e}`,t,{headers:{Authorization:`Bearer ${(0,r.$c)(r.B$.ACCESS_TOKEN)}`}}),u=()=>{let e=(0,a.useQueryClient)();return(0,a.useMutation)(d,{onSuccess({data:t}){let s=(0,o.xE)();e.setQueriesData(s,e=>{let s=e?.data?.cart?.map(e=>e?.id===t?.id?t:e);return e.data.cart=s,e})}})},p=async({id:e})=>await r.p7.delete(`/cart/${e}`,{headers:{Authorization:`Bearer ${(0,r.$c)(r.B$.ACCESS_TOKEN)}`}}),h=()=>{let e=(0,a.useQueryClient)();return(0,a.useMutation)(p,{onSuccess({data:t}){let s=(0,o.xE)();e.setQueriesData(s,e=>{let s=e?.data?.cart?.filter(e=>e?.id!=t?.id);return e.data.cart=s,e})}})},m=async e=>await r.p7.post("/product",e,{headers:{Authorization:`Bearer ${(0,r.$c)(r.B$.ACCESS_TOKEN)}`}}),x=()=>{let e=(0,a.useQueryClient)();return(0,a.useMutation)(m,{onSuccess({data:t}){let s=(0,o.be)();e.setQueriesData(s,e=>(e.data.unshift(t),{...e}))}})},j=async e=>await r.p7.put(`/product/${e.id}`,e,{headers:{Authorization:`Bearer ${(0,r.$c)(r.B$.ACCESS_TOKEN)}`}}),g=()=>{let e=(0,a.useQueryClient)();return(0,a.useMutation)(j,{onSuccess({data:t}){let s=(0,o.be)();e.setQueriesData(s,e=>{let s=e.data.map(e=>e?.id==t?.id?t:e);return e.data=s,{...e}})}})},b=async e=>await r.p7.delete(`/product/${e.id}`,{headers:{Authorization:`Bearer ${(0,r.$c)(r.B$.ACCESS_TOKEN)}`}}),f=()=>{let e=(0,a.useQueryClient)();return(0,a.useMutation)(b,{onSuccess({data:t}){let s=(0,o.be)();e.setQueriesData(s,e=>{let s=e.data?.filter(e=>e?.id!=t?.id);return e.data=s,{...e}})}})},v=async e=>await r.p7.post("/categories",e,{headers:{Authorization:`Bearer ${(0,r.$c)(r.B$.ACCESS_TOKEN)}`}}),y=()=>{let e=(0,a.useQueryClient)();return(0,a.useMutation)(v,{onSuccess({data:t}){let s=(0,o.TC)();e.setQueriesData(s,e=>(e?.data?.unshift(t),e))}})},N=async({id:e})=>await r.p7.delete(`/categories/${e}`,{headers:{Authorization:`Bearer ${(0,r.$c)(r.B$.ACCESS_TOKEN)}`}}),C=()=>{let e=(0,a.useQueryClient)();return(0,a.useMutation)(N,{onSuccess({data:t}){let s=(0,o.TC)();e.setQueriesData(s,e=>{let s=e?.data?.findIndex(e=>e.id==t?.id);return e?.data?.splice(s,1),e})}})},w=async({id:e,data:t})=>await r.p7.put(`/categories/${e}`,t,{headers:{Authorization:`Bearer ${(0,r.$c)(r.B$.ACCESS_TOKEN)}`}}),S=()=>{let e=(0,a.useQueryClient)();return(0,a.useMutation)(w,{onSuccess({data:t}){let s=(0,o.TC)();e.setQueriesData(s,e=>{let s=e?.data.map(e=>e.id==t?.id?t:e);return e.data=[...s],e})}})},$=async e=>await r.p7.post("/posts",e,{headers:{Authorization:`Bearer ${(0,r.$c)(r.B$.ACCESS_TOKEN)}`}}),k=()=>{let e=(0,a.useQueryClient)();return(0,a.useMutation)($,{onSuccess({data:t}){let s=(0,o.U6)();e.setQueriesData(s,e=>(e.data.unshift(t),{...e}))}})}},152:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>l});var a=s(5036);s(2);let r=(0,s(6843).createProxy)(String.raw`G:\computer-project\client\src\components\pages\dashboard\product\product.tsx`),{__esModule:n,$$typeof:i}=r,c=r.default;function l(){return a.jsx(c,{})}}};var t=require("../../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[508,990,223,589,225,711,927,465,325,106,697],()=>s(3279));module.exports=a})();