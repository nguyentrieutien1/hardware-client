(()=>{var e={};e.id=311,e.ids=[311],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},1877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},5319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},9491:e=>{"use strict";e.exports=require("assert")},2361:e=>{"use strict";e.exports=require("events")},7147:e=>{"use strict";e.exports=require("fs")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},1017:e=>{"use strict";e.exports=require("path")},2781:e=>{"use strict";e.exports=require("stream")},7310:e=>{"use strict";e.exports=require("url")},3837:e=>{"use strict";e.exports=require("util")},9796:e=>{"use strict";e.exports=require("zlib")},3279:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>d,routeModule:()=>h,tree:()=>o});var r=s(482),n=s(9108),a=s(2563),i=s.n(a),c=s(8300),l={};for(let e in c)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>c[e]);s.d(t,l);let o=["",{children:["(dashboard)",{children:["dashboard",{children:["product",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,152)),"G:\\computer-project\\client\\src\\app\\(dashboard)\\dashboard\\product\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,3858)),"G:\\computer-project\\client\\src\\app\\(dashboard)\\dashboard\\layout.tsx"]}]},{"not-found":[()=>Promise.resolve().then(s.t.bind(s,9361,23)),"next/dist/client/components/not-found-error"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,5988)),"G:\\computer-project\\client\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,9361,23)),"next/dist/client/components/not-found-error"]}],d=["G:\\computer-project\\client\\src\\app\\(dashboard)\\dashboard\\product\\page.tsx"],u="/(dashboard)/dashboard/product/page",p={require:s,loadChunk:()=>Promise.resolve()},h=new r.AppPageRouteModule({definition:{kind:n.x.APP_PAGE,page:"/(dashboard)/dashboard/product/page",pathname:"/dashboard/product",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},7423:(e,t,s)=>{Promise.resolve().then(s.bind(s,5534))},6313:(e,t,s)=>{"use strict";s.d(t,{l:()=>i});var r=s(2295),n=s(8154),a=s(6531);function i(e){let{modalIsOpen:t,closeModal:s,title:i,content:c,onConfirm:l,size:o}=e;return r.jsx(r.Fragment,{children:o?(0,r.jsxs)(a.Z,{size:o,backdrop:"static",show:t,onHide:()=>s(),children:[r.jsx(a.Z.Header,{closeButton:!0,children:r.jsx(a.Z.Title,{children:i})}),r.jsx(a.Z.Body,{children:c}),(0,r.jsxs)(a.Z.Footer,{children:[r.jsx(n.Z,{variant:"secondary",onClick:()=>s(),children:"Đ\xf3ng"}),r.jsx(n.Z,{variant:"primary",onClick:()=>l(),children:"X\xe1c nhận"})]})]}):(0,r.jsxs)(a.Z,{backdrop:"static",show:t,onHide:()=>s(),children:[r.jsx(a.Z.Header,{closeButton:!0,children:r.jsx(a.Z.Title,{children:i})}),r.jsx(a.Z.Body,{children:c}),(0,r.jsxs)(a.Z.Footer,{children:[r.jsx(n.Z,{size:"sm",variant:"secondary",onClick:()=>s(),children:"Đ\xf3ng"}),r.jsx(n.Z,{size:"sm",variant:"primary",onClick:()=>l(),children:"X\xe1c nhận"})]})]})})}},5534:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>m});var r=s(2295),n=s(3729),a=s(6313),i=s(7582),c=s(5711),l=s.n(c),o=s(1791),d=s(4427),u=s(98),p=s(9304),h=s(9927);function m(){let[e,t]=(0,n.useState)(!1),[s,c]=(0,n.useState)(!1),[m,x]=(0,n.useState)([]),[j,b]=(0,n.useState)(!1),[g,y]=(0,n.useState)([]),[v,f]=(0,n.useState)({name:"",stock:0,price:null,description:"",id:null}),{data:N}=(0,i.iu)(),C=N?.data,{mutateAsync:w}=(0,d.qX)(),{mutateAsync:k}=(0,d.wE)(),{mutateAsync:q}=(0,d.xq)(),_=()=>{f({name:"",stock:0,price:null,description:"",id:null})},S=e=>{let{name:t,value:s}=e.target;if(("price"===t||"stock"===t)&&s.length>9){(0,o.Dd)(`Vui l\xf2ng nhập đ\xfang số ${"price"===t?"tiền":"lượng"}`);return}f(e=>({...e,[t]:"price"===t||"stock"===t?+s:s}))},$=()=>{for(let e in v)if(Object.prototype.hasOwnProperty.call(v,e)&&!v[e]&&"id"!==e){(0,o.Dd)(`C\xe1c trường phải đảm bảo kh\xf4ng được trống.`);return}j?k({...v,images:m.map(e=>({url:e.data_url}))}).then(()=>{t(!1),b(!1),_(),(0,o.Dd)("Cập nhật sản phẩm th\xe0nh c\xf4ng !",{status:"success"})}):(delete v.id,w({...v,images:m.map(e=>({url:e.data_url}))}).then(e=>{t(!1),_(),(0,o.Dd)("Tạo sản phẩm th\xe0nh c\xf4ng !",{status:"success"})}).catch(e=>{console.log(e),(0,p.Cg)(e,"Tạo sản phẩm")}))},E=()=>{try{q({id:v.id}).then(()=>{_(),c(!1),(0,o.Dd)("X\xf3a sản phẩm th\xe0nh c\xf4ng !",{status:"success"})})}catch(e){}};return(0,n.useEffect)(()=>{C&&y([...C])},[N]),(0,r.jsxs)(r.Fragment,{children:[e&&r.jsx(a.l,{size:"lg",title:j?"Cập nhật sản phẩm":"Th\xeam sản phẩm",onConfirm:()=>$(),closeModal:()=>{t(!1),_(),b(!1),x([])},modalIsOpen:e,content:r.jsx("div",{className:"col-12",children:r.jsx("div",{className:"card",children:r.jsx("div",{className:"card-body",children:r.jsx("form",{className:"forms-sample",children:(0,r.jsxs)("div",{className:"row",children:[(0,r.jsxs)("div",{className:"col-lg-6 col-sm-12",children:[(0,r.jsxs)("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"exampleInputName1",children:"T\xean sản phẩm"}),r.jsx("input",{onChange:S,type:"text",className:"form-control",id:"exampleInputName1",placeholder:"T\xean sản phẩm",name:"name",value:v?.name})]}),(0,r.jsxs)("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"exampleInputEmail3",children:"Số lượng sản phẩm"}),r.jsx("input",{onChange:S,type:"number",name:"stock",className:"form-control",id:"exampleInputEmail3",placeholder:"Số lượng sản phẩm",value:v?.stock})]}),(0,r.jsxs)("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"exampleInputPassword4",children:"Gi\xe1"}),r.jsx("input",{onChange:S,type:"number",name:"price",className:"form-control",id:"exampleInputPassword4",placeholder:"Gi\xe1",value:v?.price})]})]}),(0,r.jsxs)("div",{className:"col-lg-6 col-sm-12",children:[r.jsx(l(),{multiple:!0,value:m,onChange:(e,t)=>{x(e)},maxNumber:69,dataURLKey:"data_url",children:({imageList:e,onImageUpload:t,onImageRemoveAll:s,onImageUpdate:n,onImageRemove:a,isDragging:i,dragProps:c})=>(0,r.jsxs)("div",{className:"upload__image-wrapper",children:[r.jsx("button",{className:"btn btn-primary btn-sm",type:"button",style:i?{color:"red"}:void 0,onClick:e=>{e.preventDefault(),t()},...c,children:"Nhấn chọn hoặc k\xe9o thả tại đ\xe2y"}),"\xa0",r.jsx("button",{className:"btn btn-danger btn-sm",onClick:e=>{e.preventDefault(),s()},children:"X\xf3a tất cả c\xe1 ảnh"}),r.jsx("div",{className:"my-2 d-flex align-items-center row",children:e.map((e,t)=>(0,r.jsxs)("div",{className:" image-item d-flex flex-column align-items-center justify-content-between col-3 flex-md-wrap",children:[r.jsx("img",{src:e.data_url,width:"100",className:"rounded",height:"100",style:{objectFit:"cover"}}),(0,r.jsxs)("div",{className:"image-item__btn-wrapper my-2 d-flex align-content-center",children:[r.jsx("button",{className:"btn btn-sm btn-success mx-1",onClick:e=>{e.preventDefault(),n(t)},children:"Đổi"}),r.jsx("button",{className:"btn btn-sm btn-warning",onClick:e=>{e.preventDefault(),a(t)},children:"X\xf3a"})]})]},t))})]})}),(0,r.jsxs)("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"exampleTextarea1",children:"M\xf4 tả sản phẩm"}),r.jsx("textarea",{onChange:S,className:"form-control",id:"exampleTextarea1",name:"description",rows:6,defaultValue:"",placeholder:"M\xf4 tả sản phẩm",value:v?.description})]})]})]})})})})})}),s&&r.jsx(a.l,{title:"X\xf3a sản phẩm",content:r.jsx("p",{children:"Bạn c\xf3 muốn x\xf3a sản phẩm n\xe0y kh\xf4ng ?"}),closeModal:()=>c(!1),modalIsOpen:s,onConfirm:()=>E()}),r.jsx("div",{className:"row content-wrapper",children:(0,r.jsxs)("div",{className:"col-12 ",children:[(0,r.jsxs)("div",{className:"row mb-2 justify-content-between d-flex ",children:[r.jsx("div",{className:"col-2 ",children:r.jsx("div",{className:"d-grid gap-2",children:r.jsx("button",{onClick:()=>t(!0),type:"button",className:"btn btn-primary",children:"+ Th\xeam sản phẩm"})})}),r.jsx("div",{className:"col-5",children:r.jsx("input",{type:"text",className:"form-control",onChange:e=>{let{value:t}=e.target;y([...[...C].filter(e=>e.name.includes(t))])},"aria-describedby":"helpId",placeholder:"T\xecm kiếm sản phẩm theo t\xean"})})]}),r.jsx("div",{className:"card",children:(0,r.jsxs)("div",{className:"card-body",children:[r.jsx("h4",{className:"card-title",children:"Danh s\xe1ch sản phẩm"}),r.jsx("div",{className:"table-responsive",children:(0,r.jsxs)("table",{className:"table",children:[r.jsx("thead",{children:(0,r.jsxs)("tr",{children:[r.jsx("th",{children:" Ảnh "}),r.jsx("th",{children:" T\xean "}),r.jsx("th",{children:" M\xf4 tả "}),r.jsx("th",{children:" Số lượng trong kho "}),r.jsx("th",{children:" Gi\xe1 "}),r.jsx("th",{children:"X\xf3a/Cập nhật"})]})}),r.jsx("tbody",{children:g?.map(e=>(console.log(e),r.jsxs("tr",{children:[r.jsx("td",{children:r.jsx("img",{src:e?.images?.length>0&&e?.images[0]?.url,className:"me-1 rounded",alt:"image"})}),r.jsx("td",{children:e?.name}),r.jsx("td",{className:"w-25 cursor-pointer",children:r.jsx(h.ZP,{allowHTML:!0,content:r.jsx("div",{children:e?.description}),arrow:!0,placement:"right",children:r.jsxs("div",{style:{width:"200px",whiteSpace:"break-spaces"},children:[e?.description?.slice(0,20),"..."]})})}),r.jsxs("td",{children:[e?.stock," "]}),r.jsx("td",{children:u.x(e?.price)}),r.jsxs("td",{children:[r.jsx("button",{onClick:()=>{c(!0),f({id:e?.id,description:"",name:"",price:null,stock:null})},type:"button",className:"btn btn-danger btn-sm",children:"X\xf3a"}),r.jsx("button",{onClick:()=>{b(!0),t(!0),f({description:e?.description,name:e?.name,price:e?.price,stock:e?.stock,id:e?.id}),x(e?.images.map(e=>({data_url:e.url})))},type:"button",className:"btn btn-primary btn-sm m-lg-1",children:"Cập nhật"})]})]})))})]})})]})})]})})]})}},98:(e,t,s)=>{"use strict";s.d(t,{x:()=>n});var r=s(8225);let n=e=>r.format(e,{code:"VND"})},4427:(e,t,s)=>{"use strict";s.d(t,{$B:()=>u,Zz:()=>i,FZ:()=>l,qX:()=>b,vF:()=>x,xq:()=>f,wE:()=>y,Y$:()=>h});var r=s(165),n=s(1791);let a=async e=>await n.p7.post("/auth/login",e),i=()=>(0,r.useMutation)(a),c=async e=>await n.p7.post("/auth/register",e),l=()=>(0,r.useMutation)(c);var o=s(7582);let d=async e=>await n.p7.post("/cart",e,{headers:{Authorization:`Bearer ${(0,n.$c)(n.B$.ACCESS_TOKEN)}`}}),u=()=>{let e=(0,r.useQueryClient)();return(0,r.useMutation)(d,{onSuccess(t,s,r){let n=(0,o.xE)();e.fetchQuery({queryKey:n})}})},p=async({id:e,data:t})=>await n.p7.put(`/cart/${e}`,t,{headers:{Authorization:`Bearer ${(0,n.$c)(n.B$.ACCESS_TOKEN)}`}}),h=()=>{let e=(0,r.useQueryClient)();return(0,r.useMutation)(p,{onSuccess({data:t}){let s=(0,o.xE)();e.fetchQuery({queryKey:s})}})},m=async({id:e})=>await n.p7.delete(`/cart/${e}`,{headers:{Authorization:`Bearer ${(0,n.$c)(n.B$.ACCESS_TOKEN)}`}}),x=()=>{let e=(0,r.useQueryClient)();return(0,r.useMutation)(m,{onSuccess({data:t}){let s=(0,o.xE)();e.fetchQuery({queryKey:s})}})},j=async e=>await n.p7.post("/product",e,{headers:{Authorization:`Bearer ${(0,n.$c)(n.B$.ACCESS_TOKEN)}`}}),b=()=>{let e=(0,r.useQueryClient)();return(0,r.useMutation)(j,{onSuccess({data:t}){let s=(0,o.be)();e.refetchQueries({queryKey:s})}})},g=async e=>await n.p7.put(`/product/${e.id}`,e,{headers:{Authorization:`Bearer ${(0,n.$c)(n.B$.ACCESS_TOKEN)}`}}),y=()=>{let e=(0,r.useQueryClient)();return(0,r.useMutation)(g,{onSuccess({data:t}){let s=(0,o.be)();e.refetchQueries({queryKey:s})}})},v=async e=>await n.p7.delete(`/product/${e.id}`,{headers:{Authorization:`Bearer ${(0,n.$c)(n.B$.ACCESS_TOKEN)}`}}),f=()=>{let e=(0,r.useQueryClient)();return(0,r.useMutation)(v,{onSuccess({data:t}){let s=(0,o.be)();e.refetchQueries({queryKey:s})}})}},152:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>l});var r=s(5036);s(2);let n=(0,s(6843).createProxy)(String.raw`G:\computer-project\client\src\components\pages\dashboard\product\product.tsx`),{__esModule:a,$$typeof:i}=n,c=n.default;function l(){return r.jsx(c,{})}}};var t=require("../../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[267,95,122,538,225,927,308,916,369],()=>s(3279));module.exports=r})();